<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="shortcut icon" href="/icons/icon-192x192.png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1, maximum-scale=5.0, shrink-to-fit=no, viewport-fit=cover"/><meta name="theme-color" content="#09a3d5"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png"/><title>What&#x27;s New in v2.2 ¬∑ spaCy Usage Documentation</title><meta name="description" content="New features, backwards incompatibilities and migration guide"/><meta property="og:title" content="What&#x27;s New in v2.2 ¬∑ spaCy Usage Documentation"/><meta property="og:description" content="New features, backwards incompatibilities and migration guide"/><meta property="og:type" content="website"/><meta property="og:site_name" content="What&#x27;s New in v2.2"/><meta property="og:image" content="https://spacy.io/_next/static/media/social_default.96b04585.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:image" content="https://spacy.io/_next/static/media/social_default.96b04585.jpg"/><meta name="twitter:creator" content="@spacy_io"/><meta name="twitter:site" content="@spacy_io"/><meta name="twitter:title" content="What&#x27;s New in v2.2 ¬∑ spaCy Usage Documentation"/><meta name="twitter:description" content="New features, backwards incompatibilities and migration guide"/><meta name="docsearch:language" content="en"/><meta name="next-head-count" content="24"/><link rel="preload" href="/_next/static/css/8f0b94edbc18d62d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8f0b94edbc18d62d.css" data-n-g=""/><link rel="preload" href="/_next/static/css/e6995e0e8addcf99.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e6995e0e8addcf99.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script defer="" src="/_next/static/chunks/262.c647d33d06232ef6.js"></script><script defer="" src="/_next/static/chunks/728.cf6ba0da2700fa1b.js"></script><script src="/_next/static/chunks/webpack-8161fc2bb14cec39.js" defer=""></script><script src="/_next/static/chunks/framework-3b5a00d5d7e8d93b.js" defer=""></script><script src="/_next/static/chunks/main-a0f603ce323043fd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-eb3ea1261af64e73.js" defer=""></script><script src="/_next/static/chunks/94-57434c8b7a6c3878.js" defer=""></script><script src="/_next/static/chunks/128-76b45627a109219b.js" defer=""></script><script src="/_next/static/chunks/pages/%5B...listPathPage%5D-45eea57fe8c2902c.js" defer=""></script><script src="/_next/static/Ugre-usgT1EZhnSeYcBR9/_buildManifest.js" defer=""></script><script src="/_next/static/Ugre-usgT1EZhnSeYcBR9/_ssgManifest.js" defer=""></script></head><body class="theme-blue"><div id="__next"><div class="theme-blue"><nav class="navigation_root__yPL8O"><span class="navigation_has-alert__s0Drf"><a class="link_root__1Me7D link_no-link-layout__RPvod" aria-label="spaCy" href="/"><h1 class="navigation_title__pm49s">spaCy</h1></a> <span class="navigation_alert__ZOXon"><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/usage/v3-5"><strong>üí• Out now:</strong> spaCy v3.5</a></span></span><div class="navigation_menu__ZMJxN"><select class="dropdown_root__3uiQq navigation_dropdown__4j4pI"><option value="title" disabled="">Menu</option><option value="/usage" selected="">Usage</option><option value="/models">Models</option><option value="/api">API</option><option value="/universe">Universe</option></select><ul class="navigation_list__DCzqi"><li class="navigation_item__ln1O1 navigation_is-active__RjVJG"><a class="link_root__1Me7D link_no-link-layout__RPvod" tabindex="-1" href="/usage">Usage</a></li><li class="navigation_item__ln1O1"><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/models">Models</a></li><li class="navigation_item__ln1O1"><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/api">API</a></li><li class="navigation_item__ln1O1"><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/universe">Universe</a></li><li class="navigation_item__ln1O1 navigation_github__MpFNv"><span><a href="https://github.com/explosion/spaCy" data-size="large" data-show-count="true" aria-label="Star spaCy on GitHub"></a></span></li></ul><div class="navigation_search__BKZCn"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><progress class="progress_root__9huWN" value="0" max="100"></progress></nav><menu class="sidebar sidebar_root__s2No7"><h1 hidden="" aria-hidden="true" class="h0 sidebar_active-heading___dkf9">Documentation</h1><div class="sidebar_dropdown__vyqjz"><select class="dropdown_root__3uiQq sidebar_dropdown-select__Nwbq9"><option disabled="">Select page...</option><option value="/usage">Get started<!-- --> ‚Ä∫ <!-- -->Installation</option><option value="/usage/models">Get started<!-- --> ‚Ä∫ <!-- -->Models &amp; Languages</option><option value="/usage/facts-figures">Get started<!-- --> ‚Ä∫ <!-- -->Facts &amp; Figures</option><option value="/usage/spacy-101">Get started<!-- --> ‚Ä∫ <!-- -->spaCy 101</option><option value="/usage/v3">Get started<!-- --> ‚Ä∫ <!-- -->New in v3.0</option><option value="/usage/v3-1">Get started<!-- --> ‚Ä∫ <!-- -->New in v3.1</option><option value="/usage/v3-2">Get started<!-- --> ‚Ä∫ <!-- -->New in v3.2</option><option value="/usage/v3-3">Get started<!-- --> ‚Ä∫ <!-- -->New in v3.3</option><option value="/usage/v3-4">Get started<!-- --> ‚Ä∫ <!-- -->New in v3.4</option><option value="/usage/v3-5">Get started<!-- --> ‚Ä∫ <!-- -->New in v3.5</option><option value="/usage/linguistic-features">Guides<!-- --> ‚Ä∫ <!-- -->Linguistic Features</option><option value="/usage/rule-based-matching">Guides<!-- --> ‚Ä∫ <!-- -->Rule-based Matching</option><option value="/usage/processing-pipelines">Guides<!-- --> ‚Ä∫ <!-- -->Processing Pipelines</option><option value="/usage/embeddings-transformers">Guides<!-- --> ‚Ä∫ <!-- -->Embeddings &amp; Transformers</option><option value="/usage/training">Guides<!-- --> ‚Ä∫ <!-- -->Training Models</option><option value="/usage/layers-architectures">Guides<!-- --> ‚Ä∫ <!-- -->Layers &amp; Model Architectures</option><option value="/usage/projects">Guides<!-- --> ‚Ä∫ <!-- -->spaCy Projects</option><option value="/usage/saving-loading">Guides<!-- --> ‚Ä∫ <!-- -->Saving &amp; Loading</option><option value="/usage/visualizers">Guides<!-- --> ‚Ä∫ <!-- -->Visualizers</option><option value="https://github.com/explosion/projects">Resources<!-- --> ‚Ä∫ <!-- -->Project Templates</option><option value="https://v2.spacy.io">Resources<!-- --> ‚Ä∫ <!-- -->v2.x Documentation</option><option value="https://explosion.ai/custom-solutions">Resources<!-- --> ‚Ä∫ <!-- -->Custom Solutions</option></select></div><ul class="sidebar_section__DArOO"><li class="sidebar_label__V3K28">Get started</li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage">Installation</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/models">Models &amp; Languages</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/facts-figures">Facts &amp; Figures</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/spacy-101">spaCy 101</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/v3">New in v3.0</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/v3-1">New in v3.1</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/v3-2">New in v3.2</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/v3-3">New in v3.3</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/v3-4">New in v3.4</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/v3-5">New in v3.5</a></li></ul><ul class="sidebar_section__DArOO"><li class="sidebar_label__V3K28">Guides</li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/linguistic-features">Linguistic Features</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/rule-based-matching">Rule-based Matching</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/processing-pipelines">Processing Pipelines</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/embeddings-transformers">Embeddings &amp; Transformers<span class="tag_root__NTSnK tag_spaced__Q9amH">new</span></a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/training">Training Models<span class="tag_root__NTSnK tag_spaced__Q9amH">new</span></a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/layers-architectures">Layers &amp; Model Architectures<span class="tag_root__NTSnK tag_spaced__Q9amH">new</span></a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/projects">spaCy Projects<span class="tag_root__NTSnK tag_spaced__Q9amH">new</span></a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/saving-loading">Saving &amp; Loading</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/visualizers">Visualizers</a></li></ul><ul class="sidebar_section__DArOO"><li class="sidebar_label__V3K28">Resources</li><li><a class="link_root__1Me7D sidebar_link__sKXFP" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/projects">Project Templates</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="https://v2.spacy.io">v2.x Documentation</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="https://explosion.ai/custom-solutions">Custom Solutions</a></li></ul></menu><main class="main_root__7f6Tj main_with-sidebar__uH1df main_with-asides__ikQT6"><article class="main_content__8zFCH"><header class="title_root__pS2WQ"><h1 id="_title" class="typography_heading__D82WZ typography_h1__b7dt9 title_h1__l3CW1"><span class="heading-text">What&#x27;s New in v2.2<!-- --> </span></h1><div class="heading-teaser title_teaser__QhwCH">New features, backwards incompatibilities and migration guide</div></header><section id="section-features" class="section_root__k1hUl"><p>spaCy v2.2 features improved statistical models, new pretrained models for
Norwegian and Lithuanian, better Dutch NER, as well as a new mechanism for
storing language data that makes the installation about <strong>5-10√ó smaller</strong>
on disk. We‚Äôve also added a new class to efficiently <strong>serialize annotations</strong>,
an improved and <strong>10√ó faster</strong> phrase matching engine, built-in scoring
and <strong>CLI training for text classification</strong>, a new command to analyze and
<strong>debug training data</strong>, data augmentation during training and more. For the
full changelog, see the
<a class="link_root__1Me7D link_with-icon__NAVDA" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/releases/tag/v2.2.0"><span class="link_source-text__VDP74">release notes on GitHub</span></a>.</p><p>For more details and a behind-the-scenes look at the new release,
<a class="link_root__1Me7D" href="https://explosion.ai/blog/spacy-v2-2">see our blog post</a>.</p><h3 id="models" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#models" class="heading-text typography_permalink__UiIRy">Better pretrained models and more languages <!-- --> </a></h3><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-bash language-bash"></code></pre>
</div></div></aside><p>The new version also features new and re-trained models for all languages and
resolves a number of data bugs. The <a class="link_root__1Me7D link_with-icon__NAVDA" href="/models/nl"><span class="link_source-text__VDP74">Dutch model</span></a> has been retrained
with a new and custom-labelled NER corpus using the same extended label scheme
as the English models. It should now produce significantly better NER results
overall. We‚Äôve also added new core models for <a class="link_root__1Me7D link_with-icon__NAVDA" href="/models/nb"><span class="link_source-text__VDP74">Norwegian</span></a> (MIT) and
<a class="link_root__1Me7D link_with-icon__NAVDA" href="/models/lt"><span class="link_source-text__VDP74">Lithuanian</span></a> (CC BY-SA).</p><aside class="infobox_root__yNIMg"><p><strong>Usage:</strong> <a class="link_root__1Me7D" href="/models">Models directory</a> **Benchmarks: **
<a class="link_root__1Me7D link_with-icon__NAVDA" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/releases/tag/v2.2.0"><span class="link_source-text__VDP74">Release notes</span></a></p></aside><h3 id="train-textcat-cli" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#train-textcat-cli" class="heading-text typography_permalink__UiIRy">Text classification scores and CLI training <!-- --> </a></h3><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-bash language-bash"></code></pre>
</div></div></aside><p>When training your models using the <code class="code_inline-code__Bq7ot">spacy train</code> command, you can now also
include text categories in the JSON-formatted training data. The <code class="code_inline-code__Bq7ot">Scorer</code> and
<code class="code_inline-code__Bq7ot">nlp.evaluate</code> now report the text classification scores, calculated as the
F-score on positive label for binary exclusive tasks, the macro-averaged F-score
for 3+ exclusive labels or the macro-averaged AUC ROC score for multilabel
classification.</p><aside class="infobox_root__yNIMg"><p><strong>API:</strong> <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/cli#train"><code class="code_inline-code__Bq7ot">spacy train</code></a>, <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/scorer"><code class="code_inline-code__Bq7ot">Scorer</code></a>,
<a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/language#evaluate"><code class="code_inline-code__Bq7ot">Language.evaluate</code></a></p></aside><h3 class="typography_heading__D82WZ typography_h3__mPKmB"><span class="heading-text">New DocBin class to efficiently serialize Doc collections<!-- --> </span></h3><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-python language-python"></code></pre>
</div></div></aside><p>If you‚Äôre working with lots of data, you‚Äôll probably need to pass analyses
between machines, either to use something like <a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://dask.org">Dask</a> or
<a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://spark.apache.org">Spark</a>, or even just to save out work to disk. Often
it‚Äôs sufficient to use the <code class="code_inline-code__Bq7ot">Doc.to_array</code> functionality for this, and just
serialize the numpy arrays ‚Äì but other times you want a more general way to save
and restore <code class="code_inline-code__Bq7ot">Doc</code> objects.</p><p>The new <code class="code_inline-code__Bq7ot">DocBin</code> class makes it easy to serialize and deserialize a collection
of <code class="code_inline-code__Bq7ot">Doc</code> objects together, and is much more efficient than calling
<code class="code_inline-code__Bq7ot">Doc.to_bytes</code> on each individual <code class="code_inline-code__Bq7ot">Doc</code> object. You can also control what data
gets saved, and you can merge pallets together for easy map/reduce-style
processing.</p><aside class="infobox_root__yNIMg"><p><strong>API:</strong> <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/docbin"><code class="code_inline-code__Bq7ot">DocBin</code></a> **Usage: **
<a class="link_root__1Me7D" href="/usage/saving-loading#docs">Serializing Doc objects</a></p></aside><h3 id="lookups" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#lookups" class="heading-text typography_permalink__UiIRy">Serializable lookup tables and smaller installation <!-- --> </a></h3><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-python language-python"></code></pre>
</div></div></aside><p>The new <code class="code_inline-code__Bq7ot">Lookups</code> API lets you add large dictionaries and lookup tables to the
<code class="code_inline-code__Bq7ot">Vocab</code> and access them from the tokenizer or custom components and extension
attributes. Internally, the tables use Bloom filters for efficient lookup
checks. They‚Äôre also fully serializable out-of-the-box. All large data resources
like lemmatization tables have been moved to a separate package,
<a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spacy-lookups-data"><code class="code_inline-code__Bq7ot">spacy-lookups-data</code></a> that can
be installed alongside the core library. This allowed us to make the spaCy
installation <strong>5-10√ó smaller on disk</strong> (depending on your platform).
<a class="link_root__1Me7D" href="/models">Pretrained models</a> now include their data files, so you only need to
install the lookups if you want to build blank models or use lemmatization with
languages that don‚Äôt yet ship with pretrained models.</p><aside class="infobox_root__yNIMg"><p><strong>API:</strong> <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/lookups"><code class="code_inline-code__Bq7ot">Lookups</code></a>,
<a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spacy-lookups-data"><code class="code_inline-code__Bq7ot">spacy-lookups-data</code></a> **Usage:
** <a class="link_root__1Me7D" href="/usage/adding-languages#lemmatizer">Adding languages: Lemmatizer</a></p></aside><h3 id="debug-data" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#debug-data" class="heading-text typography_permalink__UiIRy">CLI command to debug and validate training data <!-- --> </a></h3><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-bash language-bash"></code></pre>
</div></div></aside><p>The new <code class="code_inline-code__Bq7ot">debug-data</code> command lets you analyze and validate your training and
development data, get useful stats, and find problems like invalid entity
annotations, cyclic dependencies, low data labels and more. If you‚Äôre training a
model with <code class="code_inline-code__Bq7ot">spacy train</code> and the results seem surprising or confusing,
<code class="code_inline-code__Bq7ot">debug-data</code> may help you track down the problems and improve your training
data.</p><section class="accordion"><div class="accordion_root__pPltq"><h4><button class="accordion_button__IPO0E" aria-expanded="true"><span><span class="heading-text">Example output</span></span><svg class="accordion_icon__fpBl7" width="20" height="20" viewBox="0 0 10 10" aria-hidden="true" focusable="false"><rect class="accordion_hidden__tgILw" height="8" width="2" x="4" y="1"></rect><rect height="2" width="8" x="1" y="4"></rect></svg></button></h4><div class="accordion_content__divKS"><pre class="code_pre__kzg60"><code class="code_code__CILJL language-none"></code></pre></div></div></section><aside class="infobox_root__yNIMg"><p><strong>API:</strong> <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/cli#debug-data"><code class="code_inline-code__Bq7ot">spacy debug-data</code></a></p></aside></section>
<section id="section-incompat" class="section_root__k1hUl"><h2 id="incompat" class="typography_heading__D82WZ typography_h2__hzV3h"><a href="#incompat" class="heading-text typography_permalink__UiIRy">Backwards incompatibilities <!-- --> </a></h2><aside class="infobox_root__yNIMg infobox_warning__SKl67"><h4 class="infobox_title__uDT7C"><span>Important note on models</span></h4><p>If you‚Äôve been training <strong>your own models</strong>, you‚Äôll need to <strong>retrain</strong> them
with the new version. Also don‚Äôt forget to upgrade all models to the latest
versions. Models for v2.0 or v2.1 aren‚Äôt compatible with models for v2.2. To
check if all of your models are up to date, you can run the
<a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/cli#validate"><code class="code_inline-code__Bq7ot">spacy validate</code></a> command.</p></aside><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Install with lookups data<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-bash language-bash"></code></pre>
<p>You can also install
<a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spacy-lookups-data"><code class="code_inline-code__Bq7ot">spacy-lookups-data</code></a>
directly.</p>
</div></div></aside><ul class="list_ul__fe_HF">
<li class="list_li__sfx_z">The lemmatization tables have been moved to their own package,
<a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spacy-lookups-data"><code class="code_inline-code__Bq7ot">spacy-lookups-data</code></a>, which
is not installed by default. If you‚Äôre using pretrained models, <strong>nothing
changes</strong>, because the tables are now included in the model packages. If you
want to use the lemmatizer for other languages that don‚Äôt yet have pretrained
models (e.g. Turkish or Croatian) or start off with a blank model that
contains lookup data (e.g. <code class="code_inline-code__Bq7ot">spacy.blank(&quot;en&quot;)</code>), you‚Äôll need to <strong>explicitly
install spaCy plus data</strong> via <code class="code_inline-code__Bq7ot">pip install spacy[lookups]</code>.</li>
<li class="list_li__sfx_z">Lemmatization tables (rules, exceptions, index and lookups) are now part of
the <code class="code_inline-code__Bq7ot">Vocab</code> and serialized with it. This means that serialized objects (<code class="code_inline-code__Bq7ot">nlp</code>,
pipeline components, vocab) will now include additional data, and models
written to disk will include additional files.</li>
<li class="list_li__sfx_z">The <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/lemmatizer"><code class="code_inline-code__Bq7ot">Lemmatizer</code></a> class is now initialized with an instance
of <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/lookups"><code class="code_inline-code__Bq7ot">Lookups</code></a> containing the rules and tables, instead of dicts
as separate arguments. This makes it easier to share data tables and modify
them at runtime. This is mostly internals, but if you‚Äôve been implementing a
custom <code class="code_inline-code__Bq7ot">Lemmatizer</code>, you‚Äôll need to update your code.</li>
<li class="list_li__sfx_z">The <a class="link_root__1Me7D link_with-icon__NAVDA" href="/models/nl"><span class="link_source-text__VDP74">Dutch model</span></a> has been trained on a new NER corpus (custom
labelled UD instead of WikiNER), so their predictions may be very different
compared to the previous version. The results should be significantly better
and more generalizable, though.</li>
<li class="list_li__sfx_z">The <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/cli#download"><code class="code_inline-code__Bq7ot">spacy download</code></a> command does <strong>not</strong> set the
<code class="code_inline-code__Bq7ot">--no-deps</code> pip argument anymore by default, meaning that model package
dependencies (if available) will now be also downloaded and installed. If
spaCy (which is also a model dependency) is not installed in the current
environment, e.g. if a user has built from source, <code class="code_inline-code__Bq7ot">--no-deps</code> is added back
automatically to prevent spaCy from being downloaded and installed again from
pip.</li>
<li class="list_li__sfx_z">The built-in
<a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/top-level#biluo_tags_from_offsets"><code class="code_inline-code__Bq7ot">biluo_tags_from_offsets</code></a> converter
is now stricter and will raise an error if entities are overlapping (instead
of silently skipping them). If your data contains invalid entity annotations,
make sure to clean it and resolve conflicts. You can now also use the new
<code class="code_inline-code__Bq7ot">debug-data</code> command to find problems in your data.</li>
<li class="list_li__sfx_z">Pipeline components can now overwrite IOB tags of tokens that are not yet part
of an entity. Once a token has an <code class="code_inline-code__Bq7ot">ent_iob</code> value set, it won‚Äôt be reset to an
‚Äúunset‚Äù state and will always have at least <code class="code_inline-code__Bq7ot">O</code> assigned. <code class="code_inline-code__Bq7ot">list(doc.ents)</code> now
actually keeps the annotations on the token level consistent, instead of
resetting <code class="code_inline-code__Bq7ot">O</code> to an empty string.</li>
<li class="list_li__sfx_z">The default punctuation in the <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/sentencizer"><code class="code_inline-code__Bq7ot">Sentencizer</code></a> has been
extended and now includes more characters common in various languages. This
also means that the results it produces may change, depending on your text. If
you want the previous behavior with limited characters, set
<code class="code_inline-code__Bq7ot">punct_chars=[&quot;.&quot;, &quot;!&quot;, &quot;?&quot;]</code> on initialization.</li>
<li class="list_li__sfx_z">The <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/phrasematcher"><code class="code_inline-code__Bq7ot">PhraseMatcher</code></a> algorithm was rewritten from scratch
and it‚Äôs now 10√ó faster. The rewrite also resolved a few subtle bugs
with very large terminology lists. So if you were matching large lists, you
may see slightly different results ‚Äì however, the results should now be fully
correct. See <a class="link_root__1Me7D link_with-icon__NAVDA" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/pull/4309"><span class="link_source-text__VDP74">this PR</span></a> for more
details.</li>
<li class="list_li__sfx_z">The <code class="code_inline-code__Bq7ot">Serbian</code> language class (introduced in v2.1.8) incorrectly used the
language code <code class="code_inline-code__Bq7ot">rs</code> instead of <code class="code_inline-code__Bq7ot">sr</code>. This has now been fixed, so <code class="code_inline-code__Bq7ot">Serbian</code> is
now available via <code class="code_inline-code__Bq7ot">spacy.lang.sr</code>.</li>
<li class="list_li__sfx_z">The <code class="code_inline-code__Bq7ot">&quot;sources&quot;</code> in the <code class="code_inline-code__Bq7ot">meta.json</code> have changed from a list of strings to a
list of dicts. This is mostly internals, but if your code used
<code class="code_inline-code__Bq7ot">nlp.meta[&quot;sources&quot;]</code>, you might have to update it.</li>
</ul><h3 id="migrating" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#migrating" class="heading-text typography_permalink__UiIRy">Migrating from spaCy 2.1 <!-- --> </a></h3><h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Lemmatization data and lookup tables<!-- --> </span></h4><p>If you application needs lemmatization for <a class="link_root__1Me7D" href="/usage/models#languages">languages</a>
with only tokenizers, you now need to install that data explicitly via
<code class="code_inline-code__Bq7ot">pip install spacy[lookups]</code> or <code class="code_inline-code__Bq7ot code_wrap__b41os">pip install spacy-lookups-data</code>. No additional
setup is required ‚Äì the package just needs to be installed in the same
environment as spaCy.</p><pre class="code_pre__kzg60"><code class="code_code__CILJL language-python language-python code_wrap__b41os"></code></pre><p>The same applies to blank models that you want to update and train ‚Äì for
instance, you might use <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/top-level#spacy.blank"><code class="code_inline-code__Bq7ot">spacy.blank</code></a> to create a
blank English model and then train your own part-of-speech tagger on top. If you
don‚Äôt explicitly install the lookups data, that <code class="code_inline-code__Bq7ot">nlp</code> object won‚Äôt have any
lemmatization rules available. spaCy will now show you a warning when you train
a new part-of-speech tagger and the vocab has no lookups available.</p><h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Lemmatizer initialization<!-- --> </span></h4><p>This is mainly internals and should hopefully not affect your code. But if
you‚Äôve been creating custom <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/lemmatizer"><code class="code_inline-code__Bq7ot">Lemmatizers</code></a>, you‚Äôll need to
update how they‚Äôre initialized and pass in an instance of
<a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/lookups"><code class="code_inline-code__Bq7ot">Lookups</code></a> with the (optional) tables <code class="code_inline-code__Bq7ot">lemma_index</code>, <code class="code_inline-code__Bq7ot">lemma_exc</code>,
<code class="code_inline-code__Bq7ot">lemma_rules</code> and <code class="code_inline-code__Bq7ot">lemma_lookup</code>.</p><pre class="code_pre__kzg60"><code class="code_code__CILJL language-diff language-diff"></code></pre><h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Converting entity offsets to BILUO tags<!-- --> </span></h4><p>If you‚Äôve been using the
<a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/top-level#biluo_tags_from_offsets"><code class="code_inline-code__Bq7ot">biluo_tags_from_offsets</code></a> helper to
convert character offsets into token-based BILUO tags, you may now see an error
if the offsets contain overlapping tokens and make it impossible to create a
valid BILUO sequence. This is helpful, because it lets you spot potential
problems in your data that can lead to inconsistent results later on. But it
also means that you need to adjust and clean up the offsets before converting
them:</p><pre class="code_pre__kzg60"><code class="code_code__CILJL language-diff language-diff"></code></pre><h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Serbian language data<!-- --> </span></h4><p>If you‚Äôve been working with <code class="code_inline-code__Bq7ot">Serbian</code> (introduced in v2.1.8), you‚Äôll need to
change the language code from <code class="code_inline-code__Bq7ot">rs</code> to the correct <code class="code_inline-code__Bq7ot">sr</code>:</p><pre class="code_pre__kzg60"><code class="code_code__CILJL language-diff language-diff"></code></pre></section><div class="grid_root__EfDZl grid_spacing__fhBCv grid_half__xoJZs"><div style="margin-top:var(--spacing-lg)"><a class="link_root__1Me7D button_root__jwipc button_secondary__ukZAk" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/tree/master/website/docs/usage/v2-2.mdx">Suggest edits</a></div></div></article><div class="main_asides__RITE5" style="background-image:url(/_next/static/media/pattern_blue.d167bed5.png"></div><footer class="footer_root__zlkjP"><div class="grid_root__EfDZl footer_content__LaE1F grid_narrow__x_6xS grid_spacing__fhBCv grid_third__edHuB"><section><ul class="footer_column__DPe22"><li class="footer_label__xK7_s">spaCy</li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/usage">Usage</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/models">Models</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/api">API Reference</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://course.spacy.io">Online Course</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://explosion.ai/custom-solutions">Custom Solutions</a></li></ul></section><section><ul class="footer_column__DPe22"><li class="footer_label__xK7_s">Community</li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/universe">Universe</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/discussions">GitHub Discussions</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/issues">Issue Tracker</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="http://stackoverflow.com/questions/tagged/spacy">Stack Overflow</a></li></ul></section><section><ul class="footer_column__DPe22"><li class="footer_label__xK7_s">Connect</li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://twitter.com/spacy_io">Twitter</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy">GitHub</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://youtube.com/c/ExplosionAI">YouTube</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://explosion.ai/blog">Blog</a></li></ul></section><section class="footer_full___icln"><ul class="footer_column__DPe22"><li class="footer_label__xK7_s">Stay in the loop!</li><li>Receive updates about new releases, tutorials and more.</li><li><form id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" action="//spacy.us12.list-manage.com/subscribe/post?u=83b0498b1e7fa3c91ce68c3f1&amp;amp;id=ecc82e0493" method="post" target="_blank" novalidate=""><div style="position:absolute;left:-5000px" aria-hidden="true"><input type="text" name="b_83b0498b1e7fa3c91ce68c3f1_ecc82e0493" tabindex="-1" value=""/></div><div class="newsletter_root__uh6MU"><input class="newsletter_input___SMSB" id="mce-EMAIL" type="email" name="EMAIL" placeholder="Your email" aria-label="Your email"/><button class="newsletter_button__gKW8E" id="mc-embedded-subscribe" type="submit" name="subscribe">Sign up</button></div></form></li></ul></section></div><div class="footer_content__LaE1F footer_copy__rbjvc"><span>¬© 2016-<!-- -->2023<!-- --> <a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://explosion.ai">Explosion</a></span><a class="link_root__1Me7D footer_logo__BthsJ link_no-link-layout__RPvod" aria-label="Explosion" href="https://explosion.ai"></a><a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://explosion.ai/legal">Legal / Imprint</a></div></footer></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"What's New in v2.2","teaser":"New features, backwards incompatibilities and migration guide","menu":[["New Features","features"],["Backwards Incompatibilities","incompat"],["Migrating from v2.1","migrating"]],"slug":"/usage/v2-2","mdx":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    section: \"section\",\n    h2: \"h2\",\n    p: \"p\",\n    strong: \"strong\",\n    a: \"a\",\n    h3: \"h3\",\n    blockquote: \"blockquote\",\n    h4: \"h4\",\n    pre: \"pre\",\n    code: \"code\",\n    ul: \"ul\",\n    li: \"li\"\n  }, _provideComponents(), props.components), {Infobox, InlineCode, Accordion} = _components;\n  if (!Accordion) _missingMdxReference(\"Accordion\", true);\n  if (!Infobox) _missingMdxReference(\"Infobox\", true);\n  if (!InlineCode) _missingMdxReference(\"InlineCode\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.section, {\n      id: \"section-features\",\n      children: [_jsx(_components.h2, {\n        id: \"features\",\n        hidden: \"true\",\n        children: \"New Features \"\n      }), _jsxs(_components.p, {\n        children: [\"spaCy v2.2 features improved statistical models, new pretrained models for\\nNorwegian and Lithuanian, better Dutch NER, as well as a new mechanism for\\nstoring language data that makes the installation about \", _jsx(_components.strong, {\n          children: \"5-10√ó smaller\"\n        }), \"\\non disk. We‚Äôve also added a new class to efficiently \", _jsx(_components.strong, {\n          children: \"serialize annotations\"\n        }), \",\\nan improved and \", _jsx(_components.strong, {\n          children: \"10√ó faster\"\n        }), \" phrase matching engine, built-in scoring\\nand \", _jsx(_components.strong, {\n          children: \"CLI training for text classification\"\n        }), \", a new command to analyze and\\n\", _jsx(_components.strong, {\n          children: \"debug training data\"\n        }), \", data augmentation during training and more. For the\\nfull changelog, see the\\n\", _jsx(_components.a, {\n          href: \"https://github.com/explosion/spaCy/releases/tag/v2.2.0\",\n          children: \"release notes on GitHub\"\n        }), \".\"]\n      }), _jsxs(_components.p, {\n        children: [\"For more details and a behind-the-scenes look at the new release,\\n\", _jsx(_components.a, {\n          href: \"https://explosion.ai/blog/spacy-v2-2\",\n          children: \"see our blog post\"\n        }), \".\"]\n      }), _jsx(_components.h3, {\n        id: \"models\",\n        children: \"Better pretrained models and more languages \"\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-bash\",\n            lang: \"bash\",\n            children: \"python -m spacy download nl_core_news_sm\\npython -m spacy download nb_core_news_sm\\npython -m spacy download lt_core_news_sm\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsxs(_components.p, {\n        children: [\"The new version also features new and re-trained models for all languages and\\nresolves a number of data bugs. The \", _jsx(_components.a, {\n          href: \"/models/nl\",\n          children: \"Dutch model\"\n        }), \" has been retrained\\nwith a new and custom-labelled NER corpus using the same extended label scheme\\nas the English models. It should now produce significantly better NER results\\noverall. We‚Äôve also added new core models for \", _jsx(_components.a, {\n          href: \"/models/nb\",\n          children: \"Norwegian\"\n        }), \" (MIT) and\\n\", _jsx(_components.a, {\n          href: \"/models/lt\",\n          children: \"Lithuanian\"\n        }), \" (CC BY-SA).\"]\n      }), _jsx(Infobox, {\n        children: _jsxs(_components.p, {\n          children: [_jsx(_components.strong, {\n            children: \"Usage:\"\n          }), \" \", _jsx(_components.a, {\n            href: \"/models\",\n            children: \"Models directory\"\n          }), \" **Benchmarks: **\\n\", _jsx(_components.a, {\n            href: \"https://github.com/explosion/spaCy/releases/tag/v2.2.0\",\n            children: \"Release notes\"\n          })]\n        })\n      }), _jsx(_components.h3, {\n        id: \"train-textcat-cli\",\n        children: \"Text classification scores and CLI training \"\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-bash\",\n            lang: \"bash\",\n            children: \"$ python -m spacy train en /output /train /dev \\\\\\\\\\n--pipeline textcat --textcat-arch simple_cnn \\\\\\\\\\n--textcat-multilabel\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsxs(_components.p, {\n        children: [\"When training your models using the \", _jsx(InlineCode, {\n          children: \"spacy train\"\n        }), \" command, you can now also\\ninclude text categories in the JSON-formatted training data. The \", _jsx(InlineCode, {\n          children: \"Scorer\"\n        }), \" and\\n\", _jsx(InlineCode, {\n          children: \"nlp.evaluate\"\n        }), \" now report the text classification scores, calculated as the\\nF-score on positive label for binary exclusive tasks, the macro-averaged F-score\\nfor 3+ exclusive labels or the macro-averaged AUC ROC score for multilabel\\nclassification.\"]\n      }), _jsx(Infobox, {\n        children: _jsxs(_components.p, {\n          children: [_jsx(_components.strong, {\n            children: \"API:\"\n          }), \" \", _jsx(_components.a, {\n            href: \"/api/cli#train\",\n            children: _jsx(InlineCode, {\n              children: \"spacy train\"\n            })\n          }), \", \", _jsx(_components.a, {\n            href: \"/api/scorer\",\n            children: _jsx(InlineCode, {\n              children: \"Scorer\"\n            })\n          }), \",\\n\", _jsx(_components.a, {\n            href: \"/api/language#evaluate\",\n            children: _jsx(InlineCode, {\n              children: \"Language.evaluate\"\n            })\n          })]\n        })\n      }), _jsx(_components.h3, {\n        children: \"New DocBin class to efficiently serialize Doc collections\"\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-python\",\n            lang: \"python\",\n            children: \"from spacy.tokens import DocBin\\ndoc_bin = DocBin(attrs=[\\\"LEMMA\\\", \\\"ENT_IOB\\\", \\\"ENT_TYPE\\\"], store_user_data=True)\\nfor doc in nlp.pipe(texts):\\n    doc_bin.add(doc)\\nbytes_data = doc_bin.to_bytes()\\n# Deserialize later, e.g. in a new process\\nnlp = spacy.blank(\\\"en\\\")\\ndoc_bin = DocBin().from_bytes(bytes_data)\\ndocs = list(doc_bin.get_docs(nlp.vocab))\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsxs(_components.p, {\n        children: [\"If you‚Äôre working with lots of data, you‚Äôll probably need to pass analyses\\nbetween machines, either to use something like \", _jsx(_components.a, {\n          href: \"https://dask.org\",\n          children: \"Dask\"\n        }), \" or\\n\", _jsx(_components.a, {\n          href: \"https://spark.apache.org\",\n          children: \"Spark\"\n        }), \", or even just to save out work to disk. Often\\nit‚Äôs sufficient to use the \", _jsx(InlineCode, {\n          children: \"Doc.to_array\"\n        }), \" functionality for this, and just\\nserialize the numpy arrays ‚Äì but other times you want a more general way to save\\nand restore \", _jsx(InlineCode, {\n          children: \"Doc\"\n        }), \" objects.\"]\n      }), _jsxs(_components.p, {\n        children: [\"The new \", _jsx(InlineCode, {\n          children: \"DocBin\"\n        }), \" class makes it easy to serialize and deserialize a collection\\nof \", _jsx(InlineCode, {\n          children: \"Doc\"\n        }), \" objects together, and is much more efficient than calling\\n\", _jsx(InlineCode, {\n          children: \"Doc.to_bytes\"\n        }), \" on each individual \", _jsx(InlineCode, {\n          children: \"Doc\"\n        }), \" object. You can also control what data\\ngets saved, and you can merge pallets together for easy map/reduce-style\\nprocessing.\"]\n      }), _jsx(Infobox, {\n        children: _jsxs(_components.p, {\n          children: [_jsx(_components.strong, {\n            children: \"API:\"\n          }), \" \", _jsx(_components.a, {\n            href: \"/api/docbin\",\n            children: _jsx(InlineCode, {\n              children: \"DocBin\"\n            })\n          }), \" **Usage: **\\n\", _jsx(_components.a, {\n            href: \"/usage/saving-loading#docs\",\n            children: \"Serializing Doc objects\"\n          })]\n        })\n      }), _jsx(_components.h3, {\n        id: \"lookups\",\n        children: \"Serializable lookup tables and smaller installation \"\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-python\",\n            lang: \"python\",\n            children: \"data = {\\\"foo\\\": \\\"bar\\\"}\\nnlp.vocab.lookups.add_table(\\\"my_dict\\\", data)\\n\\ndef custom_component(doc):\\n   table = doc.vocab.lookups.get_table(\\\"my_dict\\\")\\n   print(table.get(\\\"foo\\\"))  # look something up\\n   return doc\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsxs(_components.p, {\n        children: [\"The new \", _jsx(InlineCode, {\n          children: \"Lookups\"\n        }), \" API lets you add large dictionaries and lookup tables to the\\n\", _jsx(InlineCode, {\n          children: \"Vocab\"\n        }), \" and access them from the tokenizer or custom components and extension\\nattributes. Internally, the tables use Bloom filters for efficient lookup\\nchecks. They‚Äôre also fully serializable out-of-the-box. All large data resources\\nlike lemmatization tables have been moved to a separate package,\\n\", _jsx(_components.a, {\n          href: \"https://github.com/explosion/spacy-lookups-data\",\n          children: _jsx(InlineCode, {\n            children: \"spacy-lookups-data\"\n          })\n        }), \" that can\\nbe installed alongside the core library. This allowed us to make the spaCy\\ninstallation \", _jsx(_components.strong, {\n          children: \"5-10√ó smaller on disk\"\n        }), \" (depending on your platform).\\n\", _jsx(_components.a, {\n          href: \"/models\",\n          children: \"Pretrained models\"\n        }), \" now include their data files, so you only need to\\ninstall the lookups if you want to build blank models or use lemmatization with\\nlanguages that don‚Äôt yet ship with pretrained models.\"]\n      }), _jsx(Infobox, {\n        children: _jsxs(_components.p, {\n          children: [_jsx(_components.strong, {\n            children: \"API:\"\n          }), \" \", _jsx(_components.a, {\n            href: \"/api/lookups\",\n            children: _jsx(InlineCode, {\n              children: \"Lookups\"\n            })\n          }), \",\\n\", _jsx(_components.a, {\n            href: \"https://github.com/explosion/spacy-lookups-data\",\n            children: _jsx(InlineCode, {\n              children: \"spacy-lookups-data\"\n            })\n          }), \" **Usage:\\n** \", _jsx(_components.a, {\n            href: \"/usage/adding-languages#lemmatizer\",\n            children: \"Adding languages: Lemmatizer\"\n          })]\n        })\n      }), _jsx(_components.h3, {\n        id: \"debug-data\",\n        children: \"CLI command to debug and validate training data \"\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-bash\",\n            lang: \"bash\",\n            children: \"$ python -m spacy debug-data en train.json dev.json\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsxs(_components.p, {\n        children: [\"The new \", _jsx(InlineCode, {\n          children: \"debug-data\"\n        }), \" command lets you analyze and validate your training and\\ndevelopment data, get useful stats, and find problems like invalid entity\\nannotations, cyclic dependencies, low data labels and more. If you‚Äôre training a\\nmodel with \", _jsx(InlineCode, {\n          children: \"spacy train\"\n        }), \" and the results seem surprising or confusing,\\n\", _jsx(InlineCode, {\n          children: \"debug-data\"\n        }), \" may help you track down the problems and improve your training\\ndata.\"]\n      }), _jsx(Accordion, {\n        title: \"Example output\",\n        children: _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            lang: \"none\",\n            children: \"=========================== Data format validation ===========================\\n‚úî Corpus is loadable\\n\\n=============================== Training stats ===============================\\nTraining pipeline: tagger, parser, ner\\nStarting with blank model 'en'\\n18127 training docs\\n2939 evaluation docs\\n‚ö† 34 training examples also in evaluation data\\n\\n============================== Vocab \u0026 Vectors ==============================\\n‚Ñπ 2083156 total words in the data (56962 unique)\\n‚ö† 13020 misaligned tokens in the training data\\n‚ö† 2423 misaligned tokens in the dev data\\n10 most common words: 'the' (98429), ',' (91756), '.' (87073), 'to' (50058),\\n'of' (49559), 'and' (44416), 'a' (34010), 'in' (31424), 'that' (22792), 'is'\\n(18952)\\n‚Ñπ No word vectors present in the model\\n\\n========================== Named Entity Recognition ==========================\\n‚Ñπ 18 new labels, 0 existing labels\\n528978 missing values (tokens with '-' label)\\nNew: 'ORG' (23860), 'PERSON' (21395), 'GPE' (21193), 'DATE' (18080), 'CARDINAL'\\n(10490), 'NORP' (9033), 'MONEY' (5164), 'PERCENT' (3761), 'ORDINAL' (2122),\\n'LOC' (2113), 'TIME' (1616), 'WORK_OF_ART' (1229), 'QUANTITY' (1150), 'FAC'\\n(1134), 'EVENT' (974), 'PRODUCT' (935), 'LAW' (444), 'LANGUAGE' (338)\\n‚úî Good amount of examples for all labels\\n‚úî Examples without occurences available for all labels\\n‚úî No entities consisting of or starting/ending with whitespace\\n\\n=========================== Part-of-speech Tagging ===========================\\n‚Ñπ 49 labels in data (57 labels in tag map)\\n'NN' (266331), 'IN' (227365), 'DT' (185600), 'NNP' (164404), 'JJ' (119830),\\n'NNS' (110957), '.' (101482), ',' (92476), 'RB' (90090), 'PRP' (90081), 'VB'\\n(74538), 'VBD' (68199), 'CC' (62862), 'VBZ' (50712), 'VBP' (43420), 'VBN'\\n(42193), 'CD' (40326), 'VBG' (34764), 'TO' (31085), 'MD' (25863), 'PRP$'\\n(23335), 'HYPH' (13833), 'POS' (13427), 'UH' (13322), 'WP' (10423), 'WDT'\\n(9850), 'RP' (8230), 'WRB' (8201), ':' (8168), '''' (7392), '``' (6984), 'NNPS'\\n(5817), 'JJR' (5689), '$' (3710), 'EX' (3465), 'JJS' (3118), 'RBR' (2872),\\n'-RRB-' (2825), '-LRB-' (2788), 'PDT' (2078), 'XX' (1316), 'RBS' (1142), 'FW'\\n(794), 'NFP' (557), 'SYM' (440), 'WP$' (294), 'LS' (293), 'ADD' (191), 'AFX'\\n(24)\\n‚úî All labels present in tag map for language 'en'\\n\\n============================= Dependency Parsing =============================\\n‚Ñπ Found 111703 sentences with an average length of 18.6 words.\\n‚Ñπ Found 2251 nonprojective train sentences\\n‚Ñπ Found 303 nonprojective dev sentences\\n‚Ñπ 47 labels in train data\\n‚Ñπ 211 labels in projectivized train data\\n'punct' (236796), 'prep' (188853), 'pobj' (182533), 'det' (172674), 'nsubj'\\n(169481), 'compound' (116142), 'ROOT' (111697), 'amod' (107945), 'dobj' (93540),\\n'aux' (86802), 'advmod' (86197), 'cc' (62679), 'conj' (59575), 'poss' (36449),\\n'ccomp' (36343), 'advcl' (29017), 'mark' (27990), 'nummod' (24582), 'relcl'\\n(21359), 'xcomp' (21081), 'attr' (18347), 'npadvmod' (17740), 'acomp' (17204),\\n'auxpass' (15639), 'appos' (15368), 'neg' (15266), 'nsubjpass' (13922), 'case'\\n(13408), 'acl' (12574), 'pcomp' (10340), 'nmod' (9736), 'intj' (9285), 'prt'\\n(8196), 'quantmod' (7403), 'dep' (4300), 'dative' (4091), 'agent' (3908), 'expl'\\n(3456), 'parataxis' (3099), 'oprd' (2326), 'predet' (1946), 'csubj' (1494),\\n'subtok' (1147), 'preconj' (692), 'meta' (469), 'csubjpass' (64), 'iobj' (1)\\n‚ö† Low number of examples for label 'iobj' (1)\\n‚ö† Low number of examples for 130 labels in the projectivized dependency\\ntrees used for training. You may want to projectivize labels such as punct\\nbefore training in order to improve parser performance.\\n‚ö† Projectivized labels with low numbers of examples: appos||attr: 12\\nadvmod||dobj: 13 prep||ccomp: 12 nsubjpass||ccomp: 15 pcomp||prep: 14\\namod||dobj: 9 attr||xcomp: 14 nmod||nsubj: 17 prep||advcl: 2 prep||prep: 5\\nnsubj||conj: 12 advcl||advmod: 18 ccomp||advmod: 11 ccomp||pcomp: 5 acl||pobj:\\n10 npadvmod||acomp: 7 dobj||pcomp: 14 nsubjpass||pcomp: 1 nmod||pobj: 8\\namod||attr: 6 nmod||dobj: 12 aux||conj: 1 neg||conj: 1 dative||xcomp: 11\\npobj||dative: 3 xcomp||acomp: 19 advcl||pobj: 2 nsubj||advcl: 2 csubj||ccomp: 1\\nadvcl||acl: 1 relcl||nmod: 2 dobj||advcl: 10 advmod||advcl: 3 nmod||nsubjpass: 6\\namod||pobj: 5 cc||neg: 1 attr||ccomp: 16 advcl||xcomp: 3 nmod||attr: 4\\nadvcl||nsubjpass: 5 advcl||ccomp: 4 ccomp||conj: 1 punct||acl: 1 meta||acl: 1\\nparataxis||acl: 1 prep||acl: 1 amod||nsubj: 7 ccomp||ccomp: 3 acomp||xcomp: 5\\ndobj||acl: 5 prep||oprd: 6 advmod||acl: 2 dative||advcl: 1 pobj||agent: 5\\nxcomp||amod: 1 dep||advcl: 1 prep||amod: 8 relcl||compound: 1 advcl||csubj: 3\\nnpadvmod||conj: 2 npadvmod||xcomp: 4 advmod||nsubj: 3 ccomp||amod: 7\\nadvcl||conj: 1 nmod||conj: 2 advmod||nsubjpass: 2 dep||xcomp: 2 appos||ccomp: 1\\nadvmod||dep: 1 advmod||advmod: 5 aux||xcomp: 8 dep||advmod: 1 dative||ccomp: 2\\nprep||dep: 1 conj||conj: 1 dep||ccomp: 4 cc||ROOT: 1 prep||ROOT: 1 nsubj||pcomp:\\n3 advmod||prep: 2 relcl||dative: 1 acl||conj: 1 advcl||attr: 4 prep||npadvmod: 1\\nnsubjpass||xcomp: 1 neg||advmod: 1 xcomp||oprd: 1 advcl||advcl: 1 dobj||dep: 3\\nnsubjpass||parataxis: 1 attr||pcomp: 1 ccomp||parataxis: 1 advmod||attr: 1\\nnmod||oprd: 1 appos||nmod: 2 advmod||relcl: 1 appos||npadvmod: 1 appos||conj: 1\\nprep||expl: 1 nsubjpass||conj: 1 punct||pobj: 1 cc||pobj: 1 conj||pobj: 1\\npunct||conj: 1 ccomp||dep: 1 oprd||xcomp: 3 ccomp||xcomp: 1 ccomp||nsubj: 1\\nnmod||dep: 1 xcomp||ccomp: 1 acomp||advcl: 1 intj||advmod: 1 advmod||acomp: 2\\nrelcl||oprd: 1 advmod||prt: 1 advmod||pobj: 1 appos||nummod: 1 relcl||npadvmod:\\n3 mark||advcl: 1 aux||ccomp: 1 amod||nsubjpass: 1 npadvmod||advmod: 1 conj||dep:\\n1 nummod||pobj: 1 amod||npadvmod: 1 intj||pobj: 1 nummod||npadvmod: 1\\nxcomp||xcomp: 1 aux||dep: 1 advcl||relcl: 1\\n‚ö† The following labels were found only in the train data: xcomp||amod,\\nadvcl||relcl, prep||nsubjpass, acl||nsubj, nsubjpass||conj, xcomp||oprd,\\nadvmod||conj, advmod||advmod, iobj, advmod||nsubjpass, dobj||conj, ccomp||amod,\\nmeta||acl, xcomp||xcomp, prep||attr, prep||ccomp, advcl||acomp, acl||dobj,\\nadvcl||advcl, pobj||agent, prep||advcl, nsubjpass||xcomp, prep||dep,\\nacomp||xcomp, aux||ccomp, ccomp||dep, conj||dep, relcl||compound,\\nnsubjpass||ccomp, nmod||dobj, advmod||advcl, advmod||acl, dobj||advcl,\\ndative||xcomp, prep||nsubj, ccomp||ccomp, nsubj||ccomp, xcomp||acomp,\\nprep||acomp, dep||advmod, acl||pobj, appos||dobj, npadvmod||acomp, cc||ROOT,\\nrelcl||nsubj, nmod||pobj, acl||nsubjpass, ccomp||advmod, pcomp||prep,\\namod||dobj, advmod||attr, advcl||csubj, appos||attr, dobj||pcomp, prep||ROOT,\\nrelcl||pobj, advmod||pobj, amod||nsubj, ccomp||xcomp, prep||oprd,\\nnpadvmod||advmod, appos||nummod, advcl||pobj, neg||advmod, acl||attr,\\nappos||nsubjpass, csubj||ccomp, amod||nsubjpass, intj||pobj, dep||advcl,\\ncc||neg, xcomp||ccomp, dative||ccomp, nmod||oprd, pobj||dative, prep||dobj,\\ndep||ccomp, relcl||attr, ccomp||nsubj, advcl||xcomp, nmod||dep, advcl||advmod,\\nccomp||conj, pobj||prep, advmod||acomp, advmod||relcl, attr||pcomp,\\nccomp||parataxis, oprd||xcomp, intj||advmod, nmod||nsubjpass, prep||npadvmod,\\nparataxis||acl, prep||pobj, advcl||dobj, amod||pobj, prep||acl, conj||pobj,\\nadvmod||dep, punct||pobj, ccomp||acomp, acomp||advcl, nummod||npadvmod,\\ndobj||dep, npadvmod||xcomp, advcl||conj, relcl||npadvmod, punct||acl,\\nrelcl||dobj, dobj||xcomp, nsubjpass||parataxis, dative||advcl, relcl||nmod,\\nadvcl||ccomp, appos||npadvmod, ccomp||pcomp, prep||amod, mark||advcl,\\nprep||advmod, prep||xcomp, appos||nsubj, attr||ccomp, advmod||prt, dobj||ccomp,\\naux||conj, advcl||nsubj, conj||conj, advmod||ccomp, advcl||nsubjpass,\\nattr||xcomp, nmod||conj, npadvmod||conj, relcl||dative, prep||expl,\\nnsubjpass||pcomp, advmod||xcomp, advmod||dobj, appos||pobj, nsubj||conj,\\nrelcl||nsubjpass, advcl||attr, appos||ccomp, advmod||prep, prep||conj,\\nnmod||attr, punct||conj, neg||conj, dep||xcomp, aux||xcomp, dobj||acl,\\nnummod||pobj, amod||npadvmod, nsubj||pcomp, advcl||acl, appos||nmod,\\nrelcl||oprd, prep||prep, cc||pobj, nmod||nsubj, amod||attr, aux||dep,\\nappos||conj, advmod||nsubj, nsubj||advcl, acl||conj\\nTo train a parser, your data should include at least 20 instances of each label.\\n‚ö† Multiple root labels (ROOT, nsubj, aux, npadvmod, prep) found in\\ntraining data. spaCy's parser uses a single root label ROOT so this distinction\\nwill not be available.\\n\\n================================== Summary ==================================\\n‚úî 5 checks passed\\n‚ö† 8 warnings\\n\"\n          })\n        })\n      }), _jsx(Infobox, {\n        children: _jsxs(_components.p, {\n          children: [_jsx(_components.strong, {\n            children: \"API:\"\n          }), \" \", _jsx(_components.a, {\n            href: \"/api/cli#debug-data\",\n            children: _jsx(InlineCode, {\n              children: \"spacy debug-data\"\n            })\n          })]\n        })\n      })]\n    }), \"\\n\", _jsxs(_components.section, {\n      id: \"section-incompat\",\n      children: [_jsx(_components.h2, {\n        id: \"incompat\",\n        children: \"Backwards incompatibilities \"\n      }), _jsx(Infobox, {\n        title: \"Important note on models\",\n        variant: \"warning\",\n        children: _jsxs(_components.p, {\n          children: [\"If you‚Äôve been training \", _jsx(_components.strong, {\n            children: \"your own models\"\n          }), \", you‚Äôll need to \", _jsx(_components.strong, {\n            children: \"retrain\"\n          }), \" them\\nwith the new version. Also don‚Äôt forget to upgrade all models to the latest\\nversions. Models for v2.0 or v2.1 aren‚Äôt compatible with models for v2.2. To\\ncheck if all of your models are up to date, you can run the\\n\", _jsx(_components.a, {\n            href: \"/api/cli#validate\",\n            children: _jsx(InlineCode, {\n              children: \"spacy validate\"\n            })\n          }), \" command.\"]\n        })\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Install with lookups data\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-bash\",\n            lang: \"bash\",\n            children: \"$ pip install spacy[lookups]\\n\"\n          })\n        }), \"\\n\", _jsxs(_components.p, {\n          children: [\"You can also install\\n\", _jsx(_components.a, {\n            href: \"https://github.com/explosion/spacy-lookups-data\",\n            children: _jsx(InlineCode, {\n              children: \"spacy-lookups-data\"\n            })\n          }), \"\\ndirectly.\"]\n        }), \"\\n\"]\n      }), _jsxs(_components.ul, {\n        children: [\"\\n\", _jsxs(_components.li, {\n          children: [\"The lemmatization tables have been moved to their own package,\\n\", _jsx(_components.a, {\n            href: \"https://github.com/explosion/spacy-lookups-data\",\n            children: _jsx(InlineCode, {\n              children: \"spacy-lookups-data\"\n            })\n          }), \", which\\nis not installed by default. If you‚Äôre using pretrained models, \", _jsx(_components.strong, {\n            children: \"nothing\\nchanges\"\n          }), \", because the tables are now included in the model packages. If you\\nwant to use the lemmatizer for other languages that don‚Äôt yet have pretrained\\nmodels (e.g. Turkish or Croatian) or start off with a blank model that\\ncontains lookup data (e.g. \", _jsx(InlineCode, {\n            children: \"spacy.blank(\\\"en\\\")\"\n          }), \"), you‚Äôll need to \", _jsx(_components.strong, {\n            children: \"explicitly\\ninstall spaCy plus data\"\n          }), \" via \", _jsx(InlineCode, {\n            children: \"pip install spacy[lookups]\"\n          }), \".\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"Lemmatization tables (rules, exceptions, index and lookups) are now part of\\nthe \", _jsx(InlineCode, {\n            children: \"Vocab\"\n          }), \" and serialized with it. This means that serialized objects (\", _jsx(InlineCode, {\n            children: \"nlp\"\n          }), \",\\npipeline components, vocab) will now include additional data, and models\\nwritten to disk will include additional files.\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"The \", _jsx(_components.a, {\n            href: \"/api/lemmatizer\",\n            children: _jsx(InlineCode, {\n              children: \"Lemmatizer\"\n            })\n          }), \" class is now initialized with an instance\\nof \", _jsx(_components.a, {\n            href: \"/api/lookups\",\n            children: _jsx(InlineCode, {\n              children: \"Lookups\"\n            })\n          }), \" containing the rules and tables, instead of dicts\\nas separate arguments. This makes it easier to share data tables and modify\\nthem at runtime. This is mostly internals, but if you‚Äôve been implementing a\\ncustom \", _jsx(InlineCode, {\n            children: \"Lemmatizer\"\n          }), \", you‚Äôll need to update your code.\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"The \", _jsx(_components.a, {\n            href: \"/models/nl\",\n            children: \"Dutch model\"\n          }), \" has been trained on a new NER corpus (custom\\nlabelled UD instead of WikiNER), so their predictions may be very different\\ncompared to the previous version. The results should be significantly better\\nand more generalizable, though.\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"The \", _jsx(_components.a, {\n            href: \"/api/cli#download\",\n            children: _jsx(InlineCode, {\n              children: \"spacy download\"\n            })\n          }), \" command does \", _jsx(_components.strong, {\n            children: \"not\"\n          }), \" set the\\n\", _jsx(InlineCode, {\n            children: \"--no-deps\"\n          }), \" pip argument anymore by default, meaning that model package\\ndependencies (if available) will now be also downloaded and installed. If\\nspaCy (which is also a model dependency) is not installed in the current\\nenvironment, e.g. if a user has built from source, \", _jsx(InlineCode, {\n            children: \"--no-deps\"\n          }), \" is added back\\nautomatically to prevent spaCy from being downloaded and installed again from\\npip.\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"The built-in\\n\", _jsx(_components.a, {\n            href: \"/api/top-level#biluo_tags_from_offsets\",\n            children: _jsx(InlineCode, {\n              children: \"biluo_tags_from_offsets\"\n            })\n          }), \" converter\\nis now stricter and will raise an error if entities are overlapping (instead\\nof silently skipping them). If your data contains invalid entity annotations,\\nmake sure to clean it and resolve conflicts. You can now also use the new\\n\", _jsx(InlineCode, {\n            children: \"debug-data\"\n          }), \" command to find problems in your data.\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"Pipeline components can now overwrite IOB tags of tokens that are not yet part\\nof an entity. Once a token has an \", _jsx(InlineCode, {\n            children: \"ent_iob\"\n          }), \" value set, it won‚Äôt be reset to an\\n‚Äúunset‚Äù state and will always have at least \", _jsx(InlineCode, {\n            children: \"O\"\n          }), \" assigned. \", _jsx(InlineCode, {\n            children: \"list(doc.ents)\"\n          }), \" now\\nactually keeps the annotations on the token level consistent, instead of\\nresetting \", _jsx(InlineCode, {\n            children: \"O\"\n          }), \" to an empty string.\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"The default punctuation in the \", _jsx(_components.a, {\n            href: \"/api/sentencizer\",\n            children: _jsx(InlineCode, {\n              children: \"Sentencizer\"\n            })\n          }), \" has been\\nextended and now includes more characters common in various languages. This\\nalso means that the results it produces may change, depending on your text. If\\nyou want the previous behavior with limited characters, set\\n\", _jsx(InlineCode, {\n            children: \"punct_chars=[\\\".\\\", \\\"!\\\", \\\"?\\\"]\"\n          }), \" on initialization.\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"The \", _jsx(_components.a, {\n            href: \"/api/phrasematcher\",\n            children: _jsx(InlineCode, {\n              children: \"PhraseMatcher\"\n            })\n          }), \" algorithm was rewritten from scratch\\nand it‚Äôs now 10√ó faster. The rewrite also resolved a few subtle bugs\\nwith very large terminology lists. So if you were matching large lists, you\\nmay see slightly different results ‚Äì however, the results should now be fully\\ncorrect. See \", _jsx(_components.a, {\n            href: \"https://github.com/explosion/spaCy/pull/4309\",\n            children: \"this PR\"\n          }), \" for more\\ndetails.\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"The \", _jsx(InlineCode, {\n            children: \"Serbian\"\n          }), \" language class (introduced in v2.1.8) incorrectly used the\\nlanguage code \", _jsx(InlineCode, {\n            children: \"rs\"\n          }), \" instead of \", _jsx(InlineCode, {\n            children: \"sr\"\n          }), \". This has now been fixed, so \", _jsx(InlineCode, {\n            children: \"Serbian\"\n          }), \" is\\nnow available via \", _jsx(InlineCode, {\n            children: \"spacy.lang.sr\"\n          }), \".\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"The \", _jsx(InlineCode, {\n            children: \"\\\"sources\\\"\"\n          }), \" in the \", _jsx(InlineCode, {\n            children: \"meta.json\"\n          }), \" have changed from a list of strings to a\\nlist of dicts. This is mostly internals, but if your code used\\n\", _jsx(InlineCode, {\n            children: \"nlp.meta[\\\"sources\\\"]\"\n          }), \", you might have to update it.\"]\n        }), \"\\n\"]\n      }), _jsx(_components.h3, {\n        id: \"migrating\",\n        children: \"Migrating from spaCy 2.1 \"\n      }), _jsx(_components.h4, {\n        children: \"Lemmatization data and lookup tables\"\n      }), _jsxs(_components.p, {\n        children: [\"If you application needs lemmatization for \", _jsx(_components.a, {\n          href: \"/usage/models#languages\",\n          children: \"languages\"\n        }), \"\\nwith only tokenizers, you now need to install that data explicitly via\\n\", _jsx(InlineCode, {\n          children: \"pip install spacy[lookups]\"\n        }), \" or \", _jsx(InlineCode, {\n          children: \"pip install spacy-lookups-data\"\n        }), \". No additional\\nsetup is required ‚Äì the package just needs to be installed in the same\\nenvironment as spaCy.\"]\n      }), _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-python\",\n          lang: \"python\",\n          highlight: \"3-4\",\n          children: \"nlp = Turkish()\\ndoc = nlp(\\\"Bu bir c√ºmledir.\\\")\\n# üö® This now requires the lookups data to be installed explicitly\\nprint([token.lemma_ for token in doc])\\n\"\n        })\n      }), _jsxs(_components.p, {\n        children: [\"The same applies to blank models that you want to update and train ‚Äì for\\ninstance, you might use \", _jsx(_components.a, {\n          href: \"/api/top-level#spacy.blank\",\n          children: _jsx(InlineCode, {\n            children: \"spacy.blank\"\n          })\n        }), \" to create a\\nblank English model and then train your own part-of-speech tagger on top. If you\\ndon‚Äôt explicitly install the lookups data, that \", _jsx(InlineCode, {\n          children: \"nlp\"\n        }), \" object won‚Äôt have any\\nlemmatization rules available. spaCy will now show you a warning when you train\\na new part-of-speech tagger and the vocab has no lookups available.\"]\n      }), _jsx(_components.h4, {\n        children: \"Lemmatizer initialization\"\n      }), _jsxs(_components.p, {\n        children: [\"This is mainly internals and should hopefully not affect your code. But if\\nyou‚Äôve been creating custom \", _jsx(_components.a, {\n          href: \"/api/lemmatizer\",\n          children: _jsx(InlineCode, {\n            children: \"Lemmatizers\"\n          })\n        }), \", you‚Äôll need to\\nupdate how they‚Äôre initialized and pass in an instance of\\n\", _jsx(_components.a, {\n          href: \"/api/lookups\",\n          children: _jsx(InlineCode, {\n            children: \"Lookups\"\n          })\n        }), \" with the (optional) tables \", _jsx(InlineCode, {\n          children: \"lemma_index\"\n        }), \", \", _jsx(InlineCode, {\n          children: \"lemma_exc\"\n        }), \",\\n\", _jsx(InlineCode, {\n          children: \"lemma_rules\"\n        }), \" and \", _jsx(InlineCode, {\n          children: \"lemma_lookup\"\n        }), \".\"]\n      }), _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-diff\",\n          lang: \"diff\",\n          children: \"from spacy.lemmatizer import Lemmatizer\\n+ from spacy.lookups import Lookups\\n\\nlemma_index = {\\\"verb\\\": (\\\"cope\\\", \\\"cop\\\")}\\nlemma_exc = {\\\"verb\\\": {\\\"coping\\\": (\\\"cope\\\",)}}\\nlemma_rules = {\\\"verb\\\": [[\\\"ing\\\", \\\"\\\"]]}\\n- lemmatizer = Lemmatizer(lemma_index, lemma_exc, lemma_rules)\\n+ lookups = Lookups()\\n+ lookups.add_table(\\\"lemma_index\\\", lemma_index)\\n+ lookups.add_table(\\\"lemma_exc\\\", lemma_exc)\\n+ lookups.add_table(\\\"lemma_rules\\\", lemma_rules)\\n+ lemmatizer = Lemmatizer(lookups)\\n\"\n        })\n      }), _jsx(_components.h4, {\n        children: \"Converting entity offsets to BILUO tags\"\n      }), _jsxs(_components.p, {\n        children: [\"If you‚Äôve been using the\\n\", _jsx(_components.a, {\n          href: \"/api/top-level#biluo_tags_from_offsets\",\n          children: _jsx(InlineCode, {\n            children: \"biluo_tags_from_offsets\"\n          })\n        }), \" helper to\\nconvert character offsets into token-based BILUO tags, you may now see an error\\nif the offsets contain overlapping tokens and make it impossible to create a\\nvalid BILUO sequence. This is helpful, because it lets you spot potential\\nproblems in your data that can lead to inconsistent results later on. But it\\nalso means that you need to adjust and clean up the offsets before converting\\nthem:\"]\n      }), _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-diff\",\n          lang: \"diff\",\n          children: \"doc = nlp(\\\"I live in Berlin Kreuzberg\\\")\\n- entities = [(10, 26, \\\"LOC\\\"), (10, 16, \\\"GPE\\\"), (17, 26, \\\"LOC\\\")]\\n+ entities = [(10, 16, \\\"GPE\\\"), (17, 26, \\\"LOC\\\")]\\ntags = get_biluo_tags_from_offsets(doc, entities)\\n\"\n        })\n      }), _jsx(_components.h4, {\n        children: \"Serbian language data\"\n      }), _jsxs(_components.p, {\n        children: [\"If you‚Äôve been working with \", _jsx(InlineCode, {\n          children: \"Serbian\"\n        }), \" (introduced in v2.1.8), you‚Äôll need to\\nchange the language code from \", _jsx(InlineCode, {\n          children: \"rs\"\n        }), \" to the correct \", _jsx(InlineCode, {\n          children: \"sr\"\n        }), \":\"]\n      }), _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-diff\",\n          lang: \"diff\",\n          children: \"- from spacy.lang.rs import Serbian\\n+ from spacy.lang.sr import Serbian\\n\"\n        })\n      })]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{"title":"What's New in v2.2","teaser":"New features, backwards incompatibilities and migration guide","menu":[["New Features","features"],["Backwards Incompatibilities","incompat"],["Migrating from v2.1","migrating"]]},"scope":{}},"sectionTitle":"Usage Documentation","theme":"blue","section":"usage","apiDetails":{"stringName":null,"baseClass":null,"trainable":null},"isIndex":false,"next":null},"__N_SSG":true},"page":"/[...listPathPage]","query":{"listPathPage":["usage","v2-2"]},"buildId":"Ugre-usgT1EZhnSeYcBR9","isFallback":false,"dynamicIds":[728],"gsp":true,"scriptLoader":[]}</script></body></html>