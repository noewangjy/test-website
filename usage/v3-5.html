<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="shortcut icon" href="/icons/icon-192x192.png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1, maximum-scale=5.0, shrink-to-fit=no, viewport-fit=cover"/><meta name="theme-color" content="#09a3d5"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png"/><title>What&#x27;s New in v3.5 Â· spaCy Usage Documentation</title><meta name="description" content="New features and how to upgrade"/><meta property="og:title" content="What&#x27;s New in v3.5 Â· spaCy Usage Documentation"/><meta property="og:description" content="New features and how to upgrade"/><meta property="og:type" content="website"/><meta property="og:site_name" content="What&#x27;s New in v3.5"/><meta property="og:image" content="https://noewangjy.github.io/test-website//_next/static/media/social_default.96b04585.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:image" content="https://noewangjy.github.io/test-website//_next/static/media/social_default.96b04585.jpg"/><meta name="twitter:creator" content="@spacy_io"/><meta name="twitter:site" content="@spacy_io"/><meta name="twitter:title" content="What&#x27;s New in v3.5 Â· spaCy Usage Documentation"/><meta name="twitter:description" content="New features and how to upgrade"/><meta name="docsearch:language" content="en"/><meta name="next-head-count" content="24"/><link rel="preload" href="/_next/static/css/8f0b94edbc18d62d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8f0b94edbc18d62d.css" data-n-g=""/><link rel="preload" href="/_next/static/css/e6995e0e8addcf99.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e6995e0e8addcf99.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script defer="" src="/_next/static/chunks/262.c647d33d06232ef6.js"></script><script defer="" src="/_next/static/chunks/728.cf6ba0da2700fa1b.js"></script><script src="/_next/static/chunks/webpack-8161fc2bb14cec39.js" defer=""></script><script src="/_next/static/chunks/framework-3b5a00d5d7e8d93b.js" defer=""></script><script src="/_next/static/chunks/main-a0f603ce323043fd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-ee1fab0e25bb912e.js" defer=""></script><script src="/_next/static/chunks/94-57434c8b7a6c3878.js" defer=""></script><script src="/_next/static/chunks/128-76b45627a109219b.js" defer=""></script><script src="/_next/static/chunks/pages/%5B...listPathPage%5D-45eea57fe8c2902c.js" defer=""></script><script src="/_next/static/2lY2cUyEfZosk4VLgkHb2/_buildManifest.js" defer=""></script><script src="/_next/static/2lY2cUyEfZosk4VLgkHb2/_ssgManifest.js" defer=""></script></head><body class="theme-blue"><div id="__next"><div class="theme-blue"><nav class="navigation_root__yPL8O"><span class="navigation_has-alert__s0Drf"><a class="link_root__1Me7D link_no-link-layout__RPvod" aria-label="spaCy" href="/"><h1 class="navigation_title__pm49s">spaCy</h1></a> <span class="navigation_alert__ZOXon"><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/usage/v3-5"><strong>ðŸ’¥ Out now:</strong> spaCy v3.5</a></span></span><div class="navigation_menu__ZMJxN"><select class="dropdown_root__3uiQq navigation_dropdown__4j4pI"><option value="title" disabled="">Menu</option><option value="/usage" selected="">Usage</option><option value="/models">Models</option><option value="/api">API</option><option value="/universe">Universe</option></select><ul class="navigation_list__DCzqi"><li class="navigation_item__ln1O1 navigation_is-active__RjVJG"><a class="link_root__1Me7D link_no-link-layout__RPvod" tabindex="-1" href="/usage">Usage</a></li><li class="navigation_item__ln1O1"><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/models">Models</a></li><li class="navigation_item__ln1O1"><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/api">API</a></li><li class="navigation_item__ln1O1"><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/universe">Universe</a></li><li class="navigation_item__ln1O1 navigation_github__MpFNv"><span><a href="https://github.com/explosion/spaCy" data-size="large" data-show-count="true" aria-label="Star spaCy on GitHub"></a></span></li></ul><div class="navigation_search__BKZCn"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><progress class="progress_root__9huWN" value="0" max="100"></progress></nav><menu class="sidebar sidebar_root__s2No7"><h1 hidden="" aria-hidden="true" class="h0 sidebar_active-heading___dkf9">Get started</h1><div class="sidebar_dropdown__vyqjz"><select class="dropdown_root__3uiQq sidebar_dropdown-select__Nwbq9"><option disabled="">Select page...</option><option value="/usage">Get started<!-- --> â€º <!-- -->Installation</option><option value="/usage/models">Get started<!-- --> â€º <!-- -->Models &amp; Languages</option><option value="/usage/facts-figures">Get started<!-- --> â€º <!-- -->Facts &amp; Figures</option><option value="/usage/spacy-101">Get started<!-- --> â€º <!-- -->spaCy 101</option><option value="/usage/v3">Get started<!-- --> â€º <!-- -->New in v3.0</option><option value="/usage/v3-1">Get started<!-- --> â€º <!-- -->New in v3.1</option><option value="/usage/v3-2">Get started<!-- --> â€º <!-- -->New in v3.2</option><option value="/usage/v3-3">Get started<!-- --> â€º <!-- -->New in v3.3</option><option value="/usage/v3-4">Get started<!-- --> â€º <!-- -->New in v3.4</option><option value="/usage/v3-5" selected="">Get started<!-- --> â€º <!-- -->New in v3.5</option><option value="/usage/linguistic-features">Guides<!-- --> â€º <!-- -->Linguistic Features</option><option value="/usage/rule-based-matching">Guides<!-- --> â€º <!-- -->Rule-based Matching</option><option value="/usage/processing-pipelines">Guides<!-- --> â€º <!-- -->Processing Pipelines</option><option value="/usage/embeddings-transformers">Guides<!-- --> â€º <!-- -->Embeddings &amp; Transformers</option><option value="/usage/training">Guides<!-- --> â€º <!-- -->Training Models</option><option value="/usage/layers-architectures">Guides<!-- --> â€º <!-- -->Layers &amp; Model Architectures</option><option value="/usage/projects">Guides<!-- --> â€º <!-- -->spaCy Projects</option><option value="/usage/saving-loading">Guides<!-- --> â€º <!-- -->Saving &amp; Loading</option><option value="/usage/visualizers">Guides<!-- --> â€º <!-- -->Visualizers</option><option value="https://github.com/explosion/projects">Resources<!-- --> â€º <!-- -->Project Templates</option><option value="https://v2.spacy.io">Resources<!-- --> â€º <!-- -->v2.x Documentation</option><option value="https://explosion.ai/custom-solutions">Resources<!-- --> â€º <!-- -->Custom Solutions</option></select></div><ul class="sidebar_section__DArOO"><li class="sidebar_label__V3K28">Get started</li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage">Installation</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/models">Models &amp; Languages</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/facts-figures">Facts &amp; Figures</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/spacy-101">spaCy 101</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/v3">New in v3.0</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/v3-1">New in v3.1</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/v3-2">New in v3.2</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/v3-3">New in v3.3</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/v3-4">New in v3.4</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP sidebar_is-active__yVTtL is-active" href="/usage/v3-5">New in v3.5</a><ul class="sidebar_crumbs__NhM2y"><li class="sidebar_crumb__tiiDl sidebar_crumb-active__zq8BI"><a href="#features">New Features</a></li><li class="sidebar_crumb__tiiDl"><a href="#upgrading">Upgrading Notes</a></li></ul></li></ul><ul class="sidebar_section__DArOO"><li class="sidebar_label__V3K28">Guides</li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/linguistic-features">Linguistic Features</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/rule-based-matching">Rule-based Matching</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/processing-pipelines">Processing Pipelines</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/embeddings-transformers">Embeddings &amp; Transformers<span class="tag_root__NTSnK tag_spaced__Q9amH">new</span></a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/training">Training Models<span class="tag_root__NTSnK tag_spaced__Q9amH">new</span></a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/layers-architectures">Layers &amp; Model Architectures<span class="tag_root__NTSnK tag_spaced__Q9amH">new</span></a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/projects">spaCy Projects<span class="tag_root__NTSnK tag_spaced__Q9amH">new</span></a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/saving-loading">Saving &amp; Loading</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/visualizers">Visualizers</a></li></ul><ul class="sidebar_section__DArOO"><li class="sidebar_label__V3K28">Resources</li><li><a class="link_root__1Me7D sidebar_link__sKXFP" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/projects">Project Templates</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="https://v2.spacy.io">v2.x Documentation</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="https://explosion.ai/custom-solutions">Custom Solutions</a></li></ul></menu><main class="main_root__7f6Tj main_with-sidebar__uH1df main_with-asides__ikQT6"><article class="main_content__8zFCH"><header class="title_root__pS2WQ"><h1 id="_title" class="typography_heading__D82WZ typography_h1__b7dt9 title_h1__l3CW1"><span class="heading-text">What&#x27;s New in v3.5<!-- --> </span></h1><div class="heading-teaser title_teaser__QhwCH">New features and how to upgrade</div></header><section id="section-features" class="section_root__k1hUl"><p>spaCy v3.5 introduces three new CLI commands, <code class="code_inline-code__Bq7ot">apply</code>, <code class="code_inline-code__Bq7ot">benchmark</code> and
<code class="code_inline-code__Bq7ot">find-threshold</code>, adds fuzzy matching, provides improvements to our entity
linking functionality, and includes a range of language updates and bug fixes.</p><h3 id="cli" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#cli" class="heading-text typography_permalink__UiIRy">New CLI commands <!-- --> </a></h3><h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">apply CLI<!-- --> </span></h4><p>The <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/cli#apply"><code class="code_inline-code__Bq7ot">apply</code> CLI</a> can be used to apply a pipeline to one or more
<code class="code_inline-code__Bq7ot">.txt</code>, <code class="code_inline-code__Bq7ot">.jsonl</code> or <code class="code_inline-code__Bq7ot">.spacy</code> input files, saving the annotated docs in a single
<code class="code_inline-code__Bq7ot">.spacy</code> file.</p><pre class="code_pre__kzg60"><code class="code_code__CILJL language-bash language-bash"></code></pre><h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">benchmark CLI<!-- --> </span></h4><p>The <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/cli#benchmark"><code class="code_inline-code__Bq7ot">benchmark</code> CLI</a> has been added to extend the existing
<code class="code_inline-code__Bq7ot">evaluate</code> functionality with a wider range of profiling subcommands.</p><p>The <code class="code_inline-code__Bq7ot">benchmark accuracy</code> CLI is introduced as an alias for <code class="code_inline-code__Bq7ot">evaluate</code>. The new
<code class="code_inline-code__Bq7ot">benchmark speed</code> CLI performs warmup rounds before measuring the speed in words
per second on batches of randomly shuffled documents from the provided data.</p><pre class="code_pre__kzg60"><code class="code_code__CILJL language-bash language-bash"></code></pre><p>The output is the mean performance using batches (<code class="code_inline-code__Bq7ot">nlp.pipe</code>) with a 95%
confidence interval, e.g., profiling <code class="code_inline-code__Bq7ot">en_core_web_sm</code> on CPU:</p><pre class="code_pre__kzg60"><code class="code_code__CILJL language-none language-none"></code></pre><h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">find-threshold CLI<!-- --> </span></h4><p>The <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/cli#find-threshold"><code class="code_inline-code__Bq7ot">find-threshold</code> CLI</a> runs a series of trials
across threshold values from <code class="code_inline-code__Bq7ot">0.0</code> to <code class="code_inline-code__Bq7ot">1.0</code> and identifies the best threshold
for the provided score metric.</p><p>The following command runs 20 trials for the <code class="code_inline-code__Bq7ot">spancat</code> component in
<code class="code_inline-code__Bq7ot">my_pipeline</code>, recording the <code class="code_inline-code__Bq7ot">spans_sc_f</code> score for each value of the threshold
<code class="code_inline-code__Bq7ot code_wrap__b41os">[components.spancat.threshold]</code> from <code class="code_inline-code__Bq7ot">0.0</code> to <code class="code_inline-code__Bq7ot">1.0</code>:</p><pre class="code_pre__kzg60"><code class="code_code__CILJL language-bash language-bash"></code></pre><p>The <code class="code_inline-code__Bq7ot">find-threshold</code> CLI can be used with <code class="code_inline-code__Bq7ot">textcat_multilabel</code>, <code class="code_inline-code__Bq7ot">spancat</code> and
custom components with thresholds that are applied while predicting or scoring.</p><h3 id="fuzzy" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#fuzzy" class="heading-text typography_permalink__UiIRy">Fuzzy matching <!-- --> </a></h3><p>New <code class="code_inline-code__Bq7ot">FUZZY</code> operators support <a class="link_root__1Me7D" href="/usage/rule-based-matching#fuzzy">fuzzy matching</a>
with the <code class="code_inline-code__Bq7ot">Matcher</code>. By default, the <code class="code_inline-code__Bq7ot">FUZZY</code> operator allows a Levenshtein edit
distance of 2 and up to 30% of the pattern string length. <code class="code_inline-code__Bq7ot">FUZZY1</code>..<code class="code_inline-code__Bq7ot">FUZZY9</code> can
be used to specify the exact number of allowed edits.</p><pre class="code_pre__kzg60"><code class="code_code__CILJL language-python language-python"></code></pre><p>Note that <code class="code_inline-code__Bq7ot">FUZZY</code> uses Levenshtein edit distance rather than Damerau-Levenshtein
edit distance, so a transposition like <code class="code_inline-code__Bq7ot">teh</code> for <code class="code_inline-code__Bq7ot">the</code> counts as two edits, one
insertion and one deletion.</p><p>If youâ€™d prefer an alternate fuzzy matching algorithm, you can provide your own
custom method to the <code class="code_inline-code__Bq7ot">Matcher</code> or as a config option for an entity ruler and
span ruler.</p><h3 id="fuzzy-regex-lists" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#fuzzy-regex-lists" class="heading-text typography_permalink__UiIRy">FUZZY and REGEX with lists <!-- --> </a></h3><p>The <code class="code_inline-code__Bq7ot">FUZZY</code> and <code class="code_inline-code__Bq7ot">REGEX</code> operators are also now supported for lists with <code class="code_inline-code__Bq7ot">IN</code> and
<code class="code_inline-code__Bq7ot">NOT_IN</code>:</p><pre class="code_pre__kzg60"><code class="code_code__CILJL language-python language-python"></code></pre><h3 id="el" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#el" class="heading-text typography_permalink__UiIRy">Entity linking generalization <!-- --> </a></h3><p>The knowledge base used for entity linking is now easier to customize and has a
new default implementation <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/inmemorylookupkb"><code class="code_inline-code__Bq7ot">InMemoryLookupKB</code></a>.</p><h3 id="additional-features-and-improvements" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#additional-features-and-improvements" class="heading-text typography_permalink__UiIRy">Additional features and improvements <!-- --> </a></h3><ul class="list_ul__fe_HF">
<li class="list_li__sfx_z">Language updates:<!-- -->
<ul class="list_ul__fe_HF">
<li class="list_li__sfx_z">Extended support for Slovenian</li>
<li class="list_li__sfx_z">Fixed lookup fallback for French and Catalan lemmatizers</li>
<li class="list_li__sfx_z">Switch Russian and Ukrainian lemmatizers to <code class="code_inline-code__Bq7ot">pymorphy3</code></li>
<li class="list_li__sfx_z">Support for editorial punctuation in Ancient Greek</li>
<li class="list_li__sfx_z">Update to Russian tokenizer exceptions</li>
<li class="list_li__sfx_z">Small fix for Dutch stop words</li>
</ul>
</li>
<li class="list_li__sfx_z">Allow up to <code class="code_inline-code__Bq7ot">typer</code> v0.7.x, <code class="code_inline-code__Bq7ot">mypy</code> 0.990 and <code class="code_inline-code__Bq7ot">typing_extensions</code> v4.4.x.</li>
<li class="list_li__sfx_z">New <code class="code_inline-code__Bq7ot">spacy.ConsoleLogger.v3</code> with expanded progress
<a class="link_root__1Me7D link_with-icon__NAVDA" href="/api/top-level#ConsoleLogger"><span class="link_source-text__VDP74">tracking</span></a>.</li>
<li class="list_li__sfx_z">Improved scoring behavior for <code class="code_inline-code__Bq7ot">textcat</code> with <code class="code_inline-code__Bq7ot">spacy.textcat_scorer.v2</code> and
<code class="code_inline-code__Bq7ot code_wrap__b41os">spacy.textcat_multilabel_scorer.v2</code>.</li>
<li class="list_li__sfx_z">Updates so that downstream components can train properly on a frozen <code class="code_inline-code__Bq7ot">tok2vec</code>
or <code class="code_inline-code__Bq7ot">transformer</code> layer.</li>
<li class="list_li__sfx_z">Allow interpolation of variables in directory names in projects.</li>
<li class="list_li__sfx_z">Support for local file system <a class="link_root__1Me7D" href="/usage/projects#remote">remotes</a> for projects.</li>
<li class="list_li__sfx_z">Improve UX around <code class="code_inline-code__Bq7ot">displacy.serve</code> when the default port is in use.</li>
<li class="list_li__sfx_z">Optional <code class="code_inline-code__Bq7ot">before_update</code> callback that is invoked at the start of each
<a class="link_root__1Me7D link_with-icon__NAVDA" href="/api/data-formats#config-training"><span class="link_source-text__VDP74">training step</span></a>.</li>
<li class="list_li__sfx_z">Improve performance of <code class="code_inline-code__Bq7ot">SpanGroup</code> and fix typing issues for <code class="code_inline-code__Bq7ot">SpanGroup</code> and
<code class="code_inline-code__Bq7ot">Span</code> objects.</li>
<li class="list_li__sfx_z">Patch a
<a class="link_root__1Me7D link_with-icon__NAVDA" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/advisories/GHSA-gw9q-c7gh-j9vm"><span class="link_source-text__VDP74">security vulnerability</span></a> in
extracting tar files.</li>
<li class="list_li__sfx_z">Add equality definition for <code class="code_inline-code__Bq7ot">Vectors</code>.</li>
<li class="list_li__sfx_z">Ensure <code class="code_inline-code__Bq7ot">Vocab.to_disk</code> respects the exclude setting for <code class="code_inline-code__Bq7ot">lookups</code> and
<code class="code_inline-code__Bq7ot">vectors</code>.</li>
<li class="list_li__sfx_z">Correctly handle missing annotations in the edit tree lemmatizer.</li>
</ul><h3 id="pipelines" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#pipelines" class="heading-text typography_permalink__UiIRy">Trained pipeline updates <!-- --> </a></h3><ul class="list_ul__fe_HF">
<li class="list_li__sfx_z">The CNN pipelines add <code class="code_inline-code__Bq7ot">IS_SPACE</code> as a <code class="code_inline-code__Bq7ot">tok2vec</code> feature for <code class="code_inline-code__Bq7ot">tagger</code> and
<code class="code_inline-code__Bq7ot">morphologizer</code> components to improve tagging of non-whitespace vs. whitespace
tokens.</li>
<li class="list_li__sfx_z">The transformer pipelines require <code class="code_inline-code__Bq7ot">spacy-transformers</code> v1.2, which uses the
exact alignment from <code class="code_inline-code__Bq7ot">tokenizers</code> for fast tokenizers instead of the heuristic
alignment from <code class="code_inline-code__Bq7ot">spacy-alignments</code>. For all trained pipelines except
<code class="code_inline-code__Bq7ot">ja_core_news_trf</code>, the alignments between spaCy tokens and transformer tokens
may be slightly different. More details about the <code class="code_inline-code__Bq7ot">spacy-transformers</code> changes
in the
<a class="link_root__1Me7D link_with-icon__NAVDA" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spacy-transformers/releases/tag/v1.2.0"><span class="link_source-text__VDP74">v1.2.0 release notes</span></a>.</li>
</ul></section>
<section id="section-upgrading" class="section_root__k1hUl"><h2 id="upgrading" class="typography_heading__D82WZ typography_h2__hzV3h"><a href="#upgrading" class="heading-text typography_permalink__UiIRy">Notes about upgrading from v3.4 <!-- --> </a></h2><h3 id="textcat-validation" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#textcat-validation" class="heading-text typography_permalink__UiIRy">Validation of textcat values <!-- --> </a></h3><p>An error is now raised when unsupported values are given as input to train a
<code class="code_inline-code__Bq7ot">textcat</code> or <code class="code_inline-code__Bq7ot">textcat_multilabel</code> model - ensure that values are <code class="code_inline-code__Bq7ot">0.0</code> or <code class="code_inline-code__Bq7ot">1.0</code>
as explained in the <a class="link_root__1Me7D link_with-icon__NAVDA" href="/api/textcategorizer#assigned-attributes"><span class="link_source-text__VDP74">docs</span></a>.</p><h3 class="typography_heading__D82WZ typography_h3__mPKmB"><span class="heading-text">Using the default knowledge base<!-- --> </span></h3><p>As <code class="code_inline-code__Bq7ot">KnowledgeBase</code> is now an abstract class, you should call the constructor of
the new <code class="code_inline-code__Bq7ot">InMemoryLookupKB</code> instead when you want to use spaCyâ€™s default KB
implementation:</p><pre class="code_pre__kzg60"><code class="code_code__CILJL language-diff language-diff"></code></pre><p>If youâ€™ve written a custom KB that inherits from <code class="code_inline-code__Bq7ot">KnowledgeBase</code>, youâ€™ll need to
implement its abstract methods, or alternatively inherit from <code class="code_inline-code__Bq7ot">InMemoryLookupKB</code>
instead.</p><h3 id="scores" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#scores" class="heading-text typography_permalink__UiIRy">Updated scorers for tokenization and textcat <!-- --> </a></h3><p>We fixed a bug that inflated the <code class="code_inline-code__Bq7ot">token_acc</code> scores in v3.0-v3.4. The reported
<code class="code_inline-code__Bq7ot">token_acc</code> will drop from v3.4 to v3.5, but if <code class="code_inline-code__Bq7ot">token_p/r/f</code> stay the same,
your tokenization performance has not changed from v3.4.</p><p>For new <code class="code_inline-code__Bq7ot">textcat</code> or <code class="code_inline-code__Bq7ot">textcat_multilabel</code> configs, the new default <code class="code_inline-code__Bq7ot">v2</code> scorers:</p><ul class="list_ul__fe_HF">
<li class="list_li__sfx_z">ignore <code class="code_inline-code__Bq7ot">threshold</code> for <code class="code_inline-code__Bq7ot">textcat</code>, so the reported <code class="code_inline-code__Bq7ot">cats_p/r/f</code> may increase
slightly in v3.5 even though the underlying predictions are unchanged</li>
<li class="list_li__sfx_z">report the performance of only the <strong>final</strong> <code class="code_inline-code__Bq7ot">textcat</code> or <code class="code_inline-code__Bq7ot">textcat_multilabel</code>
component in the pipeline by default</li>
<li class="list_li__sfx_z">allow custom scorers to be used to score multiple <code class="code_inline-code__Bq7ot">textcat</code> and
<code class="code_inline-code__Bq7ot">textcat_multilabel</code> components with <code class="code_inline-code__Bq7ot">Scorer.score_cats</code> by restricting the
evaluation to the componentâ€™s provided labels</li>
</ul><h3 id="version-compat" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#version-compat" class="heading-text typography_permalink__UiIRy">Pipeline package version compatibility <!-- --> </a></h3><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Using legacy implementations<!-- --> </span></h4>
<p>In spaCy v3, youâ€™ll still be able to load and reference legacy implementations
via <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spacy-legacy"><code class="code_inline-code__Bq7ot">spacy-legacy</code></a>, even if the
components or architectures change and newer versions are available in the
core library.</p>
</div></div></aside><p>When youâ€™re loading a pipeline package trained with an earlier version of spaCy
v3, you will see a warning telling you that the pipeline may be incompatible.
This doesnâ€™t necessarily have to be true, but we recommend running your
pipelines against your test suite or evaluation data to make sure there are no
unexpected results.</p><p>If youâ€™re using one of the <a class="link_root__1Me7D" href="/models">trained pipelines</a> we provide, you should
run <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/cli#download"><code class="code_inline-code__Bq7ot">spacy download</code></a> to update to the latest version. To
see an overview of all installed packages and their compatibility, you can run
<a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/cli#validate"><code class="code_inline-code__Bq7ot">spacy validate</code></a>.</p><p>If youâ€™ve trained your own custom pipeline and youâ€™ve confirmed that itâ€™s still
working as expected, you can update the spaCy version requirements in the
<a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/data-formats#meta"><code class="code_inline-code__Bq7ot">meta.json</code></a>:</p><pre class="code_pre__kzg60"><code class="code_code__CILJL language-diff language-diff"></code></pre><h3 class="typography_heading__D82WZ typography_h3__mPKmB"><span class="heading-text">Updating v3.4 configs<!-- --> </span></h3><p>To update a config from spaCy v3.4 with the new v3.5 settings, run
<a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/cli#init-fill-config"><code class="code_inline-code__Bq7ot">init fill-config</code></a>:</p><pre class="code_pre__kzg60"><code class="code_code__CILJL language-cli language-cli code_wrap__b41os code_cli__pw0uE"></code></pre><p>In many cases (<a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/cli#train"><code class="code_inline-code__Bq7ot">spacy train</code></a>,
<a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/top-level#spacy.load"><code class="code_inline-code__Bq7ot">spacy.load</code></a>), the new defaults will be filled in
automatically, but youâ€™ll need to fill in the new settings to run
<a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/cli#debug"><code class="code_inline-code__Bq7ot">debug config</code></a> and <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/cli#debug-data"><code class="code_inline-code__Bq7ot">debug data</code></a>.</p></section><div class="grid_root__EfDZl grid_spacing__fhBCv grid_half__xoJZs"><div style="margin-top:var(--spacing-lg)"><a class="link_root__1Me7D button_root__jwipc button_secondary__ukZAk" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/tree/master/website/docs/usage/v3-5.mdx">Suggest edits</a></div><a class="link_root__1Me7D readnext_root__JNzwZ link_no-link-layout__RPvod" href="/usage/linguistic-features"><span><span class="typography_label__l_oVJ">Read next</span>Linguistic Features</span><span class="readnext_icon__jfRnJ"></span></a></div></article><div class="main_asides__RITE5" style="background-image:url(/_next/static/media/pattern_blue.d167bed5.png"></div><footer class="footer_root__zlkjP"><div class="grid_root__EfDZl footer_content__LaE1F grid_narrow__x_6xS grid_spacing__fhBCv grid_third__edHuB"><section><ul class="footer_column__DPe22"><li class="footer_label__xK7_s">spaCy</li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/usage">Usage</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/models">Models</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/api">API Reference</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://course.spacy.io">Online Course</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://explosion.ai/custom-solutions">Custom Solutions</a></li></ul></section><section><ul class="footer_column__DPe22"><li class="footer_label__xK7_s">Community</li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/universe">Universe</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/discussions">GitHub Discussions</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/issues">Issue Tracker</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="http://stackoverflow.com/questions/tagged/spacy">Stack Overflow</a></li></ul></section><section><ul class="footer_column__DPe22"><li class="footer_label__xK7_s">Connect</li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://twitter.com/spacy_io">Twitter</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy">GitHub</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://youtube.com/c/ExplosionAI">YouTube</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://explosion.ai/blog">Blog</a></li></ul></section><section class="footer_full___icln"><ul class="footer_column__DPe22"><li class="footer_label__xK7_s">Stay in the loop!</li><li>Receive updates about new releases, tutorials and more.</li><li><form id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" action="//spacy.us12.list-manage.com/subscribe/post?u=83b0498b1e7fa3c91ce68c3f1&amp;amp;id=ecc82e0493" method="post" target="_blank" novalidate=""><div style="position:absolute;left:-5000px" aria-hidden="true"><input type="text" name="b_83b0498b1e7fa3c91ce68c3f1_ecc82e0493" tabindex="-1" value=""/></div><div class="newsletter_root__uh6MU"><input class="newsletter_input___SMSB" id="mce-EMAIL" type="email" name="EMAIL" placeholder="Your email" aria-label="Your email"/><button class="newsletter_button__gKW8E" id="mc-embedded-subscribe" type="submit" name="subscribe">Sign up</button></div></form></li></ul></section></div><div class="footer_content__LaE1F footer_copy__rbjvc"><span>Â© 2016-<!-- -->2023<!-- --> <a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://explosion.ai">Explosion</a></span><a class="link_root__1Me7D footer_logo__BthsJ link_no-link-layout__RPvod" aria-label="Explosion" href="https://explosion.ai"></a><a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://explosion.ai/legal">Legal / Imprint</a></div></footer></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"What's New in v3.5","teaser":"New features and how to upgrade","menu":[["New Features","features"],["Upgrading Notes","upgrading"]],"slug":"/usage/v3-5","mdx":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    section: \"section\",\n    h2: \"h2\",\n    p: \"p\",\n    h3: \"h3\",\n    h4: \"h4\",\n    a: \"a\",\n    pre: \"pre\",\n    code: \"code\",\n    ul: \"ul\",\n    li: \"li\",\n    strong: \"strong\",\n    blockquote: \"blockquote\"\n  }, _provideComponents(), props.components), {InlineCode} = _components;\n  if (!InlineCode) _missingMdxReference(\"InlineCode\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.section, {\n      id: \"section-features\",\n      children: [_jsx(_components.h2, {\n        id: \"features\",\n        hidden: \"true\",\n        children: \"New features \"\n      }), _jsxs(_components.p, {\n        children: [\"spaCy v3.5 introduces three new CLI commands, \", _jsx(InlineCode, {\n          children: \"apply\"\n        }), \", \", _jsx(InlineCode, {\n          children: \"benchmark\"\n        }), \" and\\n\", _jsx(InlineCode, {\n          children: \"find-threshold\"\n        }), \", adds fuzzy matching, provides improvements to our entity\\nlinking functionality, and includes a range of language updates and bug fixes.\"]\n      }), _jsx(_components.h3, {\n        id: \"cli\",\n        children: \"New CLI commands \"\n      }), _jsx(_components.h4, {\n        children: \"apply CLI\"\n      }), _jsxs(_components.p, {\n        children: [\"The \", _jsxs(_components.a, {\n          href: \"/api/cli#apply\",\n          children: [_jsx(InlineCode, {\n            children: \"apply\"\n          }), \" CLI\"]\n        }), \" can be used to apply a pipeline to one or more\\n\", _jsx(InlineCode, {\n          children: \".txt\"\n        }), \", \", _jsx(InlineCode, {\n          children: \".jsonl\"\n        }), \" or \", _jsx(InlineCode, {\n          children: \".spacy\"\n        }), \" input files, saving the annotated docs in a single\\n\", _jsx(InlineCode, {\n          children: \".spacy\"\n        }), \" file.\"]\n      }), _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-bash\",\n          lang: \"bash\",\n          children: \"$ spacy apply en_core_web_sm my_texts/ output.spacy\\n\"\n        })\n      }), _jsx(_components.h4, {\n        children: \"benchmark CLI\"\n      }), _jsxs(_components.p, {\n        children: [\"The \", _jsxs(_components.a, {\n          href: \"/api/cli#benchmark\",\n          children: [_jsx(InlineCode, {\n            children: \"benchmark\"\n          }), \" CLI\"]\n        }), \" has been added to extend the existing\\n\", _jsx(InlineCode, {\n          children: \"evaluate\"\n        }), \" functionality with a wider range of profiling subcommands.\"]\n      }), _jsxs(_components.p, {\n        children: [\"The \", _jsx(InlineCode, {\n          children: \"benchmark accuracy\"\n        }), \" CLI is introduced as an alias for \", _jsx(InlineCode, {\n          children: \"evaluate\"\n        }), \". The new\\n\", _jsx(InlineCode, {\n          children: \"benchmark speed\"\n        }), \" CLI performs warmup rounds before measuring the speed in words\\nper second on batches of randomly shuffled documents from the provided data.\"]\n      }), _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-bash\",\n          lang: \"bash\",\n          children: \"$ spacy benchmark speed my_pipeline data.spacy\\n\"\n        })\n      }), _jsxs(_components.p, {\n        children: [\"The output is the mean performance using batches (\", _jsx(InlineCode, {\n          children: \"nlp.pipe\"\n        }), \") with a 95%\\nconfidence interval, e.g., profiling \", _jsx(InlineCode, {\n          children: \"en_core_web_sm\"\n        }), \" on CPU:\"]\n      }), _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-none\",\n          lang: \"none\",\n          children: \"Outliers: 2.0%, extreme outliers: 0.0%\\nMean: 18904.1 words/s (95% CI: -256.9 +244.1)\\n\"\n        })\n      }), _jsx(_components.h4, {\n        children: \"find-threshold CLI\"\n      }), _jsxs(_components.p, {\n        children: [\"The \", _jsxs(_components.a, {\n          href: \"/api/cli#find-threshold\",\n          children: [_jsx(InlineCode, {\n            children: \"find-threshold\"\n          }), \" CLI\"]\n        }), \" runs a series of trials\\nacross threshold values from \", _jsx(InlineCode, {\n          children: \"0.0\"\n        }), \" to \", _jsx(InlineCode, {\n          children: \"1.0\"\n        }), \" and identifies the best threshold\\nfor the provided score metric.\"]\n      }), _jsxs(_components.p, {\n        children: [\"The following command runs 20 trials for the \", _jsx(InlineCode, {\n          children: \"spancat\"\n        }), \" component in\\n\", _jsx(InlineCode, {\n          children: \"my_pipeline\"\n        }), \", recording the \", _jsx(InlineCode, {\n          children: \"spans_sc_f\"\n        }), \" score for each value of the threshold\\n\", _jsx(InlineCode, {\n          children: \"[components.spancat.threshold]\"\n        }), \" from \", _jsx(InlineCode, {\n          children: \"0.0\"\n        }), \" to \", _jsx(InlineCode, {\n          children: \"1.0\"\n        }), \":\"]\n      }), _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-bash\",\n          lang: \"bash\",\n          children: \"$ spacy find-threshold my_pipeline data.spacy spancat threshold spans_sc_f --n_trials 20\\n\"\n        })\n      }), _jsxs(_components.p, {\n        children: [\"The \", _jsx(InlineCode, {\n          children: \"find-threshold\"\n        }), \" CLI can be used with \", _jsx(InlineCode, {\n          children: \"textcat_multilabel\"\n        }), \", \", _jsx(InlineCode, {\n          children: \"spancat\"\n        }), \" and\\ncustom components with thresholds that are applied while predicting or scoring.\"]\n      }), _jsx(_components.h3, {\n        id: \"fuzzy\",\n        children: \"Fuzzy matching \"\n      }), _jsxs(_components.p, {\n        children: [\"New \", _jsx(InlineCode, {\n          children: \"FUZZY\"\n        }), \" operators support \", _jsx(_components.a, {\n          href: \"/usage/rule-based-matching#fuzzy\",\n          children: \"fuzzy matching\"\n        }), \"\\nwith the \", _jsx(InlineCode, {\n          children: \"Matcher\"\n        }), \". By default, the \", _jsx(InlineCode, {\n          children: \"FUZZY\"\n        }), \" operator allows a Levenshtein edit\\ndistance of 2 and up to 30% of the pattern string length. \", _jsx(InlineCode, {\n          children: \"FUZZY1\"\n        }), \"..\", _jsx(InlineCode, {\n          children: \"FUZZY9\"\n        }), \" can\\nbe used to specify the exact number of allowed edits.\"]\n      }), _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-python\",\n          lang: \"python\",\n          children: \"# Match lowercase with fuzzy matching (allows 2 edits by default)\\npattern = [{\\\"LOWER\\\": {\\\"FUZZY\\\": \\\"definitely\\\"}}]\\n\\n# Match custom attribute values with fuzzy matching (allows 2 edits by default)\\npattern = [{\\\"_\\\": {\\\"country\\\": {\\\"FUZZY\\\": \\\"Kyrgyzstan\\\"}}}]\\n\\n# Match with exact Levenshtein edit distance limits (allows 4 edits)\\npattern = [{\\\"_\\\": {\\\"country\\\": {\\\"FUZZY4\\\": \\\"Kyrgyzstan\\\"}}}]\\n\"\n        })\n      }), _jsxs(_components.p, {\n        children: [\"Note that \", _jsx(InlineCode, {\n          children: \"FUZZY\"\n        }), \" uses Levenshtein edit distance rather than Damerau-Levenshtein\\nedit distance, so a transposition like \", _jsx(InlineCode, {\n          children: \"teh\"\n        }), \" for \", _jsx(InlineCode, {\n          children: \"the\"\n        }), \" counts as two edits, one\\ninsertion and one deletion.\"]\n      }), _jsxs(_components.p, {\n        children: [\"If youâ€™d prefer an alternate fuzzy matching algorithm, you can provide your own\\ncustom method to the \", _jsx(InlineCode, {\n          children: \"Matcher\"\n        }), \" or as a config option for an entity ruler and\\nspan ruler.\"]\n      }), _jsx(_components.h3, {\n        id: \"fuzzy-regex-lists\",\n        children: \"FUZZY and REGEX with lists \"\n      }), _jsxs(_components.p, {\n        children: [\"The \", _jsx(InlineCode, {\n          children: \"FUZZY\"\n        }), \" and \", _jsx(InlineCode, {\n          children: \"REGEX\"\n        }), \" operators are also now supported for lists with \", _jsx(InlineCode, {\n          children: \"IN\"\n        }), \" and\\n\", _jsx(InlineCode, {\n          children: \"NOT_IN\"\n        }), \":\"]\n      }), _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-python\",\n          lang: \"python\",\n          children: \"pattern = [{\\\"TEXT\\\": {\\\"FUZZY\\\": {\\\"IN\\\": [\\\"awesome\\\", \\\"cool\\\", \\\"wonderful\\\"]}}}]\\npattern = [{\\\"TEXT\\\": {\\\"REGEX\\\": {\\\"NOT_IN\\\": [\\\"^awe(some)?$\\\", \\\"^wonder(ful)?\\\"]}}}]\\n\"\n        })\n      }), _jsx(_components.h3, {\n        id: \"el\",\n        children: \"Entity linking generalization \"\n      }), _jsxs(_components.p, {\n        children: [\"The knowledge base used for entity linking is now easier to customize and has a\\nnew default implementation \", _jsx(_components.a, {\n          href: \"/api/inmemorylookupkb\",\n          children: _jsx(InlineCode, {\n            children: \"InMemoryLookupKB\"\n          })\n        }), \".\"]\n      }), _jsx(_components.h3, {\n        id: \"additional-features-and-improvements\",\n        children: \"Additional features and improvements \"\n      }), _jsxs(_components.ul, {\n        children: [\"\\n\", _jsxs(_components.li, {\n          children: [\"Language updates:\", \"\\n\", _jsxs(_components.ul, {\n            children: [\"\\n\", _jsx(_components.li, {\n              children: \"Extended support for Slovenian\"\n            }), \"\\n\", _jsx(_components.li, {\n              children: \"Fixed lookup fallback for French and Catalan lemmatizers\"\n            }), \"\\n\", _jsxs(_components.li, {\n              children: [\"Switch Russian and Ukrainian lemmatizers to \", _jsx(InlineCode, {\n                children: \"pymorphy3\"\n              })]\n            }), \"\\n\", _jsx(_components.li, {\n              children: \"Support for editorial punctuation in Ancient Greek\"\n            }), \"\\n\", _jsx(_components.li, {\n              children: \"Update to Russian tokenizer exceptions\"\n            }), \"\\n\", _jsx(_components.li, {\n              children: \"Small fix for Dutch stop words\"\n            }), \"\\n\"]\n          }), \"\\n\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"Allow up to \", _jsx(InlineCode, {\n            children: \"typer\"\n          }), \" v0.7.x, \", _jsx(InlineCode, {\n            children: \"mypy\"\n          }), \" 0.990 and \", _jsx(InlineCode, {\n            children: \"typing_extensions\"\n          }), \" v4.4.x.\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"New \", _jsx(InlineCode, {\n            children: \"spacy.ConsoleLogger.v3\"\n          }), \" with expanded progress\\n\", _jsx(_components.a, {\n            href: \"/api/top-level#ConsoleLogger\",\n            children: \"tracking\"\n          }), \".\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"Improved scoring behavior for \", _jsx(InlineCode, {\n            children: \"textcat\"\n          }), \" with \", _jsx(InlineCode, {\n            children: \"spacy.textcat_scorer.v2\"\n          }), \" and\\n\", _jsx(InlineCode, {\n            children: \"spacy.textcat_multilabel_scorer.v2\"\n          }), \".\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"Updates so that downstream components can train properly on a frozen \", _jsx(InlineCode, {\n            children: \"tok2vec\"\n          }), \"\\nor \", _jsx(InlineCode, {\n            children: \"transformer\"\n          }), \" layer.\"]\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"Allow interpolation of variables in directory names in projects.\"\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"Support for local file system \", _jsx(_components.a, {\n            href: \"/usage/projects#remote\",\n            children: \"remotes\"\n          }), \" for projects.\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"Improve UX around \", _jsx(InlineCode, {\n            children: \"displacy.serve\"\n          }), \" when the default port is in use.\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"Optional \", _jsx(InlineCode, {\n            children: \"before_update\"\n          }), \" callback that is invoked at the start of each\\n\", _jsx(_components.a, {\n            href: \"/api/data-formats#config-training\",\n            children: \"training step\"\n          }), \".\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"Improve performance of \", _jsx(InlineCode, {\n            children: \"SpanGroup\"\n          }), \" and fix typing issues for \", _jsx(InlineCode, {\n            children: \"SpanGroup\"\n          }), \" and\\n\", _jsx(InlineCode, {\n            children: \"Span\"\n          }), \" objects.\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"Patch a\\n\", _jsx(_components.a, {\n            href: \"https://github.com/advisories/GHSA-gw9q-c7gh-j9vm\",\n            children: \"security vulnerability\"\n          }), \" in\\nextracting tar files.\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"Add equality definition for \", _jsx(InlineCode, {\n            children: \"Vectors\"\n          }), \".\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"Ensure \", _jsx(InlineCode, {\n            children: \"Vocab.to_disk\"\n          }), \" respects the exclude setting for \", _jsx(InlineCode, {\n            children: \"lookups\"\n          }), \" and\\n\", _jsx(InlineCode, {\n            children: \"vectors\"\n          }), \".\"]\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"Correctly handle missing annotations in the edit tree lemmatizer.\"\n        }), \"\\n\"]\n      }), _jsx(_components.h3, {\n        id: \"pipelines\",\n        children: \"Trained pipeline updates \"\n      }), _jsxs(_components.ul, {\n        children: [\"\\n\", _jsxs(_components.li, {\n          children: [\"The CNN pipelines add \", _jsx(InlineCode, {\n            children: \"IS_SPACE\"\n          }), \" as a \", _jsx(InlineCode, {\n            children: \"tok2vec\"\n          }), \" feature for \", _jsx(InlineCode, {\n            children: \"tagger\"\n          }), \" and\\n\", _jsx(InlineCode, {\n            children: \"morphologizer\"\n          }), \" components to improve tagging of non-whitespace vs. whitespace\\ntokens.\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"The transformer pipelines require \", _jsx(InlineCode, {\n            children: \"spacy-transformers\"\n          }), \" v1.2, which uses the\\nexact alignment from \", _jsx(InlineCode, {\n            children: \"tokenizers\"\n          }), \" for fast tokenizers instead of the heuristic\\nalignment from \", _jsx(InlineCode, {\n            children: \"spacy-alignments\"\n          }), \". For all trained pipelines except\\n\", _jsx(InlineCode, {\n            children: \"ja_core_news_trf\"\n          }), \", the alignments between spaCy tokens and transformer tokens\\nmay be slightly different. More details about the \", _jsx(InlineCode, {\n            children: \"spacy-transformers\"\n          }), \" changes\\nin the\\n\", _jsx(_components.a, {\n            href: \"https://github.com/explosion/spacy-transformers/releases/tag/v1.2.0\",\n            children: \"v1.2.0 release notes\"\n          }), \".\"]\n        }), \"\\n\"]\n      })]\n    }), \"\\n\", _jsxs(_components.section, {\n      id: \"section-upgrading\",\n      children: [_jsx(_components.h2, {\n        id: \"upgrading\",\n        children: \"Notes about upgrading from v3.4 \"\n      }), _jsx(_components.h3, {\n        id: \"textcat-validation\",\n        children: \"Validation of textcat values \"\n      }), _jsxs(_components.p, {\n        children: [\"An error is now raised when unsupported values are given as input to train a\\n\", _jsx(InlineCode, {\n          children: \"textcat\"\n        }), \" or \", _jsx(InlineCode, {\n          children: \"textcat_multilabel\"\n        }), \" model - ensure that values are \", _jsx(InlineCode, {\n          children: \"0.0\"\n        }), \" or \", _jsx(InlineCode, {\n          children: \"1.0\"\n        }), \"\\nas explained in the \", _jsx(_components.a, {\n          href: \"/api/textcategorizer#assigned-attributes\",\n          children: \"docs\"\n        }), \".\"]\n      }), _jsx(_components.h3, {\n        children: \"Using the default knowledge base\"\n      }), _jsxs(_components.p, {\n        children: [\"As \", _jsx(InlineCode, {\n          children: \"KnowledgeBase\"\n        }), \" is now an abstract class, you should call the constructor of\\nthe new \", _jsx(InlineCode, {\n          children: \"InMemoryLookupKB\"\n        }), \" instead when you want to use spaCyâ€™s default KB\\nimplementation:\"]\n      }), _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-diff\",\n          lang: \"diff\",\n          children: \"- kb = KnowledgeBase()\\n+ kb = InMemoryLookupKB()\\n\"\n        })\n      }), _jsxs(_components.p, {\n        children: [\"If youâ€™ve written a custom KB that inherits from \", _jsx(InlineCode, {\n          children: \"KnowledgeBase\"\n        }), \", youâ€™ll need to\\nimplement its abstract methods, or alternatively inherit from \", _jsx(InlineCode, {\n          children: \"InMemoryLookupKB\"\n        }), \"\\ninstead.\"]\n      }), _jsx(_components.h3, {\n        id: \"scores\",\n        children: \"Updated scorers for tokenization and textcat \"\n      }), _jsxs(_components.p, {\n        children: [\"We fixed a bug that inflated the \", _jsx(InlineCode, {\n          children: \"token_acc\"\n        }), \" scores in v3.0-v3.4. The reported\\n\", _jsx(InlineCode, {\n          children: \"token_acc\"\n        }), \" will drop from v3.4 to v3.5, but if \", _jsx(InlineCode, {\n          children: \"token_p/r/f\"\n        }), \" stay the same,\\nyour tokenization performance has not changed from v3.4.\"]\n      }), _jsxs(_components.p, {\n        children: [\"For new \", _jsx(InlineCode, {\n          children: \"textcat\"\n        }), \" or \", _jsx(InlineCode, {\n          children: \"textcat_multilabel\"\n        }), \" configs, the new default \", _jsx(InlineCode, {\n          children: \"v2\"\n        }), \" scorers:\"]\n      }), _jsxs(_components.ul, {\n        children: [\"\\n\", _jsxs(_components.li, {\n          children: [\"ignore \", _jsx(InlineCode, {\n            children: \"threshold\"\n          }), \" for \", _jsx(InlineCode, {\n            children: \"textcat\"\n          }), \", so the reported \", _jsx(InlineCode, {\n            children: \"cats_p/r/f\"\n          }), \" may increase\\nslightly in v3.5 even though the underlying predictions are unchanged\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"report the performance of only the \", _jsx(_components.strong, {\n            children: \"final\"\n          }), \" \", _jsx(InlineCode, {\n            children: \"textcat\"\n          }), \" or \", _jsx(InlineCode, {\n            children: \"textcat_multilabel\"\n          }), \"\\ncomponent in the pipeline by default\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"allow custom scorers to be used to score multiple \", _jsx(InlineCode, {\n            children: \"textcat\"\n          }), \" and\\n\", _jsx(InlineCode, {\n            children: \"textcat_multilabel\"\n          }), \" components with \", _jsx(InlineCode, {\n            children: \"Scorer.score_cats\"\n          }), \" by restricting the\\nevaluation to the componentâ€™s provided labels\"]\n        }), \"\\n\"]\n      }), _jsx(_components.h3, {\n        id: \"version-compat\",\n        children: \"Pipeline package version compatibility \"\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Using legacy implementations\"\n        }), \"\\n\", _jsxs(_components.p, {\n          children: [\"In spaCy v3, youâ€™ll still be able to load and reference legacy implementations\\nvia \", _jsx(_components.a, {\n            href: \"https://github.com/explosion/spacy-legacy\",\n            children: _jsx(InlineCode, {\n              children: \"spacy-legacy\"\n            })\n          }), \", even if the\\ncomponents or architectures change and newer versions are available in the\\ncore library.\"]\n        }), \"\\n\"]\n      }), _jsx(_components.p, {\n        children: \"When youâ€™re loading a pipeline package trained with an earlier version of spaCy\\nv3, you will see a warning telling you that the pipeline may be incompatible.\\nThis doesnâ€™t necessarily have to be true, but we recommend running your\\npipelines against your test suite or evaluation data to make sure there are no\\nunexpected results.\"\n      }), _jsxs(_components.p, {\n        children: [\"If youâ€™re using one of the \", _jsx(_components.a, {\n          href: \"/models\",\n          children: \"trained pipelines\"\n        }), \" we provide, you should\\nrun \", _jsx(_components.a, {\n          href: \"/api/cli#download\",\n          children: _jsx(InlineCode, {\n            children: \"spacy download\"\n          })\n        }), \" to update to the latest version. To\\nsee an overview of all installed packages and their compatibility, you can run\\n\", _jsx(_components.a, {\n          href: \"/api/cli#validate\",\n          children: _jsx(InlineCode, {\n            children: \"spacy validate\"\n          })\n        }), \".\"]\n      }), _jsxs(_components.p, {\n        children: [\"If youâ€™ve trained your own custom pipeline and youâ€™ve confirmed that itâ€™s still\\nworking as expected, you can update the spaCy version requirements in the\\n\", _jsx(_components.a, {\n          href: \"/api/data-formats#meta\",\n          children: _jsx(InlineCode, {\n            children: \"meta.json\"\n          })\n        }), \":\"]\n      }), _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-diff\",\n          lang: \"diff\",\n          children: \"- \\\"spacy_version\\\": \\\"\u003e=3.4.0,\u003c3.5.0\\\",\\n+ \\\"spacy_version\\\": \\\"\u003e=3.4.0,\u003c3.6.0\\\",\\n\"\n        })\n      }), _jsx(_components.h3, {\n        children: \"Updating v3.4 configs\"\n      }), _jsxs(_components.p, {\n        children: [\"To update a config from spaCy v3.4 with the new v3.5 settings, run\\n\", _jsx(_components.a, {\n          href: \"/api/cli#init-fill-config\",\n          children: _jsx(InlineCode, {\n            children: \"init fill-config\"\n          })\n        }), \":\"]\n      }), _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-cli\",\n          lang: \"cli\",\n          children: \"$ python -m spacy init fill-config config-v3.4.cfg config-v3.5.cfg\\n\"\n        })\n      }), _jsxs(_components.p, {\n        children: [\"In many cases (\", _jsx(_components.a, {\n          href: \"/api/cli#train\",\n          children: _jsx(InlineCode, {\n            children: \"spacy train\"\n          })\n        }), \",\\n\", _jsx(_components.a, {\n          href: \"/api/top-level#spacy.load\",\n          children: _jsx(InlineCode, {\n            children: \"spacy.load\"\n          })\n        }), \"), the new defaults will be filled in\\nautomatically, but youâ€™ll need to fill in the new settings to run\\n\", _jsx(_components.a, {\n          href: \"/api/cli#debug\",\n          children: _jsx(InlineCode, {\n            children: \"debug config\"\n          })\n        }), \" and \", _jsx(_components.a, {\n          href: \"/api/cli#debug-data\",\n          children: _jsx(InlineCode, {\n            children: \"debug data\"\n          })\n        }), \".\"]\n      })]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{"title":"What's New in v3.5","teaser":"New features and how to upgrade","menu":[["New Features","features"],["Upgrading Notes","upgrading"]]},"scope":{}},"sectionTitle":"Usage Documentation","theme":"blue","section":"usage","apiDetails":{"stringName":null,"baseClass":null,"trainable":null},"isIndex":false,"next":{"slug":"/usage/linguistic-features","title":"Linguistic Features"}},"__N_SSG":true},"page":"/[...listPathPage]","query":{"listPathPage":["usage","v3-5"]},"buildId":"2lY2cUyEfZosk4VLgkHb2","isFallback":false,"dynamicIds":[728],"gsp":true,"scriptLoader":[]}</script></body></html>