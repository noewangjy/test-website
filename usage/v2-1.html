<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="shortcut icon" href="/icons/icon-192x192.png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1, maximum-scale=5.0, shrink-to-fit=no, viewport-fit=cover"/><meta name="theme-color" content="#09a3d5"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png"/><title>What&#x27;s New in v2.1 Â· spaCy Usage Documentation</title><meta name="description" content="New features, backwards incompatibilities and migration guide"/><meta property="og:title" content="What&#x27;s New in v2.1 Â· spaCy Usage Documentation"/><meta property="og:description" content="New features, backwards incompatibilities and migration guide"/><meta property="og:type" content="website"/><meta property="og:site_name" content="What&#x27;s New in v2.1"/><meta property="og:image" content="https://spacy.io/_next/static/media/social_default.96b04585.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:image" content="https://spacy.io/_next/static/media/social_default.96b04585.jpg"/><meta name="twitter:creator" content="@spacy_io"/><meta name="twitter:site" content="@spacy_io"/><meta name="twitter:title" content="What&#x27;s New in v2.1 Â· spaCy Usage Documentation"/><meta name="twitter:description" content="New features, backwards incompatibilities and migration guide"/><meta name="docsearch:language" content="en"/><meta name="next-head-count" content="24"/><link rel="preload" href="/_next/static/css/8f0b94edbc18d62d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8f0b94edbc18d62d.css" data-n-g=""/><link rel="preload" href="/_next/static/css/e6995e0e8addcf99.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e6995e0e8addcf99.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script defer="" src="/_next/static/chunks/262.c647d33d06232ef6.js"></script><script defer="" src="/_next/static/chunks/728.cf6ba0da2700fa1b.js"></script><script src="/_next/static/chunks/webpack-8161fc2bb14cec39.js" defer=""></script><script src="/_next/static/chunks/framework-3b5a00d5d7e8d93b.js" defer=""></script><script src="/_next/static/chunks/main-a0f603ce323043fd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-eb3ea1261af64e73.js" defer=""></script><script src="/_next/static/chunks/94-57434c8b7a6c3878.js" defer=""></script><script src="/_next/static/chunks/128-76b45627a109219b.js" defer=""></script><script src="/_next/static/chunks/pages/%5B...listPathPage%5D-45eea57fe8c2902c.js" defer=""></script><script src="/_next/static/Ugre-usgT1EZhnSeYcBR9/_buildManifest.js" defer=""></script><script src="/_next/static/Ugre-usgT1EZhnSeYcBR9/_ssgManifest.js" defer=""></script></head><body class="theme-blue"><div id="__next"><div class="theme-blue"><nav class="navigation_root__yPL8O"><span class="navigation_has-alert__s0Drf"><a class="link_root__1Me7D link_no-link-layout__RPvod" aria-label="spaCy" href="/"><h1 class="navigation_title__pm49s">spaCy</h1></a> <span class="navigation_alert__ZOXon"><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/usage/v3-5"><strong>ðŸ’¥ Out now:</strong> spaCy v3.5</a></span></span><div class="navigation_menu__ZMJxN"><select class="dropdown_root__3uiQq navigation_dropdown__4j4pI"><option value="title" disabled="">Menu</option><option value="/usage" selected="">Usage</option><option value="/models">Models</option><option value="/api">API</option><option value="/universe">Universe</option></select><ul class="navigation_list__DCzqi"><li class="navigation_item__ln1O1 navigation_is-active__RjVJG"><a class="link_root__1Me7D link_no-link-layout__RPvod" tabindex="-1" href="/usage">Usage</a></li><li class="navigation_item__ln1O1"><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/models">Models</a></li><li class="navigation_item__ln1O1"><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/api">API</a></li><li class="navigation_item__ln1O1"><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/universe">Universe</a></li><li class="navigation_item__ln1O1 navigation_github__MpFNv"><span><a href="https://github.com/explosion/spaCy" data-size="large" data-show-count="true" aria-label="Star spaCy on GitHub"></a></span></li></ul><div class="navigation_search__BKZCn"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><progress class="progress_root__9huWN" value="0" max="100"></progress></nav><menu class="sidebar sidebar_root__s2No7"><h1 hidden="" aria-hidden="true" class="h0 sidebar_active-heading___dkf9">Documentation</h1><div class="sidebar_dropdown__vyqjz"><select class="dropdown_root__3uiQq sidebar_dropdown-select__Nwbq9"><option disabled="">Select page...</option><option value="/usage">Get started<!-- --> â€º <!-- -->Installation</option><option value="/usage/models">Get started<!-- --> â€º <!-- -->Models &amp; Languages</option><option value="/usage/facts-figures">Get started<!-- --> â€º <!-- -->Facts &amp; Figures</option><option value="/usage/spacy-101">Get started<!-- --> â€º <!-- -->spaCy 101</option><option value="/usage/v3">Get started<!-- --> â€º <!-- -->New in v3.0</option><option value="/usage/v3-1">Get started<!-- --> â€º <!-- -->New in v3.1</option><option value="/usage/v3-2">Get started<!-- --> â€º <!-- -->New in v3.2</option><option value="/usage/v3-3">Get started<!-- --> â€º <!-- -->New in v3.3</option><option value="/usage/v3-4">Get started<!-- --> â€º <!-- -->New in v3.4</option><option value="/usage/v3-5">Get started<!-- --> â€º <!-- -->New in v3.5</option><option value="/usage/linguistic-features">Guides<!-- --> â€º <!-- -->Linguistic Features</option><option value="/usage/rule-based-matching">Guides<!-- --> â€º <!-- -->Rule-based Matching</option><option value="/usage/processing-pipelines">Guides<!-- --> â€º <!-- -->Processing Pipelines</option><option value="/usage/embeddings-transformers">Guides<!-- --> â€º <!-- -->Embeddings &amp; Transformers</option><option value="/usage/training">Guides<!-- --> â€º <!-- -->Training Models</option><option value="/usage/layers-architectures">Guides<!-- --> â€º <!-- -->Layers &amp; Model Architectures</option><option value="/usage/projects">Guides<!-- --> â€º <!-- -->spaCy Projects</option><option value="/usage/saving-loading">Guides<!-- --> â€º <!-- -->Saving &amp; Loading</option><option value="/usage/visualizers">Guides<!-- --> â€º <!-- -->Visualizers</option><option value="https://github.com/explosion/projects">Resources<!-- --> â€º <!-- -->Project Templates</option><option value="https://v2.spacy.io">Resources<!-- --> â€º <!-- -->v2.x Documentation</option><option value="https://explosion.ai/custom-solutions">Resources<!-- --> â€º <!-- -->Custom Solutions</option></select></div><ul class="sidebar_section__DArOO"><li class="sidebar_label__V3K28">Get started</li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage">Installation</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/models">Models &amp; Languages</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/facts-figures">Facts &amp; Figures</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/spacy-101">spaCy 101</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/v3">New in v3.0</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/v3-1">New in v3.1</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/v3-2">New in v3.2</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/v3-3">New in v3.3</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/v3-4">New in v3.4</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/v3-5">New in v3.5</a></li></ul><ul class="sidebar_section__DArOO"><li class="sidebar_label__V3K28">Guides</li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/linguistic-features">Linguistic Features</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/rule-based-matching">Rule-based Matching</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/processing-pipelines">Processing Pipelines</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/embeddings-transformers">Embeddings &amp; Transformers<span class="tag_root__NTSnK tag_spaced__Q9amH">new</span></a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/training">Training Models<span class="tag_root__NTSnK tag_spaced__Q9amH">new</span></a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/layers-architectures">Layers &amp; Model Architectures<span class="tag_root__NTSnK tag_spaced__Q9amH">new</span></a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/projects">spaCy Projects<span class="tag_root__NTSnK tag_spaced__Q9amH">new</span></a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/saving-loading">Saving &amp; Loading</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/usage/visualizers">Visualizers</a></li></ul><ul class="sidebar_section__DArOO"><li class="sidebar_label__V3K28">Resources</li><li><a class="link_root__1Me7D sidebar_link__sKXFP" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/projects">Project Templates</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="https://v2.spacy.io">v2.x Documentation</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="https://explosion.ai/custom-solutions">Custom Solutions</a></li></ul></menu><main class="main_root__7f6Tj main_with-sidebar__uH1df main_with-asides__ikQT6"><article class="main_content__8zFCH"><header class="title_root__pS2WQ"><h1 id="_title" class="typography_heading__D82WZ typography_h1__b7dt9 title_h1__l3CW1"><span class="heading-text">What&#x27;s New in v2.1<!-- --> </span></h1><div class="heading-teaser title_teaser__QhwCH">New features, backwards incompatibilities and migration guide</div></header><section id="section-features" class="section_root__k1hUl"><p>spaCy v2.1 has focussed primarily on stability and performance, solidifying the
design changes introduced in <a class="link_root__1Me7D" href="/usage/v2">v2.0</a>. As well as smaller models,
faster runtime, and many bug fixes, v2.1 also introduces experimental support
for some exciting new NLP innovations. For the full changelog, see the
<a class="link_root__1Me7D link_with-icon__NAVDA" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/releases/tag/v2.1.0"><span class="link_source-text__VDP74">release notes on GitHub</span></a>.
For more details and a behind-the-scenes look at the new release,
<a class="link_root__1Me7D" href="https://explosion.ai/blog/spacy-v2-1">see our blog post</a>.</p><h3 id="pretraining" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#pretraining" class="heading-text typography_permalink__UiIRy">BERT/ULMFit/Elmo-style pre-training <!-- --> </a><span class="tag_root__NTSnK tag_spaced__Q9amH">experimental</span></h3><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-bash language-bash"></code></pre>
</div></div></aside><p>spaCy v2.1 introduces a new CLI command, <code class="code_inline-code__Bq7ot">spacy pretrain</code>, that can make your
models much more accurate. Itâ€™s especially useful when you have <strong>limited
training data</strong>. The <code class="code_inline-code__Bq7ot">spacy pretrain</code> command lets you use transfer learning to
initialize your models with information from raw text, using a language model
objective similar to the one used in Googleâ€™s BERT system. Weâ€™ve taken
particular care to ensure that pretraining works well even with spaCyâ€™s small
default architecture sizes, so you donâ€™t have to compromise on efficiency to use
it.</p><aside class="infobox_root__yNIMg"><p><strong>API:</strong> <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/cli#pretrain"><code class="code_inline-code__Bq7ot">spacy pretrain</code></a> **Usage: **
<a class="link_root__1Me7D" href="/usage/training#transfer-learning">Improving accuracy with transfer learning</a></p></aside><h3 id="matcher-api" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#matcher-api" class="heading-text typography_permalink__UiIRy">Extended match pattern API <!-- --> </a></h3><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-python language-python"></code></pre>
</div></div></aside><p>Instead of mapping to a single value, token patterns can now also map to a
<strong>dictionary of properties</strong>. For example, to specify that the value of a lemma
should be part of a list of values, or to set a minimum character length. It now
also supports a <code class="code_inline-code__Bq7ot">REGEX</code> property, as well as set membership via <code class="code_inline-code__Bq7ot">IN</code> and
<code class="code_inline-code__Bq7ot">NOT_IN</code>, custom extension attributes via <code class="code_inline-code__Bq7ot">_</code> and rich comparison for numeric
values.</p><aside class="infobox_root__yNIMg"><p><strong>API:</strong> <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/matcher"><code class="code_inline-code__Bq7ot">Matcher</code></a> **Usage: **
<a class="link_root__1Me7D" href="/usage/rule-based-matching#adding-patterns-attributes-extended">Extended pattern syntax and attributes</a>,
<a class="link_root__1Me7D" href="/usage/rule-based-matching#regex">Regular expressions</a></p></aside><h3 id="entity-ruler" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#entity-ruler" class="heading-text typography_permalink__UiIRy">Easy rule-based entity recognition <!-- --> </a></h3><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-python language-python"></code></pre>
</div></div></aside><p>The <code class="code_inline-code__Bq7ot">EntityRuler</code> is an exciting new component that lets you add named entities
based on pattern dictionaries, and makes it easy to combine rule-based and
statistical named entity recognition for even more powerful models. Entity rules
can be phrase patterns for exact string matches, or token patterns for full
flexibility.</p><aside class="infobox_root__yNIMg"><p><strong>API:</strong> <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/entityruler"><code class="code_inline-code__Bq7ot">EntityRuler</code></a> **Usage: **
<a class="link_root__1Me7D" href="/usage/rule-based-matching#entityruler">Rule-based entity recognition</a></p></aside><h3 id="phrasematcher" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#phrasematcher" class="heading-text typography_permalink__UiIRy">Phrase matching with other attributes <!-- --> </a></h3><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-python language-python"></code></pre>
</div></div></aside><p>By default, the <code class="code_inline-code__Bq7ot">PhraseMatcher</code> will match on the verbatim token text, e.g.
<code class="code_inline-code__Bq7ot">Token.text</code>. By setting the <code class="code_inline-code__Bq7ot">attr</code> argument on initialization, you can change
<strong>which token attribute the matcher should use</strong> when comparing the phrase
pattern to the matched <code class="code_inline-code__Bq7ot">Doc</code>. For example, <code class="code_inline-code__Bq7ot">LOWER</code> for case-insensitive matches
or <code class="code_inline-code__Bq7ot">POS</code> for finding sequences of the same part-of-speech tags.</p><aside class="infobox_root__yNIMg"><p><strong>API:</strong> <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/phrasematcher"><code class="code_inline-code__Bq7ot">PhraseMatcher</code></a> **Usage: **
<a class="link_root__1Me7D" href="/usage/rule-based-matching#phrasematcher-attrs">Matching on other token attributes</a></p></aside><h3 id="retokenizer" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#retokenizer" class="heading-text typography_permalink__UiIRy">Retokenizer for merging and splitting <!-- --> </a></h3><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-python language-python"></code></pre>
</div></div></aside><p>The new <code class="code_inline-code__Bq7ot">Doc.retokenize</code> context manager allows merging spans of multiple tokens
into one single token, and splitting single tokens into multiple tokens.
Modifications to the <code class="code_inline-code__Bq7ot">Doc</code>â€™s tokenization are stored, and then made all at once
when the context manager exits. This is much more efficient, and less
error-prone. <code class="code_inline-code__Bq7ot">Doc.merge</code> and <code class="code_inline-code__Bq7ot">Span.merge</code> still work, but theyâ€™re considered
deprecated.</p><aside class="infobox_root__yNIMg"><p><strong>API:</strong> <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/doc#retokenize"><code class="code_inline-code__Bq7ot">Doc.retokenize</code></a>,
<a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/doc#retokenizer.merge"><code class="code_inline-code__Bq7ot">Retokenizer.merge</code></a>,
<a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/doc#retokenizer.split"><code class="code_inline-code__Bq7ot">Retokenizer.split</code></a><br/>**Usage:
**<a class="link_root__1Me7D" href="/usage/linguistic-features#retokenization">Merging and splitting</a></p></aside><h3 id="entry-points" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#entry-points" class="heading-text typography_permalink__UiIRy">Components and languages via entry points <!-- --> </a></h3><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-python language-python"></code></pre>
</div></div></aside><p>Using entry points, model packages and extension packages can now define their
own <code class="code_inline-code__Bq7ot">&quot;spacy_factories&quot;</code> and <code class="code_inline-code__Bq7ot">&quot;spacy_languages&quot;</code>, which will be added to the
built-in factories and languages. If a package in the same environment exposes
spaCy entry points, all of this happens automatically and no further user action
is required.</p><aside class="infobox_root__yNIMg"><p><strong>Usage:</strong> <a class="link_root__1Me7D" href="/usage/saving-loading#entry-points">Using entry points</a></p></aside><h3 id="docs" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#docs" class="heading-text typography_permalink__UiIRy">Improved documentation <!-- --> </a></h3><p>Although it looks pretty much the same, weâ€™ve rebuilt the entire documentation
using <a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://www.gatsbyjs.org/">Gatsby</a> and <a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://mdxjs.com/">MDX</a>. Itâ€™s
now an even faster progressive web app and allows us to write all content
entirely <strong>in Markdown</strong>, without having to compromise on easy-to-use custom UI
components. Weâ€™re hoping that the Markdown source will make it even easier to
contribute to the documentation. For more details, check out the
<a class="link_root__1Me7D" href="/styleguide">styleguide</a> and
<a class="link_root__1Me7D link_with-icon__NAVDA" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spacy/tree/v2.x/website"><span class="link_source-text__VDP74">source</span></a>. While converting
the pages to Markdown, weâ€™ve also fixed a bunch of typos, improved the existing
pages and added some new content:</p><ul class="list_ul__fe_HF">
<li class="list_li__sfx_z"><strong>Usage Guide:</strong> <a class="link_root__1Me7D" href="/usage/rule-based-matching">Rule-based Matching</a><br/>How to
use the <code class="code_inline-code__Bq7ot">Matcher</code>, <code class="code_inline-code__Bq7ot">PhraseMatcher</code> and the new <code class="code_inline-code__Bq7ot">EntityRuler</code>, and write
powerful components to combine statistical models and rules.</li>
<li class="list_li__sfx_z"><strong>Usage Guide:</strong> <a class="link_root__1Me7D" href="/usage/saving-loading">Saving and Loading</a><br/>Everything
you need to know about serialization, and how to save and load pipeline
components, package your spaCy models as Python modules and use entry points.</li>
<li class="list_li__sfx_z">**Usage Guide: **
<a class="link_root__1Me7D" href="/usage/linguistic-features#retokenization">Merging and Splitting</a><br/>How to
retokenize a <code class="code_inline-code__Bq7ot">Doc</code> using the new <code class="code_inline-code__Bq7ot">retokenize</code> context manager and merge spans
into single tokens and split single tokens into multiple.</li>
<li class="list_li__sfx_z"><strong>Universe:</strong> <a class="link_root__1Me7D" href="/universe/category/videos">Videos</a> and
<a class="link_root__1Me7D" href="/universe/category/podcasts">Podcasts</a></li>
<li class="list_li__sfx_z"><strong>API:</strong> <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/entityruler"><code class="code_inline-code__Bq7ot">EntityRuler</code></a></li>
<li class="list_li__sfx_z"><strong>API:</strong> <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/sentencizer"><code class="code_inline-code__Bq7ot">Sentencizer</code></a></li>
<li class="list_li__sfx_z"><strong>API:</strong> <a class="link_root__1Me7D link_with-icon__NAVDA" href="/api/pipeline-functions"><span class="link_source-text__VDP74">Pipeline functions</span></a></li>
</ul></section>
<section id="section-incompat" class="section_root__k1hUl"><h2 id="incompat" class="typography_heading__D82WZ typography_h2__hzV3h"><a href="#incompat" class="heading-text typography_permalink__UiIRy">Backwards incompatibilities <!-- --> </a></h2><aside class="infobox_root__yNIMg infobox_warning__SKl67"><h4 class="infobox_title__uDT7C"><span>Important note on models</span></h4><p>If youâ€™ve been training <strong>your own models</strong>, youâ€™ll need to <strong>retrain</strong> them
with the new version. Also donâ€™t forget to upgrade all models to the latest
versions. Models for v2.0.x arenâ€™t compatible with models for v2.1.x. To check
if all of your models are up to date, you can run the
<a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/cli#validate"><code class="code_inline-code__Bq7ot">spacy validate</code></a> command.</p></aside><ul class="list_ul__fe_HF">
<li class="list_li__sfx_z">
<p>Due to difficulties linking our new
<a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/cython-blis"><code class="code_inline-code__Bq7ot">blis</code></a> for faster
platform-independent matrix multiplication, this release currently <strong>doesnâ€™t
work on Python 2.7 on Windows</strong>. We expect this to be corrected in the future.</p>
</li>
<li class="list_li__sfx_z">
<p>While the <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/matcher"><code class="code_inline-code__Bq7ot">Matcher</code></a> API is fully backwards compatible, its
algorithm has changed to fix a number of bugs and performance issues. This
means that the <code class="code_inline-code__Bq7ot">Matcher</code> in v2.1.x may produce different results compared to
the <code class="code_inline-code__Bq7ot">Matcher</code> in v2.0.x.</p>
</li>
<li class="list_li__sfx_z">
<p>The deprecated <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/doc#merge"><code class="code_inline-code__Bq7ot">Doc.merge</code></a> and
<a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/span#merge"><code class="code_inline-code__Bq7ot">Span.merge</code></a> methods still work, but you may notice that
they now run slower when merging many objects in a row. Thatâ€™s because the
merging engine was rewritten to be more reliable and to support more efficient
merging <strong>in bulk</strong>. To take advantage of this, you should rewrite your logic
to use the <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/doc#retokenize"><code class="code_inline-code__Bq7ot">Doc.retokenize</code></a> context manager and perform
as many merges as possible together in the <code class="code_inline-code__Bq7ot">with</code> block.</p>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-diff language-diff"></code></pre>
</li>
<li class="list_li__sfx_z">
<p>The serialization methods <code class="code_inline-code__Bq7ot">to_disk</code>, <code class="code_inline-code__Bq7ot">from_disk</code>, <code class="code_inline-code__Bq7ot">to_bytes</code> and <code class="code_inline-code__Bq7ot">from_bytes</code>
now support a single <code class="code_inline-code__Bq7ot">exclude</code> argument to provide a list of string names to
exclude. The docs have been updated to list the available serialization fields
for each class. The <code class="code_inline-code__Bq7ot">disable</code> argument on the <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/language"><code class="code_inline-code__Bq7ot">Language</code></a>
serialization methods has been renamed to <code class="code_inline-code__Bq7ot">exclude</code> for consistency.</p>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-diff language-diff"></code></pre>
</li>
<li class="list_li__sfx_z">
<p>The .pos value for several common English words has changed, due to
corrections to long-standing mistakes in the English tag map (see
<a class="link_root__1Me7D link_with-icon__NAVDA" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/issues/593"><span class="link_source-text__VDP74">issue #593</span></a> and
<a class="link_root__1Me7D link_with-icon__NAVDA" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/issues/3311"><span class="link_source-text__VDP74">issue #3311</span></a> for details).</p>
</li>
<li class="list_li__sfx_z">
<p>For better compatibility with the Universal Dependencies data, the lemmatizer
now preserves capitalization, e.g. for proper nouns. See
<a class="link_root__1Me7D link_with-icon__NAVDA" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/issues/3256"><span class="link_source-text__VDP74">issue #3256</span></a> for details.</p>
</li>
<li class="list_li__sfx_z">
<p>The built-in rule-based sentence boundary detector is now only called
<code class="code_inline-code__Bq7ot">&quot;sentencizer&quot;</code> â€“ the name <code class="code_inline-code__Bq7ot">&quot;sbd&quot;</code> is deprecated.</p>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-diff language-diff"></code></pre>
</li>
<li class="list_li__sfx_z">
<p>The <code class="code_inline-code__Bq7ot">is_sent_start</code> attribute of the first token in a <code class="code_inline-code__Bq7ot">Doc</code> now correctly
defaults to <code class="code_inline-code__Bq7ot">True</code>. It previously defaulted to <code class="code_inline-code__Bq7ot">None</code>.</p>
</li>
<li class="list_li__sfx_z">
<p>The keyword argument <code class="code_inline-code__Bq7ot">n_threads</code> on the <code class="code_inline-code__Bq7ot">.pipe</code> methods is now deprecated, as
the v2.x models cannot release the global interpreter lock. (Future versions
may introduce a <code class="code_inline-code__Bq7ot">n_process</code> argument for parallel inference via
multiprocessing.)</p>
</li>
<li class="list_li__sfx_z">
<p>The <code class="code_inline-code__Bq7ot">Doc.print_tree</code> method is now deprecated. If you need a custom nested
JSON representation of a <code class="code_inline-code__Bq7ot">Doc</code> object, you might want to write your own helper
function. For a simple and consistent JSON representation of the <code class="code_inline-code__Bq7ot">Doc</code> object
and its annotations, you can now use the <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/doc#to_json"><code class="code_inline-code__Bq7ot">Doc.to_json</code></a>
method. Going forward, this method will output the same format as the JSON
training data expected by <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/cli#train"><code class="code_inline-code__Bq7ot">spacy train</code></a>.</p>
</li>
<li class="list_li__sfx_z">
<p>The <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/cli#train"><code class="code_inline-code__Bq7ot">spacy train</code></a> command now lets you specify a
comma-separated list of pipeline component names, instead of separate flags
like <code class="code_inline-code__Bq7ot">--no-parser</code> to disable components. This is more flexible and also
handles custom components out-of-the-box.</p>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-diff language-diff"></code></pre>
</li>
<li class="list_li__sfx_z">
<p>The <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/cli#init-model"><code class="code_inline-code__Bq7ot">spacy init-model</code></a> command now uses a <code class="code_inline-code__Bq7ot">--jsonl-loc</code>
argument to pass in a a newline-delimited JSON (JSONL) file containing one
lexical entry per line instead of a separate <code class="code_inline-code__Bq7ot">--freqs-loc</code> and
<code class="code_inline-code__Bq7ot">--clusters-loc</code>.</p>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-diff language-diff"></code></pre>
</li>
<li class="list_li__sfx_z">
<p>Also note that some of the model licenses have changed:
<a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/models/it#it_core_news_sm"><code class="code_inline-code__Bq7ot">it_core_news_sm</code></a> is now correctly licensed
under CC BY-NC-SA 3.0, and all <a class="link_root__1Me7D link_with-icon__NAVDA" href="/models/en"><span class="link_source-text__VDP74">English</span></a> and <a class="link_root__1Me7D link_with-icon__NAVDA" href="/models/de"><span class="link_source-text__VDP74">German</span></a>
models are now published under the MIT license.</p>
</li>
</ul></section><div class="grid_root__EfDZl grid_spacing__fhBCv grid_half__xoJZs"><div style="margin-top:var(--spacing-lg)"><a class="link_root__1Me7D button_root__jwipc button_secondary__ukZAk" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/tree/master/website/docs/usage/v2-1.mdx">Suggest edits</a></div></div></article><div class="main_asides__RITE5" style="background-image:url(/_next/static/media/pattern_blue.d167bed5.png"></div><footer class="footer_root__zlkjP"><div class="grid_root__EfDZl footer_content__LaE1F grid_narrow__x_6xS grid_spacing__fhBCv grid_third__edHuB"><section><ul class="footer_column__DPe22"><li class="footer_label__xK7_s">spaCy</li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/usage">Usage</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/models">Models</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/api">API Reference</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://course.spacy.io">Online Course</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://explosion.ai/custom-solutions">Custom Solutions</a></li></ul></section><section><ul class="footer_column__DPe22"><li class="footer_label__xK7_s">Community</li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/universe">Universe</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/discussions">GitHub Discussions</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/issues">Issue Tracker</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="http://stackoverflow.com/questions/tagged/spacy">Stack Overflow</a></li></ul></section><section><ul class="footer_column__DPe22"><li class="footer_label__xK7_s">Connect</li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://twitter.com/spacy_io">Twitter</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy">GitHub</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://youtube.com/c/ExplosionAI">YouTube</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://explosion.ai/blog">Blog</a></li></ul></section><section class="footer_full___icln"><ul class="footer_column__DPe22"><li class="footer_label__xK7_s">Stay in the loop!</li><li>Receive updates about new releases, tutorials and more.</li><li><form id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" action="//spacy.us12.list-manage.com/subscribe/post?u=83b0498b1e7fa3c91ce68c3f1&amp;amp;id=ecc82e0493" method="post" target="_blank" novalidate=""><div style="position:absolute;left:-5000px" aria-hidden="true"><input type="text" name="b_83b0498b1e7fa3c91ce68c3f1_ecc82e0493" tabindex="-1" value=""/></div><div class="newsletter_root__uh6MU"><input class="newsletter_input___SMSB" id="mce-EMAIL" type="email" name="EMAIL" placeholder="Your email" aria-label="Your email"/><button class="newsletter_button__gKW8E" id="mc-embedded-subscribe" type="submit" name="subscribe">Sign up</button></div></form></li></ul></section></div><div class="footer_content__LaE1F footer_copy__rbjvc"><span>Â© 2016-<!-- -->2023<!-- --> <a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://explosion.ai">Explosion</a></span><a class="link_root__1Me7D footer_logo__BthsJ link_no-link-layout__RPvod" aria-label="Explosion" href="https://explosion.ai"></a><a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://explosion.ai/legal">Legal / Imprint</a></div></footer></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"What's New in v2.1","teaser":"New features, backwards incompatibilities and migration guide","menu":[["New Features","features"],["Backwards Incompatibilities","incompat"]],"slug":"/usage/v2-1","mdx":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    section: \"section\",\n    h2: \"h2\",\n    p: \"p\",\n    a: \"a\",\n    h3: \"h3\",\n    blockquote: \"blockquote\",\n    h4: \"h4\",\n    pre: \"pre\",\n    code: \"code\",\n    strong: \"strong\",\n    ul: \"ul\",\n    li: \"li\"\n  }, _provideComponents(), props.components), {InlineCode, Infobox} = _components;\n  if (!Infobox) _missingMdxReference(\"Infobox\", true);\n  if (!InlineCode) _missingMdxReference(\"InlineCode\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.section, {\n      id: \"section-features\",\n      children: [_jsx(_components.h2, {\n        id: \"features\",\n        hidden: \"true\",\n        children: \"New Features \"\n      }), _jsxs(_components.p, {\n        children: [\"spaCy v2.1 has focussed primarily on stability and performance, solidifying the\\ndesign changes introduced in \", _jsx(_components.a, {\n          href: \"/usage/v2\",\n          children: \"v2.0\"\n        }), \". As well as smaller models,\\nfaster runtime, and many bug fixes, v2.1 also introduces experimental support\\nfor some exciting new NLP innovations. For the full changelog, see the\\n\", _jsx(_components.a, {\n          href: \"https://github.com/explosion/spaCy/releases/tag/v2.1.0\",\n          children: \"release notes on GitHub\"\n        }), \".\\nFor more details and a behind-the-scenes look at the new release,\\n\", _jsx(_components.a, {\n          href: \"https://explosion.ai/blog/spacy-v2-1\",\n          children: \"see our blog post\"\n        }), \".\"]\n      }), _jsx(_components.h3, {\n        id: \"pretraining\",\n        tag: \"experimental\",\n        children: \"BERT/ULMFit/Elmo-style pre-training \"\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-bash\",\n            lang: \"bash\",\n            children: \"$ python -m spacy pretrain ./raw_text.jsonl\\nen_core_web_lg ./pretrained-model\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsxs(_components.p, {\n        children: [\"spaCy v2.1 introduces a new CLI command, \", _jsx(InlineCode, {\n          children: \"spacy pretrain\"\n        }), \", that can make your\\nmodels much more accurate. Itâ€™s especially useful when you have \", _jsx(_components.strong, {\n          children: \"limited\\ntraining data\"\n        }), \". The \", _jsx(InlineCode, {\n          children: \"spacy pretrain\"\n        }), \" command lets you use transfer learning to\\ninitialize your models with information from raw text, using a language model\\nobjective similar to the one used in Googleâ€™s BERT system. Weâ€™ve taken\\nparticular care to ensure that pretraining works well even with spaCyâ€™s small\\ndefault architecture sizes, so you donâ€™t have to compromise on efficiency to use\\nit.\"]\n      }), _jsx(Infobox, {\n        children: _jsxs(_components.p, {\n          children: [_jsx(_components.strong, {\n            children: \"API:\"\n          }), \" \", _jsx(_components.a, {\n            href: \"/api/cli#pretrain\",\n            children: _jsx(InlineCode, {\n              children: \"spacy pretrain\"\n            })\n          }), \" **Usage: **\\n\", _jsx(_components.a, {\n            href: \"/usage/training#transfer-learning\",\n            children: \"Improving accuracy with transfer learning\"\n          })]\n        })\n      }), _jsx(_components.h3, {\n        id: \"matcher-api\",\n        children: \"Extended match pattern API \"\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-python\",\n            lang: \"python\",\n            children: \"# Matches \\\"love cats\\\" or \\\"likes flowers\\\"\\npattern1 = [{\\\"LEMMA\\\": {\\\"IN\\\": [\\\"like\\\", \\\"love\\\"]}}, {\\\"POS\\\": \\\"NOUN\\\"}]\\n# Matches tokens of length \u003e= 10\\npattern2 = [{\\\"LENGTH\\\": {\\\"\u003e=\\\": 10}}]\\n# Matches custom attribute with regex\\npattern3 = [{\\\"_\\\": {\\\"country\\\": {\\\"REGEX\\\": \\\"^([Uu](\\\\\\\\.?|nited) ?[Ss](\\\\\\\\.?|tates)\\\"}}}]\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsxs(_components.p, {\n        children: [\"Instead of mapping to a single value, token patterns can now also map to a\\n\", _jsx(_components.strong, {\n          children: \"dictionary of properties\"\n        }), \". For example, to specify that the value of a lemma\\nshould be part of a list of values, or to set a minimum character length. It now\\nalso supports a \", _jsx(InlineCode, {\n          children: \"REGEX\"\n        }), \" property, as well as set membership via \", _jsx(InlineCode, {\n          children: \"IN\"\n        }), \" and\\n\", _jsx(InlineCode, {\n          children: \"NOT_IN\"\n        }), \", custom extension attributes via \", _jsx(InlineCode, {\n          children: \"_\"\n        }), \" and rich comparison for numeric\\nvalues.\"]\n      }), _jsx(Infobox, {\n        children: _jsxs(_components.p, {\n          children: [_jsx(_components.strong, {\n            children: \"API:\"\n          }), \" \", _jsx(_components.a, {\n            href: \"/api/matcher\",\n            children: _jsx(InlineCode, {\n              children: \"Matcher\"\n            })\n          }), \" **Usage: **\\n\", _jsx(_components.a, {\n            href: \"/usage/rule-based-matching#adding-patterns-attributes-extended\",\n            children: \"Extended pattern syntax and attributes\"\n          }), \",\\n\", _jsx(_components.a, {\n            href: \"/usage/rule-based-matching#regex\",\n            children: \"Regular expressions\"\n          })]\n        })\n      }), _jsx(_components.h3, {\n        id: \"entity-ruler\",\n        children: \"Easy rule-based entity recognition \"\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-python\",\n            lang: \"python\",\n            children: \"from spacy.pipeline import EntityRuler\\nruler = EntityRuler(nlp)\\nruler.add_patterns([{\\\"label\\\": \\\"ORG\\\", \\\"pattern\\\": \\\"Apple\\\"}])\\nnlp.add_pipe(ruler, before=\\\"ner\\\")\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsxs(_components.p, {\n        children: [\"The \", _jsx(InlineCode, {\n          children: \"EntityRuler\"\n        }), \" is an exciting new component that lets you add named entities\\nbased on pattern dictionaries, and makes it easy to combine rule-based and\\nstatistical named entity recognition for even more powerful models. Entity rules\\ncan be phrase patterns for exact string matches, or token patterns for full\\nflexibility.\"]\n      }), _jsx(Infobox, {\n        children: _jsxs(_components.p, {\n          children: [_jsx(_components.strong, {\n            children: \"API:\"\n          }), \" \", _jsx(_components.a, {\n            href: \"/api/entityruler\",\n            children: _jsx(InlineCode, {\n              children: \"EntityRuler\"\n            })\n          }), \" **Usage: **\\n\", _jsx(_components.a, {\n            href: \"/usage/rule-based-matching#entityruler\",\n            children: \"Rule-based entity recognition\"\n          })]\n        })\n      }), _jsx(_components.h3, {\n        id: \"phrasematcher\",\n        children: \"Phrase matching with other attributes \"\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-python\",\n            lang: \"python\",\n            children: \"matcher = PhraseMatcher(nlp.vocab, attr=\\\"POS\\\")\\nmatcher.add(\\\"PATTERN\\\", None, nlp(\\\"I love cats\\\"))\\ndoc = nlp(\\\"You like dogs\\\")\\nmatches = matcher(doc)\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsxs(_components.p, {\n        children: [\"By default, the \", _jsx(InlineCode, {\n          children: \"PhraseMatcher\"\n        }), \" will match on the verbatim token text, e.g.\\n\", _jsx(InlineCode, {\n          children: \"Token.text\"\n        }), \". By setting the \", _jsx(InlineCode, {\n          children: \"attr\"\n        }), \" argument on initialization, you can change\\n\", _jsx(_components.strong, {\n          children: \"which token attribute the matcher should use\"\n        }), \" when comparing the phrase\\npattern to the matched \", _jsx(InlineCode, {\n          children: \"Doc\"\n        }), \". For example, \", _jsx(InlineCode, {\n          children: \"LOWER\"\n        }), \" for case-insensitive matches\\nor \", _jsx(InlineCode, {\n          children: \"POS\"\n        }), \" for finding sequences of the same part-of-speech tags.\"]\n      }), _jsx(Infobox, {\n        children: _jsxs(_components.p, {\n          children: [_jsx(_components.strong, {\n            children: \"API:\"\n          }), \" \", _jsx(_components.a, {\n            href: \"/api/phrasematcher\",\n            children: _jsx(InlineCode, {\n              children: \"PhraseMatcher\"\n            })\n          }), \" **Usage: **\\n\", _jsx(_components.a, {\n            href: \"/usage/rule-based-matching#phrasematcher-attrs\",\n            children: \"Matching on other token attributes\"\n          })]\n        })\n      }), _jsx(_components.h3, {\n        id: \"retokenizer\",\n        children: \"Retokenizer for merging and splitting \"\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-python\",\n            lang: \"python\",\n            children: \"doc = nlp(\\\"I like David Bowie\\\")\\nwith doc.retokenize() as retokenizer:\\n    attrs = {\\\"LEMMA\\\": \\\"David Bowie\\\"}\\n    retokenizer.merge(doc[2:4], attrs=attrs)\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsxs(_components.p, {\n        children: [\"The new \", _jsx(InlineCode, {\n          children: \"Doc.retokenize\"\n        }), \" context manager allows merging spans of multiple tokens\\ninto one single token, and splitting single tokens into multiple tokens.\\nModifications to the \", _jsx(InlineCode, {\n          children: \"Doc\"\n        }), \"â€™s tokenization are stored, and then made all at once\\nwhen the context manager exits. This is much more efficient, and less\\nerror-prone. \", _jsx(InlineCode, {\n          children: \"Doc.merge\"\n        }), \" and \", _jsx(InlineCode, {\n          children: \"Span.merge\"\n        }), \" still work, but theyâ€™re considered\\ndeprecated.\"]\n      }), _jsx(Infobox, {\n        children: _jsxs(_components.p, {\n          children: [_jsx(_components.strong, {\n            children: \"API:\"\n          }), \" \", _jsx(_components.a, {\n            href: \"/api/doc#retokenize\",\n            children: _jsx(InlineCode, {\n              children: \"Doc.retokenize\"\n            })\n          }), \",\\n\", _jsx(_components.a, {\n            href: \"/api/doc#retokenizer.merge\",\n            children: _jsx(InlineCode, {\n              children: \"Retokenizer.merge\"\n            })\n          }), \",\\n\", _jsx(_components.a, {\n            href: \"/api/doc#retokenizer.split\",\n            children: _jsx(InlineCode, {\n              children: \"Retokenizer.split\"\n            })\n          }), _jsx(\"br\", {}), \"**Usage:\\n**\", _jsx(_components.a, {\n            href: \"/usage/linguistic-features#retokenization\",\n            children: \"Merging and splitting\"\n          })]\n        })\n      }), _jsx(_components.h3, {\n        id: \"entry-points\",\n        children: \"Components and languages via entry points \"\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-python\",\n            lang: \"python\",\n            children: \"from setuptools import setup\\nsetup(\\n    name=\\\"custom_extension_package\\\",\\n    entry_points={\\n        \\\"spacy_factories\\\": [\\\"your_component = component:ComponentFactory\\\"]\\n        \\\"spacy_languages\\\": [\\\"xyz = language:XYZLanguage\\\"]\\n   }\\n)\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsxs(_components.p, {\n        children: [\"Using entry points, model packages and extension packages can now define their\\nown \", _jsx(InlineCode, {\n          children: \"\\\"spacy_factories\\\"\"\n        }), \" and \", _jsx(InlineCode, {\n          children: \"\\\"spacy_languages\\\"\"\n        }), \", which will be added to the\\nbuilt-in factories and languages. If a package in the same environment exposes\\nspaCy entry points, all of this happens automatically and no further user action\\nis required.\"]\n      }), _jsx(Infobox, {\n        children: _jsxs(_components.p, {\n          children: [_jsx(_components.strong, {\n            children: \"Usage:\"\n          }), \" \", _jsx(_components.a, {\n            href: \"/usage/saving-loading#entry-points\",\n            children: \"Using entry points\"\n          })]\n        })\n      }), _jsx(_components.h3, {\n        id: \"docs\",\n        children: \"Improved documentation \"\n      }), _jsxs(_components.p, {\n        children: [\"Although it looks pretty much the same, weâ€™ve rebuilt the entire documentation\\nusing \", _jsx(_components.a, {\n          href: \"https://www.gatsbyjs.org/\",\n          children: \"Gatsby\"\n        }), \" and \", _jsx(_components.a, {\n          href: \"https://mdxjs.com/\",\n          children: \"MDX\"\n        }), \". Itâ€™s\\nnow an even faster progressive web app and allows us to write all content\\nentirely \", _jsx(_components.strong, {\n          children: \"in Markdown\"\n        }), \", without having to compromise on easy-to-use custom UI\\ncomponents. Weâ€™re hoping that the Markdown source will make it even easier to\\ncontribute to the documentation. For more details, check out the\\n\", _jsx(_components.a, {\n          href: \"/styleguide\",\n          children: \"styleguide\"\n        }), \" and\\n\", _jsx(_components.a, {\n          href: \"https://github.com/explosion/spacy/tree/v2.x/website\",\n          children: \"source\"\n        }), \". While converting\\nthe pages to Markdown, weâ€™ve also fixed a bunch of typos, improved the existing\\npages and added some new content:\"]\n      }), _jsxs(_components.ul, {\n        children: [\"\\n\", _jsxs(_components.li, {\n          children: [_jsx(_components.strong, {\n            children: \"Usage Guide:\"\n          }), \" \", _jsx(_components.a, {\n            href: \"/usage/rule-based-matching\",\n            children: \"Rule-based Matching\"\n          }), _jsx(\"br\", {}), \"How to\\nuse the \", _jsx(InlineCode, {\n            children: \"Matcher\"\n          }), \", \", _jsx(InlineCode, {\n            children: \"PhraseMatcher\"\n          }), \" and the new \", _jsx(InlineCode, {\n            children: \"EntityRuler\"\n          }), \", and write\\npowerful components to combine statistical models and rules.\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [_jsx(_components.strong, {\n            children: \"Usage Guide:\"\n          }), \" \", _jsx(_components.a, {\n            href: \"/usage/saving-loading\",\n            children: \"Saving and Loading\"\n          }), _jsx(\"br\", {}), \"Everything\\nyou need to know about serialization, and how to save and load pipeline\\ncomponents, package your spaCy models as Python modules and use entry points.\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"**Usage Guide: **\\n\", _jsx(_components.a, {\n            href: \"/usage/linguistic-features#retokenization\",\n            children: \"Merging and Splitting\"\n          }), _jsx(\"br\", {}), \"How to\\nretokenize a \", _jsx(InlineCode, {\n            children: \"Doc\"\n          }), \" using the new \", _jsx(InlineCode, {\n            children: \"retokenize\"\n          }), \" context manager and merge spans\\ninto single tokens and split single tokens into multiple.\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [_jsx(_components.strong, {\n            children: \"Universe:\"\n          }), \" \", _jsx(_components.a, {\n            href: \"/universe/category/videos\",\n            children: \"Videos\"\n          }), \" and\\n\", _jsx(_components.a, {\n            href: \"/universe/category/podcasts\",\n            children: \"Podcasts\"\n          })]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [_jsx(_components.strong, {\n            children: \"API:\"\n          }), \" \", _jsx(_components.a, {\n            href: \"/api/entityruler\",\n            children: _jsx(InlineCode, {\n              children: \"EntityRuler\"\n            })\n          })]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [_jsx(_components.strong, {\n            children: \"API:\"\n          }), \" \", _jsx(_components.a, {\n            href: \"/api/sentencizer\",\n            children: _jsx(InlineCode, {\n              children: \"Sentencizer\"\n            })\n          })]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [_jsx(_components.strong, {\n            children: \"API:\"\n          }), \" \", _jsx(_components.a, {\n            href: \"/api/pipeline-functions\",\n            children: \"Pipeline functions\"\n          })]\n        }), \"\\n\"]\n      })]\n    }), \"\\n\", _jsxs(_components.section, {\n      id: \"section-incompat\",\n      children: [_jsx(_components.h2, {\n        id: \"incompat\",\n        children: \"Backwards incompatibilities \"\n      }), _jsx(Infobox, {\n        title: \"Important note on models\",\n        variant: \"warning\",\n        children: _jsxs(_components.p, {\n          children: [\"If youâ€™ve been training \", _jsx(_components.strong, {\n            children: \"your own models\"\n          }), \", youâ€™ll need to \", _jsx(_components.strong, {\n            children: \"retrain\"\n          }), \" them\\nwith the new version. Also donâ€™t forget to upgrade all models to the latest\\nversions. Models for v2.0.x arenâ€™t compatible with models for v2.1.x. To check\\nif all of your models are up to date, you can run the\\n\", _jsx(_components.a, {\n            href: \"/api/cli#validate\",\n            children: _jsx(InlineCode, {\n              children: \"spacy validate\"\n            })\n          }), \" command.\"]\n        })\n      }), _jsxs(_components.ul, {\n        children: [\"\\n\", _jsxs(_components.li, {\n          children: [\"\\n\", _jsxs(_components.p, {\n            children: [\"Due to difficulties linking our new\\n\", _jsx(_components.a, {\n              href: \"https://github.com/explosion/cython-blis\",\n              children: _jsx(InlineCode, {\n                children: \"blis\"\n              })\n            }), \" for faster\\nplatform-independent matrix multiplication, this release currently \", _jsx(_components.strong, {\n              children: \"doesnâ€™t\\nwork on Python 2.7 on Windows\"\n            }), \". We expect this to be corrected in the future.\"]\n          }), \"\\n\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"\\n\", _jsxs(_components.p, {\n            children: [\"While the \", _jsx(_components.a, {\n              href: \"/api/matcher\",\n              children: _jsx(InlineCode, {\n                children: \"Matcher\"\n              })\n            }), \" API is fully backwards compatible, its\\nalgorithm has changed to fix a number of bugs and performance issues. This\\nmeans that the \", _jsx(InlineCode, {\n              children: \"Matcher\"\n            }), \" in v2.1.x may produce different results compared to\\nthe \", _jsx(InlineCode, {\n              children: \"Matcher\"\n            }), \" in v2.0.x.\"]\n          }), \"\\n\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"\\n\", _jsxs(_components.p, {\n            children: [\"The deprecated \", _jsx(_components.a, {\n              href: \"/api/doc#merge\",\n              children: _jsx(InlineCode, {\n                children: \"Doc.merge\"\n              })\n            }), \" and\\n\", _jsx(_components.a, {\n              href: \"/api/span#merge\",\n              children: _jsx(InlineCode, {\n                children: \"Span.merge\"\n              })\n            }), \" methods still work, but you may notice that\\nthey now run slower when merging many objects in a row. Thatâ€™s because the\\nmerging engine was rewritten to be more reliable and to support more efficient\\nmerging \", _jsx(_components.strong, {\n              children: \"in bulk\"\n            }), \". To take advantage of this, you should rewrite your logic\\nto use the \", _jsx(_components.a, {\n              href: \"/api/doc#retokenize\",\n              children: _jsx(InlineCode, {\n                children: \"Doc.retokenize\"\n              })\n            }), \" context manager and perform\\nas many merges as possible together in the \", _jsx(InlineCode, {\n              children: \"with\"\n            }), \" block.\"]\n          }), \"\\n\", _jsx(_components.pre, {\n            children: _jsx(_components.code, {\n              className: \"language-diff\",\n              lang: \"diff\",\n              children: \"- doc[1:5].merge()\\n- doc[6:8].merge()\\n+ with doc.retokenize() as retokenizer:\\n+     retokenizer.merge(doc[1:5])\\n+     retokenizer.merge(doc[6:8])\\n\"\n            })\n          }), \"\\n\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"\\n\", _jsxs(_components.p, {\n            children: [\"The serialization methods \", _jsx(InlineCode, {\n              children: \"to_disk\"\n            }), \", \", _jsx(InlineCode, {\n              children: \"from_disk\"\n            }), \", \", _jsx(InlineCode, {\n              children: \"to_bytes\"\n            }), \" and \", _jsx(InlineCode, {\n              children: \"from_bytes\"\n            }), \"\\nnow support a single \", _jsx(InlineCode, {\n              children: \"exclude\"\n            }), \" argument to provide a list of string names to\\nexclude. The docs have been updated to list the available serialization fields\\nfor each class. The \", _jsx(InlineCode, {\n              children: \"disable\"\n            }), \" argument on the \", _jsx(_components.a, {\n              href: \"/api/language\",\n              children: _jsx(InlineCode, {\n                children: \"Language\"\n              })\n            }), \"\\nserialization methods has been renamed to \", _jsx(InlineCode, {\n              children: \"exclude\"\n            }), \" for consistency.\"]\n          }), \"\\n\", _jsx(_components.pre, {\n            children: _jsx(_components.code, {\n              className: \"language-diff\",\n              lang: \"diff\",\n              children: \"- nlp.to_disk(\\\"/path\\\", disable=[\\\"parser\\\", \\\"ner\\\"])\\n+ nlp.to_disk(\\\"/path\\\", exclude=[\\\"parser\\\", \\\"ner\\\"])\\n- data = nlp.tokenizer.to_bytes(vocab=False)\\n+ data = nlp.tokenizer.to_bytes(exclude=[\\\"vocab\\\"])\\n\"\n            })\n          }), \"\\n\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"\\n\", _jsxs(_components.p, {\n            children: [\"The .pos value for several common English words has changed, due to\\ncorrections to long-standing mistakes in the English tag map (see\\n\", _jsx(_components.a, {\n              href: \"https://github.com/explosion/spaCy/issues/593\",\n              children: \"issue #593\"\n            }), \" and\\n\", _jsx(_components.a, {\n              href: \"https://github.com/explosion/spaCy/issues/3311\",\n              children: \"issue #3311\"\n            }), \" for details).\"]\n          }), \"\\n\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"\\n\", _jsxs(_components.p, {\n            children: [\"For better compatibility with the Universal Dependencies data, the lemmatizer\\nnow preserves capitalization, e.g. for proper nouns. See\\n\", _jsx(_components.a, {\n              href: \"https://github.com/explosion/spaCy/issues/3256\",\n              children: \"issue #3256\"\n            }), \" for details.\"]\n          }), \"\\n\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"\\n\", _jsxs(_components.p, {\n            children: [\"The built-in rule-based sentence boundary detector is now only called\\n\", _jsx(InlineCode, {\n              children: \"\\\"sentencizer\\\"\"\n            }), \" â€“ the name \", _jsx(InlineCode, {\n              children: \"\\\"sbd\\\"\"\n            }), \" is deprecated.\"]\n          }), \"\\n\", _jsx(_components.pre, {\n            children: _jsx(_components.code, {\n              className: \"language-diff\",\n              lang: \"diff\",\n              children: \"- sentence_splitter = nlp.create_pipe(\\\"sbd\\\")\\n+ sentence_splitter = nlp.create_pipe(\\\"sentencizer\\\")\\n\"\n            })\n          }), \"\\n\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"\\n\", _jsxs(_components.p, {\n            children: [\"The \", _jsx(InlineCode, {\n              children: \"is_sent_start\"\n            }), \" attribute of the first token in a \", _jsx(InlineCode, {\n              children: \"Doc\"\n            }), \" now correctly\\ndefaults to \", _jsx(InlineCode, {\n              children: \"True\"\n            }), \". It previously defaulted to \", _jsx(InlineCode, {\n              children: \"None\"\n            }), \".\"]\n          }), \"\\n\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"\\n\", _jsxs(_components.p, {\n            children: [\"The keyword argument \", _jsx(InlineCode, {\n              children: \"n_threads\"\n            }), \" on the \", _jsx(InlineCode, {\n              children: \".pipe\"\n            }), \" methods is now deprecated, as\\nthe v2.x models cannot release the global interpreter lock. (Future versions\\nmay introduce a \", _jsx(InlineCode, {\n              children: \"n_process\"\n            }), \" argument for parallel inference via\\nmultiprocessing.)\"]\n          }), \"\\n\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"\\n\", _jsxs(_components.p, {\n            children: [\"The \", _jsx(InlineCode, {\n              children: \"Doc.print_tree\"\n            }), \" method is now deprecated. If you need a custom nested\\nJSON representation of a \", _jsx(InlineCode, {\n              children: \"Doc\"\n            }), \" object, you might want to write your own helper\\nfunction. For a simple and consistent JSON representation of the \", _jsx(InlineCode, {\n              children: \"Doc\"\n            }), \" object\\nand its annotations, you can now use the \", _jsx(_components.a, {\n              href: \"/api/doc#to_json\",\n              children: _jsx(InlineCode, {\n                children: \"Doc.to_json\"\n              })\n            }), \"\\nmethod. Going forward, this method will output the same format as the JSON\\ntraining data expected by \", _jsx(_components.a, {\n              href: \"/api/cli#train\",\n              children: _jsx(InlineCode, {\n                children: \"spacy train\"\n              })\n            }), \".\"]\n          }), \"\\n\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"\\n\", _jsxs(_components.p, {\n            children: [\"The \", _jsx(_components.a, {\n              href: \"/api/cli#train\",\n              children: _jsx(InlineCode, {\n                children: \"spacy train\"\n              })\n            }), \" command now lets you specify a\\ncomma-separated list of pipeline component names, instead of separate flags\\nlike \", _jsx(InlineCode, {\n              children: \"--no-parser\"\n            }), \" to disable components. This is more flexible and also\\nhandles custom components out-of-the-box.\"]\n          }), \"\\n\", _jsx(_components.pre, {\n            children: _jsx(_components.code, {\n              className: \"language-diff\",\n              lang: \"diff\",\n              children: \"- $ spacy train en /output train_data.json dev_data.json --no-parser\\n+ $ spacy train en /output train_data.json dev_data.json --pipeline tagger,ner\\n\"\n            })\n          }), \"\\n\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"\\n\", _jsxs(_components.p, {\n            children: [\"The \", _jsx(_components.a, {\n              href: \"/api/cli#init-model\",\n              children: _jsx(InlineCode, {\n                children: \"spacy init-model\"\n              })\n            }), \" command now uses a \", _jsx(InlineCode, {\n              children: \"--jsonl-loc\"\n            }), \"\\nargument to pass in a a newline-delimited JSON (JSONL) file containing one\\nlexical entry per line instead of a separate \", _jsx(InlineCode, {\n              children: \"--freqs-loc\"\n            }), \" and\\n\", _jsx(InlineCode, {\n              children: \"--clusters-loc\"\n            }), \".\"]\n          }), \"\\n\", _jsx(_components.pre, {\n            children: _jsx(_components.code, {\n              className: \"language-diff\",\n              lang: \"diff\",\n              children: \"- $ spacy init-model en ./model --freqs-loc ./freqs.txt --clusters-loc ./clusters.txt\\n+ $ spacy init-model en ./model --jsonl-loc ./vocab.jsonl\\n\"\n            })\n          }), \"\\n\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"\\n\", _jsxs(_components.p, {\n            children: [\"Also note that some of the model licenses have changed:\\n\", _jsx(_components.a, {\n              href: \"/models/it#it_core_news_sm\",\n              children: _jsx(InlineCode, {\n                children: \"it_core_news_sm\"\n              })\n            }), \" is now correctly licensed\\nunder CC BY-NC-SA 3.0, and all \", _jsx(_components.a, {\n              href: \"/models/en\",\n              children: \"English\"\n            }), \" and \", _jsx(_components.a, {\n              href: \"/models/de\",\n              children: \"German\"\n            }), \"\\nmodels are now published under the MIT license.\"]\n          }), \"\\n\"]\n        }), \"\\n\"]\n      })]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{"title":"What's New in v2.1","teaser":"New features, backwards incompatibilities and migration guide","menu":[["New Features","features"],["Backwards Incompatibilities","incompat"]]},"scope":{}},"sectionTitle":"Usage Documentation","theme":"blue","section":"usage","apiDetails":{"stringName":null,"baseClass":null,"trainable":null},"isIndex":false,"next":null},"__N_SSG":true},"page":"/[...listPathPage]","query":{"listPathPage":["usage","v2-1"]},"buildId":"Ugre-usgT1EZhnSeYcBR9","isFallback":false,"dynamicIds":[728],"gsp":true,"scriptLoader":[]}</script></body></html>