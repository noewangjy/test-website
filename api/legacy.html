<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="shortcut icon" href="/icons/icon-192x192.png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1, maximum-scale=5.0, shrink-to-fit=no, viewport-fit=cover"/><meta name="theme-color" content="#09a3d5"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png"/><title>Legacy functions and architectures · spaCy API Documentation</title><meta name="description" content="Archived implementations available through spacy-legacy"/><meta property="og:title" content="Legacy functions and architectures · spaCy API Documentation"/><meta property="og:description" content="Archived implementations available through spacy-legacy"/><meta property="og:type" content="website"/><meta property="og:site_name" content="Legacy functions and architectures"/><meta property="og:image" content="[object Object]"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:image" content="[object Object]"/><meta name="twitter:creator" content="@spacy_io"/><meta name="twitter:site" content="@spacy_io"/><meta name="twitter:title" content="Legacy functions and architectures · spaCy API Documentation"/><meta name="twitter:description" content="Archived implementations available through spacy-legacy"/><meta name="docsearch:language" content="en"/><meta name="next-head-count" content="24"/><link rel="preload" href="/_next/static/css/8f0b94edbc18d62d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8f0b94edbc18d62d.css" data-n-g=""/><link rel="preload" href="/_next/static/css/e6995e0e8addcf99.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e6995e0e8addcf99.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script defer="" src="/_next/static/chunks/262.c647d33d06232ef6.js"></script><script defer="" src="/_next/static/chunks/728.cf6ba0da2700fa1b.js"></script><script src="/_next/static/chunks/webpack-8161fc2bb14cec39.js" defer=""></script><script src="/_next/static/chunks/framework-3b5a00d5d7e8d93b.js" defer=""></script><script src="/_next/static/chunks/main-a0f603ce323043fd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-ee1fab0e25bb912e.js" defer=""></script><script src="/_next/static/chunks/94-57434c8b7a6c3878.js" defer=""></script><script src="/_next/static/chunks/128-76b45627a109219b.js" defer=""></script><script src="/_next/static/chunks/pages/%5B...listPathPage%5D-45eea57fe8c2902c.js" defer=""></script><script src="/_next/static/2lY2cUyEfZosk4VLgkHb2/_buildManifest.js" defer=""></script><script src="/_next/static/2lY2cUyEfZosk4VLgkHb2/_ssgManifest.js" defer=""></script></head><body class="theme-blue"><div id="__next"><div class="theme-green"><nav class="navigation_root__yPL8O"><span class="navigation_has-alert__s0Drf"><a class="link_root__1Me7D link_no-link-layout__RPvod" aria-label="spaCy" href="/"><h1 class="navigation_title__pm49s">spaCy</h1></a> <span class="navigation_alert__ZOXon"><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/usage/v3-5"><strong>💥 Out now:</strong> spaCy v3.5</a></span></span><div class="navigation_menu__ZMJxN"><select class="dropdown_root__3uiQq navigation_dropdown__4j4pI"><option value="title" disabled="">Menu</option><option value="/usage">Usage</option><option value="/models">Models</option><option value="/api" selected="">API</option><option value="/universe">Universe</option></select><ul class="navigation_list__DCzqi"><li class="navigation_item__ln1O1"><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/usage">Usage</a></li><li class="navigation_item__ln1O1"><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/models">Models</a></li><li class="navigation_item__ln1O1 navigation_is-active__RjVJG"><a class="link_root__1Me7D link_no-link-layout__RPvod" tabindex="-1" href="/api">API</a></li><li class="navigation_item__ln1O1"><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/universe">Universe</a></li><li class="navigation_item__ln1O1 navigation_github__MpFNv"><span><a href="https://github.com/explosion/spaCy" data-size="large" data-show-count="true" aria-label="Star spaCy on GitHub"></a></span></li></ul><div class="navigation_search__BKZCn"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><progress class="progress_root__9huWN" value="0" max="100"></progress></nav><menu class="sidebar sidebar_root__s2No7"><h1 hidden="" aria-hidden="true" class="h0 sidebar_active-heading___dkf9">Legacy</h1><div class="sidebar_dropdown__vyqjz"><select class="dropdown_root__3uiQq sidebar_dropdown-select__Nwbq9"><option disabled="">Select page...</option><option value="/api">Overview<!-- --> › <!-- -->Library Architecture</option><option value="/api/architectures">Overview<!-- --> › <!-- -->Model Architectures</option><option value="/api/data-formats">Overview<!-- --> › <!-- -->Data Formats</option><option value="/api/cli">Overview<!-- --> › <!-- -->Command Line</option><option value="/api/top-level">Overview<!-- --> › <!-- -->Functions</option><option value="/api/doc">Containers<!-- --> › <!-- -->Doc</option><option value="/api/docbin">Containers<!-- --> › <!-- -->DocBin</option><option value="/api/example">Containers<!-- --> › <!-- -->Example</option><option value="/api/language">Containers<!-- --> › <!-- -->Language</option><option value="/api/lexeme">Containers<!-- --> › <!-- -->Lexeme</option><option value="/api/span">Containers<!-- --> › <!-- -->Span</option><option value="/api/spangroup">Containers<!-- --> › <!-- -->SpanGroup</option><option value="/api/token">Containers<!-- --> › <!-- -->Token</option><option value="/api/attributeruler">Pipeline<!-- --> › <!-- -->AttributeRuler</option><option value="/api/coref">Pipeline<!-- --> › <!-- -->CoreferenceResolver</option><option value="/api/dependencyparser">Pipeline<!-- --> › <!-- -->DependencyParser</option><option value="/api/edittreelemmatizer">Pipeline<!-- --> › <!-- -->EditTreeLemmatizer</option><option value="/api/entitylinker">Pipeline<!-- --> › <!-- -->EntityLinker</option><option value="/api/entityrecognizer">Pipeline<!-- --> › <!-- -->EntityRecognizer</option><option value="/api/entityruler">Pipeline<!-- --> › <!-- -->EntityRuler</option><option value="/api/lemmatizer">Pipeline<!-- --> › <!-- -->Lemmatizer</option><option value="/api/morphologizer">Pipeline<!-- --> › <!-- -->Morphologizer</option><option value="/api/sentencerecognizer">Pipeline<!-- --> › <!-- -->SentenceRecognizer</option><option value="/api/sentencizer">Pipeline<!-- --> › <!-- -->Sentencizer</option><option value="/api/spancategorizer">Pipeline<!-- --> › <!-- -->SpanCategorizer</option><option value="/api/span-resolver">Pipeline<!-- --> › <!-- -->SpanResolver</option><option value="/api/spanruler">Pipeline<!-- --> › <!-- -->SpanRuler</option><option value="/api/tagger">Pipeline<!-- --> › <!-- -->Tagger</option><option value="/api/textcategorizer">Pipeline<!-- --> › <!-- -->TextCategorizer</option><option value="/api/tok2vec">Pipeline<!-- --> › <!-- -->Tok2Vec</option><option value="/api/tokenizer">Pipeline<!-- --> › <!-- -->Tokenizer</option><option value="/api/pipe">Pipeline<!-- --> › <!-- -->TrainablePipe</option><option value="/api/transformer">Pipeline<!-- --> › <!-- -->Transformer</option><option value="/api/pipeline-functions">Pipeline<!-- --> › <!-- -->Other Functions</option><option value="/api/dependencymatcher">Matchers<!-- --> › <!-- -->DependencyMatcher</option><option value="/api/matcher">Matchers<!-- --> › <!-- -->Matcher</option><option value="/api/phrasematcher">Matchers<!-- --> › <!-- -->PhraseMatcher</option><option value="/api/attributes">Other<!-- --> › <!-- -->Attributes</option><option value="/api/corpus">Other<!-- --> › <!-- -->Corpus</option><option value="/api/inmemorylookupkb">Other<!-- --> › <!-- -->InMemoryLookupKB</option><option value="/api/kb">Other<!-- --> › <!-- -->KnowledgeBase</option><option value="/api/lookups">Other<!-- --> › <!-- -->Lookups</option><option value="/api/morphology#morphanalysis">Other<!-- --> › <!-- -->MorphAnalysis</option><option value="/api/morphology">Other<!-- --> › <!-- -->Morphology</option><option value="/api/scorer">Other<!-- --> › <!-- -->Scorer</option><option value="/api/stringstore">Other<!-- --> › <!-- -->StringStore</option><option value="/api/vectors">Other<!-- --> › <!-- -->Vectors</option><option value="/api/vocab">Other<!-- --> › <!-- -->Vocab</option><option value="/api/cython">Cython<!-- --> › <!-- -->Architecture</option><option value="/api/cython-classes">Cython<!-- --> › <!-- -->Classes</option><option value="/api/cython-structs">Cython<!-- --> › <!-- -->Structs</option><option value="/api/legacy" selected="">Legacy<!-- --> › <!-- -->Legacy functions</option></select></div><ul class="sidebar_section__DArOO"><li class="sidebar_label__V3K28">Overview</li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api">Library Architecture</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/architectures">Model Architectures</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/data-formats">Data Formats</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/cli">Command Line</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/top-level">Functions</a></li></ul><ul class="sidebar_section__DArOO"><li class="sidebar_label__V3K28">Containers</li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/doc">Doc</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/docbin">DocBin</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/example">Example</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/language">Language</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/lexeme">Lexeme</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/span">Span</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/spangroup">SpanGroup</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/token">Token</a></li></ul><ul class="sidebar_section__DArOO"><li class="sidebar_label__V3K28">Pipeline</li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/attributeruler">AttributeRuler</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/coref">CoreferenceResolver</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/dependencyparser">DependencyParser</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/edittreelemmatizer">EditTreeLemmatizer</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/entitylinker">EntityLinker</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/entityrecognizer">EntityRecognizer</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/entityruler">EntityRuler</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/lemmatizer">Lemmatizer</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/morphologizer">Morphologizer</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/sentencerecognizer">SentenceRecognizer</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/sentencizer">Sentencizer</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/spancategorizer">SpanCategorizer</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/span-resolver">SpanResolver</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/spanruler">SpanRuler</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/tagger">Tagger</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/textcategorizer">TextCategorizer</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/tok2vec">Tok2Vec</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/tokenizer">Tokenizer</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/pipe">TrainablePipe</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/transformer">Transformer</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/pipeline-functions">Other Functions</a></li></ul><ul class="sidebar_section__DArOO"><li class="sidebar_label__V3K28">Matchers</li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/dependencymatcher">DependencyMatcher</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/matcher">Matcher</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/phrasematcher">PhraseMatcher</a></li></ul><ul class="sidebar_section__DArOO"><li class="sidebar_label__V3K28">Other</li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/attributes">Attributes</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/corpus">Corpus</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/inmemorylookupkb">InMemoryLookupKB</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/kb">KnowledgeBase</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/lookups">Lookups</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/morphology#morphanalysis">MorphAnalysis</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/morphology">Morphology</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/scorer">Scorer</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/stringstore">StringStore</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/vectors">Vectors</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/vocab">Vocab</a></li></ul><ul class="sidebar_section__DArOO"><li class="sidebar_label__V3K28">Cython</li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/cython">Architecture</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/cython-classes">Classes</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/cython-structs">Structs</a></li></ul><ul class="sidebar_section__DArOO"><li class="sidebar_label__V3K28">Legacy</li><li><a class="link_root__1Me7D sidebar_link__sKXFP sidebar_is-active__yVTtL is-active" href="/api/legacy">Legacy functions</a></li></ul></menu><main class="main_root__7f6Tj main_with-sidebar__uH1df main_with-asides__ikQT6"><article class="main_content__8zFCH"><header class="title_root__pS2WQ"><div class="title_corner__S0Hac"><a class="link_root__1Me7D button_root__jwipc button_secondary__ukZAk" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/tree/master/spacy/legacy">Source</a></div><h1 id="_title" class="typography_heading__D82WZ typography_h1__b7dt9 title_h1__l3CW1"><span class="heading-text">Legacy functions and architectures<!-- --> </span></h1><div class="heading-teaser title_teaser__QhwCH">Archived implementations available through spacy-legacy</div></header><section class="section_root__k1hUl"><p>The <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spacy-legacy"><code class="code_inline-code__Bq7ot">spacy-legacy</code></a> package includes
outdated registered functions and architectures. It is installed automatically
as a dependency of spaCy, and provides backwards compatibility for archived
functions that may still be used in projects.</p><p>You can find the detailed documentation of each such legacy function on this
page.</p></section>
<section id="section-architectures" class="section_root__k1hUl"><h2 id="architectures" class="typography_heading__D82WZ typography_h2__hzV3h"><a href="#architectures" class="heading-text typography_permalink__UiIRy">Architectures <!-- --> </a></h2><p>These functions are available from <code class="code_inline-code__Bq7ot">@spacy.registry.architectures</code>.</p><h3 id="Tok2Vec_v1" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#Tok2Vec_v1" class="heading-text typography_permalink__UiIRy">spacy.Tok2Vec.v1 <!-- --> </a></h3><p>The <code class="code_inline-code__Bq7ot">spacy.Tok2Vec.v1</code> architecture was expecting an <code class="code_inline-code__Bq7ot">encode</code> model of type
<code class="code_inline-code__Bq7ot">Model[Floats2D, Floats2D]</code> such as <code class="code_inline-code__Bq7ot">spacy.MaxoutWindowEncoder.v1</code> or
<code class="code_inline-code__Bq7ot">spacy.MishWindowEncoder.v1</code>.</p><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example config<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-ini language-ini"></code></pre>
</div></div></aside><p>Construct a tok2vec model out of two subnetworks: one for embedding and one for
encoding. See the
<a class="link_root__1Me7D" href="https://explosion.ai/blog/deep-learning-formula-nlp">“Embed, Encode, Attend, Predict”</a>
blog post for background.</p><table class="table_root__ZlA_w"><thead><tr class="table_tr__K_tkF"><th class="table_th__QJ9F8">Name</th><th class="table_th__QJ9F8">Description</th></tr></thead><tbody><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">embed</code></td><td class="table_td__rmpJx">Embed tokens into context-independent word vector representations. For example, <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/architectures#CharacterEmbed"><span class="link_source-text__VDP74">CharacterEmbed</span></a> or <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/architectures#MultiHashEmbed"><span class="link_source-text__VDP74">MultiHashEmbed</span></a>. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM code_wrap__b41os" role="code" aria-label="Type annotation"><a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://thinc.ai/docs/api-model">Model</a><span class="code_cli-arg-subtle__IgB5m">[</span>List<span class="code_cli-arg-subtle__IgB5m">[</span><a class="link_root__1Me7D" href="/api/doc">Doc</a><span class="code_cli-arg-subtle__IgB5m">]</span><span class="code_cli-arg-subtle__IgB5m">,</span> List<span class="code_cli-arg-subtle__IgB5m">[</span><a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://thinc.ai/docs/api-types#types">Floats2d</a><span class="code_cli-arg-subtle__IgB5m">]</span><span class="code_cli-arg-subtle__IgB5m">]</span></span></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">encode</code></td><td class="table_td__rmpJx">Encode context into the embeddings, using an architecture such as a CNN, BiLSTM or transformer. For example, <a class="link_root__1Me7D link_with-icon__NAVDA" href="/api/legacy#MaxoutWindowEncoder_v1"><span class="link_source-text__VDP74">MaxoutWindowEncoder.v1</span></a>. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation"><a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://thinc.ai/docs/api-model">Model</a><span class="code_cli-arg-subtle__IgB5m">[</span><a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://thinc.ai/docs/api-types#types">Floats2d</a><span class="code_cli-arg-subtle__IgB5m">,</span><a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://thinc.ai/docs/api-types#types">Floats2d</a><span class="code_cli-arg-subtle__IgB5m">]</span></span></td></tr><tr class="table_tr__K_tkF table_footer__gJRIy table-footer"><td class="table_td__rmpJx"><strong>CREATES</strong></td><td class="table_td__rmpJx">The model using the architecture. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM code_wrap__b41os" role="code" aria-label="Type annotation"><a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://thinc.ai/docs/api-model">Model</a><span class="code_cli-arg-subtle__IgB5m">[</span>List<span class="code_cli-arg-subtle__IgB5m">[</span><a class="link_root__1Me7D" href="/api/doc">Doc</a><span class="code_cli-arg-subtle__IgB5m">]</span><span class="code_cli-arg-subtle__IgB5m">,</span> List<span class="code_cli-arg-subtle__IgB5m">[</span><a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://thinc.ai/docs/api-types#types">Floats2d</a><span class="code_cli-arg-subtle__IgB5m">]</span><span class="code_cli-arg-subtle__IgB5m">]</span></span></td></tr></tbody></table><h3 id="MaxoutWindowEncoder_v1" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#MaxoutWindowEncoder_v1" class="heading-text typography_permalink__UiIRy">spacy.MaxoutWindowEncoder.v1 <!-- --> </a></h3><p>The <code class="code_inline-code__Bq7ot">spacy.MaxoutWindowEncoder.v1</code> architecture was producing a model of type
<code class="code_inline-code__Bq7ot">Model[Floats2D, Floats2D]</code>. Since <code class="code_inline-code__Bq7ot">spacy.MaxoutWindowEncoder.v2</code>, this has been
changed to output type <code class="code_inline-code__Bq7ot code_wrap__b41os">Model[List[Floats2d], List[Floats2d]]</code>.</p><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example config<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-ini language-ini"></code></pre>
</div></div></aside><p>Encode context using convolutions with maxout activation, layer normalization
and residual connections.</p><table class="table_root__ZlA_w"><thead><tr class="table_tr__K_tkF"><th class="table_th__QJ9F8">Name</th><th class="table_th__QJ9F8">Description</th></tr></thead><tbody><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">width</code></td><td class="table_td__rmpJx">The input and output width. These are required to be the same, to allow residual connections. This value will be determined by the width of the inputs. Recommended values are between <code class="code_inline-code__Bq7ot">64</code> and <code class="code_inline-code__Bq7ot">300</code>. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">int</span></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">window_size</code></td><td class="table_td__rmpJx">The number of words to concatenate around each token to construct the convolution. Recommended value is <code class="code_inline-code__Bq7ot">1</code>. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">int</span></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">maxout_pieces</code></td><td class="table_td__rmpJx">The number of maxout pieces to use. Recommended values are <code class="code_inline-code__Bq7ot">2</code> or <code class="code_inline-code__Bq7ot">3</code>. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">int</span></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">depth</code></td><td class="table_td__rmpJx">The number of convolutional layers. Recommended value is <code class="code_inline-code__Bq7ot">4</code>. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">int</span></td></tr><tr class="table_tr__K_tkF table_footer__gJRIy table-footer"><td class="table_td__rmpJx"><strong>CREATES</strong></td><td class="table_td__rmpJx">The model using the architecture. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation"><a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://thinc.ai/docs/api-model">Model</a><span class="code_cli-arg-subtle__IgB5m">[</span><a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://thinc.ai/docs/api-types#types">Floats2d</a><span class="code_cli-arg-subtle__IgB5m">,</span><a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://thinc.ai/docs/api-types#types">Floats2d</a><span class="code_cli-arg-subtle__IgB5m">]</span></span></td></tr></tbody></table><h3 id="MishWindowEncoder_v1" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#MishWindowEncoder_v1" class="heading-text typography_permalink__UiIRy">spacy.MishWindowEncoder.v1 <!-- --> </a></h3><p>The <code class="code_inline-code__Bq7ot">spacy.MishWindowEncoder.v1</code> architecture was producing a model of type
<code class="code_inline-code__Bq7ot">Model[Floats2D, Floats2D]</code>. Since <code class="code_inline-code__Bq7ot">spacy.MishWindowEncoder.v2</code>, this has been
changed to output type <code class="code_inline-code__Bq7ot code_wrap__b41os">Model[List[Floats2d], List[Floats2d]]</code>.</p><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example config<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-ini language-ini"></code></pre>
</div></div></aside><p>Encode context using convolutions with
<a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://thinc.ai/docs/api-layers#mish"><code class="code_inline-code__Bq7ot">Mish</code></a> activation, layer normalization
and residual connections.</p><table class="table_root__ZlA_w"><thead><tr class="table_tr__K_tkF"><th class="table_th__QJ9F8">Name</th><th class="table_th__QJ9F8">Description</th></tr></thead><tbody><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">width</code></td><td class="table_td__rmpJx">The input and output width. These are required to be the same, to allow residual connections. This value will be determined by the width of the inputs. Recommended values are between <code class="code_inline-code__Bq7ot">64</code> and <code class="code_inline-code__Bq7ot">300</code>. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">int</span></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">window_size</code></td><td class="table_td__rmpJx">The number of words to concatenate around each token to construct the convolution. Recommended value is <code class="code_inline-code__Bq7ot">1</code>. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">int</span></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">depth</code></td><td class="table_td__rmpJx">The number of convolutional layers. Recommended value is <code class="code_inline-code__Bq7ot">4</code>. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">int</span></td></tr><tr class="table_tr__K_tkF table_footer__gJRIy table-footer"><td class="table_td__rmpJx"><strong>CREATES</strong></td><td class="table_td__rmpJx">The model using the architecture. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation"><a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://thinc.ai/docs/api-model">Model</a><span class="code_cli-arg-subtle__IgB5m">[</span><a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://thinc.ai/docs/api-types#types">Floats2d</a><span class="code_cli-arg-subtle__IgB5m">,</span><a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://thinc.ai/docs/api-types#types">Floats2d</a><span class="code_cli-arg-subtle__IgB5m">]</span></span></td></tr></tbody></table><h3 id="HashEmbedCNN_v1" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#HashEmbedCNN_v1" class="heading-text typography_permalink__UiIRy">spacy.HashEmbedCNN.v1 <!-- --> </a></h3><p>Identical to <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/architectures#HashEmbedCNN"><code class="code_inline-code__Bq7ot">spacy.HashEmbedCNN.v2</code></a> except
using <a class="link_root__1Me7D" href="/api/legacy#StaticVectors_v1"><code class="code_inline-code__Bq7ot">spacy.StaticVectors.v1</code></a> if vectors are included.</p><h3 id="MultiHashEmbed_v1" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#MultiHashEmbed_v1" class="heading-text typography_permalink__UiIRy">spacy.MultiHashEmbed.v1 <!-- --> </a></h3><p>Identical to <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/architectures#MultiHashEmbed"><code class="code_inline-code__Bq7ot">spacy.MultiHashEmbed.v2</code></a>
except with <a class="link_root__1Me7D" href="/api/legacy#StaticVectors_v1"><code class="code_inline-code__Bq7ot">spacy.StaticVectors.v1</code></a> if vectors are
included.</p><h3 id="CharacterEmbed_v1" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#CharacterEmbed_v1" class="heading-text typography_permalink__UiIRy">spacy.CharacterEmbed.v1 <!-- --> </a></h3><p>Identical to <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/architectures#CharacterEmbed"><code class="code_inline-code__Bq7ot">spacy.CharacterEmbed.v2</code></a>
except using <a class="link_root__1Me7D" href="/api/legacy#StaticVectors_v1"><code class="code_inline-code__Bq7ot">spacy.StaticVectors.v1</code></a> if vectors are
included.</p><h3 id="TextCatEnsemble_v1" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#TextCatEnsemble_v1" class="heading-text typography_permalink__UiIRy">spacy.TextCatEnsemble.v1 <!-- --> </a></h3><p>The <code class="code_inline-code__Bq7ot">spacy.TextCatEnsemble.v1</code> architecture built an internal <code class="code_inline-code__Bq7ot">tok2vec</code> and
<code class="code_inline-code__Bq7ot">linear_model</code>. Since <code class="code_inline-code__Bq7ot">spacy.TextCatEnsemble.v2</code>, this has been refactored so
that the <code class="code_inline-code__Bq7ot">TextCatEnsemble</code> takes these two sublayers as input.</p><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example Config<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-ini language-ini"></code></pre>
</div></div></aside><p>Stacked ensemble of a bag-of-words model and a neural network model. The neural
network has an internal CNN Tok2Vec layer and uses attention.</p><table class="table_root__ZlA_w"><thead><tr class="table_tr__K_tkF"><th class="table_th__QJ9F8">Name</th><th class="table_th__QJ9F8">Description</th></tr></thead><tbody><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">exclusive_classes</code></td><td class="table_td__rmpJx">Whether or not categories are mutually exclusive. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">bool</span></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">pretrained_vectors</code></td><td class="table_td__rmpJx">Whether or not pretrained vectors will be used in addition to the feature vectors. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">bool</span></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">width</code></td><td class="table_td__rmpJx">Output dimension of the feature encoding step. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">int</span></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">embed_size</code></td><td class="table_td__rmpJx">Input dimension of the feature encoding step. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">int</span></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">conv_depth</code></td><td class="table_td__rmpJx">Depth of the tok2vec layer. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">int</span></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">window_size</code></td><td class="table_td__rmpJx">The number of contextual vectors to <a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://thinc.ai/docs/api-layers#expand_window">concatenate</a> from the left and from the right. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">int</span></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">ngram_size</code></td><td class="table_td__rmpJx">Determines the maximum length of the n-grams in the BOW model. For instance, <code class="code_inline-code__Bq7ot">ngram_size=3</code>would give unigram, trigram and bigram features. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">int</span></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">dropout</code></td><td class="table_td__rmpJx">The dropout rate. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">float</span></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">nO</code></td><td class="table_td__rmpJx">Output dimension, determined by the number of different labels. If not set, the <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/textcategorizer"><code class="code_inline-code__Bq7ot">TextCategorizer</code></a> component will set it when <code class="code_inline-code__Bq7ot">initialize</code> is called. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">Optional<span class="code_cli-arg-subtle__IgB5m">[</span>int<span class="code_cli-arg-subtle__IgB5m">]</span></span></td></tr><tr class="table_tr__K_tkF table_footer__gJRIy table-footer"><td class="table_td__rmpJx"><strong>CREATES</strong></td><td class="table_td__rmpJx">The model using the architecture. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation"><a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://thinc.ai/docs/api-model">Model</a><span class="code_cli-arg-subtle__IgB5m">[</span>List<span class="code_cli-arg-subtle__IgB5m">[</span><a class="link_root__1Me7D" href="/api/doc">Doc</a><span class="code_cli-arg-subtle__IgB5m">]</span><span class="code_cli-arg-subtle__IgB5m">,</span><a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://thinc.ai/docs/api-types#types">Floats2d</a><span class="code_cli-arg-subtle__IgB5m">]</span></span></td></tr></tbody></table><h3 id="TextCatCNN_v1" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#TextCatCNN_v1" class="heading-text typography_permalink__UiIRy">spacy.TextCatCNN.v1 <!-- --> </a></h3><p>Since <code class="code_inline-code__Bq7ot">spacy.TextCatCNN.v2</code>, this architecture has become resizable, which means
that you can add labels to a previously trained textcat. <code class="code_inline-code__Bq7ot">TextCatCNN</code> v1 did not
yet support that.</p><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example Config<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-ini language-ini"></code></pre>
</div></div></aside><p>A neural network model where token vectors are calculated using a CNN. The
vectors are mean pooled and used as features in a feed-forward network. This
architecture is usually less accurate than the ensemble, but runs faster.</p><table class="table_root__ZlA_w"><thead><tr class="table_tr__K_tkF"><th class="table_th__QJ9F8">Name</th><th class="table_th__QJ9F8">Description</th></tr></thead><tbody><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">exclusive_classes</code></td><td class="table_td__rmpJx">Whether or not categories are mutually exclusive. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">bool</span></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">tok2vec</code></td><td class="table_td__rmpJx">The <a class="link_root__1Me7D" href="/api/legacy#tok2vec"><code class="code_inline-code__Bq7ot">tok2vec</code></a> layer of the model. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation"><a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://thinc.ai/docs/api-model">Model</a></span></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">nO</code></td><td class="table_td__rmpJx">Output dimension, determined by the number of different labels. If not set, the <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/textcategorizer"><code class="code_inline-code__Bq7ot">TextCategorizer</code></a> component will set it when <code class="code_inline-code__Bq7ot">initialize</code> is called. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">Optional<span class="code_cli-arg-subtle__IgB5m">[</span>int<span class="code_cli-arg-subtle__IgB5m">]</span></span></td></tr><tr class="table_tr__K_tkF table_footer__gJRIy table-footer"><td class="table_td__rmpJx"><strong>CREATES</strong></td><td class="table_td__rmpJx">The model using the architecture. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation"><a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://thinc.ai/docs/api-model">Model</a><span class="code_cli-arg-subtle__IgB5m">[</span>List<span class="code_cli-arg-subtle__IgB5m">[</span><a class="link_root__1Me7D" href="/api/doc">Doc</a><span class="code_cli-arg-subtle__IgB5m">]</span><span class="code_cli-arg-subtle__IgB5m">,</span><a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://thinc.ai/docs/api-types#types">Floats2d</a><span class="code_cli-arg-subtle__IgB5m">]</span></span></td></tr></tbody></table><h3 id="TextCatBOW_v1" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#TextCatBOW_v1" class="heading-text typography_permalink__UiIRy">spacy.TextCatBOW.v1 <!-- --> </a></h3><p>Since <code class="code_inline-code__Bq7ot">spacy.TextCatBOW.v2</code>, this architecture has become resizable, which means
that you can add labels to a previously trained textcat. <code class="code_inline-code__Bq7ot">TextCatBOW</code> v1 did not
yet support that.</p><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example Config<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-ini language-ini"></code></pre>
</div></div></aside><p>An n-gram “bag-of-words” model. This architecture should run much faster than
the others, but may not be as accurate, especially if texts are short.</p><table class="table_root__ZlA_w"><thead><tr class="table_tr__K_tkF"><th class="table_th__QJ9F8">Name</th><th class="table_th__QJ9F8">Description</th></tr></thead><tbody><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">exclusive_classes</code></td><td class="table_td__rmpJx">Whether or not categories are mutually exclusive. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">bool</span></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">ngram_size</code></td><td class="table_td__rmpJx">Determines the maximum length of the n-grams in the BOW model. For instance, <code class="code_inline-code__Bq7ot">ngram_size=3</code> would give unigram, trigram and bigram features. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">int</span></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">no_output_layer</code></td><td class="table_td__rmpJx">Whether or not to add an output layer to the model (<code class="code_inline-code__Bq7ot">Softmax</code> activation if <code class="code_inline-code__Bq7ot">exclusive_classes</code> is <code class="code_inline-code__Bq7ot">True</code>, else <code class="code_inline-code__Bq7ot">Logistic</code>). <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">bool</span></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">nO</code></td><td class="table_td__rmpJx">Output dimension, determined by the number of different labels. If not set, the <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/textcategorizer"><code class="code_inline-code__Bq7ot">TextCategorizer</code></a> component will set it when <code class="code_inline-code__Bq7ot">initialize</code> is called. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">Optional<span class="code_cli-arg-subtle__IgB5m">[</span>int<span class="code_cli-arg-subtle__IgB5m">]</span></span></td></tr><tr class="table_tr__K_tkF table_footer__gJRIy table-footer"><td class="table_td__rmpJx"><strong>CREATES</strong></td><td class="table_td__rmpJx">The model using the architecture. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation"><a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://thinc.ai/docs/api-model">Model</a><span class="code_cli-arg-subtle__IgB5m">[</span>List<span class="code_cli-arg-subtle__IgB5m">[</span><a class="link_root__1Me7D" href="/api/doc">Doc</a><span class="code_cli-arg-subtle__IgB5m">]</span><span class="code_cli-arg-subtle__IgB5m">,</span><a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://thinc.ai/docs/api-types#types">Floats2d</a><span class="code_cli-arg-subtle__IgB5m">]</span></span></td></tr></tbody></table><h3 id="TransitionBasedParser_v1" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#TransitionBasedParser_v1" class="heading-text typography_permalink__UiIRy">spacy.TransitionBasedParser.v1 <!-- --> </a></h3><p>Identical to
<a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/architectures#TransitionBasedParser"><code class="code_inline-code__Bq7ot code_wrap__b41os">spacy.TransitionBasedParser.v2</code></a>
except the <code class="code_inline-code__Bq7ot">use_upper</code> was set to <code class="code_inline-code__Bq7ot">True</code> by default.</p></section>
<section id="section-layers" class="section_root__k1hUl"><h2 id="layers" class="typography_heading__D82WZ typography_h2__hzV3h"><a href="#layers" class="heading-text typography_permalink__UiIRy">Layers <!-- --> </a></h2><p>These functions are available from <code class="code_inline-code__Bq7ot">@spacy.registry.layers</code>.</p><h3 id="StaticVectors_v1" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#StaticVectors_v1" class="heading-text typography_permalink__UiIRy">spacy.StaticVectors.v1 <!-- --> </a></h3><p>Identical to <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/architectures#StaticVectors"><code class="code_inline-code__Bq7ot">spacy.StaticVectors.v2</code></a> except
for the handling of tokens without vectors.</p><aside class="infobox_root__yNIMg infobox_warning__SKl67"><h4 class="infobox_title__uDT7C"><span>Bugs for tokens without vectors</span></h4><p><code class="code_inline-code__Bq7ot">spacy.StaticVectors.v1</code> maps tokens without vectors to the final row in the
vectors table, which causes the model predictions to change if new vectors are
added to an existing vectors table. See more details in
<a class="link_root__1Me7D link_with-icon__NAVDA" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/issues/7662#issuecomment-813925655"><span class="link_source-text__VDP74">issue #7662</span></a>.</p></aside></section>
<section id="section-loggers" class="section_root__k1hUl"><h2 id="loggers" class="typography_heading__D82WZ typography_h2__hzV3h"><a href="#loggers" class="heading-text typography_permalink__UiIRy">Loggers <!-- --> </a></h2><p>These functions are available from <code class="code_inline-code__Bq7ot">@spacy.registry.loggers</code>.</p><h3 id="ConsoleLogger_v1" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#ConsoleLogger_v1" class="heading-text typography_permalink__UiIRy">spacy.ConsoleLogger.v1 <!-- --> </a></h3><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example config<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-ini language-ini"></code></pre>
</div></div></aside><p>Writes the results of a training step to the console in a tabular format.</p><section class="accordion"><div class="accordion_root__pPltq accordion_spaced__Ebyjn"><h4><button class="accordion_button__IPO0E" aria-expanded="true"><span><span class="heading-text">Example console output</span></span><svg class="accordion_icon__fpBl7" width="20" height="20" viewBox="0 0 10 10" aria-hidden="true" focusable="false"><rect class="accordion_hidden__tgILw" height="8" width="2" x="4" y="1"></rect><rect height="2" width="8" x="1" y="4"></rect></svg></button></h4><div class="accordion_content__divKS"><pre class="code_pre__kzg60"><code class="code_code__CILJL language-bash language-bash"></code></pre><pre class="code_pre__kzg60"><code class="code_code__CILJL language-none"></code></pre><p>Note that the cumulative loss keeps increasing within one epoch, but should
start decreasing across epochs.</p></div></div></section><table class="table_root__ZlA_w"><thead><tr class="table_tr__K_tkF"><th class="table_th__QJ9F8">Name</th><th class="table_th__QJ9F8">Description</th></tr></thead><tbody><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">progress_bar</code></td><td class="table_td__rmpJx">Whether the logger should print the progress bar <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">bool</span></td></tr></tbody></table><p>Logging utilities for spaCy are implemented in the
<a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spacy-loggers"><code class="code_inline-code__Bq7ot">spacy-loggers</code></a> repo, and the
functions are typically available from <code class="code_inline-code__Bq7ot">@spacy.registry.loggers</code>.</p><p>More documentation can be found in that repo’s
<a class="link_root__1Me7D link_with-icon__NAVDA" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spacy-loggers/blob/main/README.md"><span class="link_source-text__VDP74">readme</span></a> file.</p></section><div class="grid_root__EfDZl grid_spacing__fhBCv grid_half__xoJZs"><div style="margin-top:var(--spacing-lg)"><a class="link_root__1Me7D button_root__jwipc button_secondary__ukZAk" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/tree/master/website/docs/api/legacy.mdx">Suggest edits</a></div></div></article><div class="main_asides__RITE5" style="background-image:url(/_next/static/media/pattern_green.92f07e1d.png"></div><footer class="footer_root__zlkjP"><div class="grid_root__EfDZl footer_content__LaE1F grid_narrow__x_6xS grid_spacing__fhBCv grid_third__edHuB"><section><ul class="footer_column__DPe22"><li class="footer_label__xK7_s">spaCy</li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/usage">Usage</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/models">Models</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/api">API Reference</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://course.spacy.io">Online Course</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://explosion.ai/custom-solutions">Custom Solutions</a></li></ul></section><section><ul class="footer_column__DPe22"><li class="footer_label__xK7_s">Community</li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/universe">Universe</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/discussions">GitHub Discussions</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/issues">Issue Tracker</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="http://stackoverflow.com/questions/tagged/spacy">Stack Overflow</a></li></ul></section><section><ul class="footer_column__DPe22"><li class="footer_label__xK7_s">Connect</li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://twitter.com/spacy_io">Twitter</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy">GitHub</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://youtube.com/c/ExplosionAI">YouTube</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://explosion.ai/blog">Blog</a></li></ul></section><section class="footer_full___icln"><ul class="footer_column__DPe22"><li class="footer_label__xK7_s">Stay in the loop!</li><li>Receive updates about new releases, tutorials and more.</li><li><form id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" action="//spacy.us12.list-manage.com/subscribe/post?u=83b0498b1e7fa3c91ce68c3f1&amp;amp;id=ecc82e0493" method="post" target="_blank" novalidate=""><div style="position:absolute;left:-5000px" aria-hidden="true"><input type="text" name="b_83b0498b1e7fa3c91ce68c3f1_ecc82e0493" tabindex="-1" value=""/></div><div class="newsletter_root__uh6MU"><input class="newsletter_input___SMSB" id="mce-EMAIL" type="email" name="EMAIL" placeholder="Your email" aria-label="Your email"/><button class="newsletter_button__gKW8E" id="mc-embedded-subscribe" type="submit" name="subscribe">Sign up</button></div></form></li></ul></section></div><div class="footer_content__LaE1F footer_copy__rbjvc"><span>© 2016-<!-- -->2023<!-- --> <a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://explosion.ai">Explosion</a></span><a class="link_root__1Me7D footer_logo__BthsJ link_no-link-layout__RPvod" aria-label="Explosion" href="https://explosion.ai"></a><a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://explosion.ai/legal">Legal / Imprint</a></div></footer></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"Legacy functions and architectures","teaser":"Archived implementations available through spacy-legacy","source":"spacy/legacy","slug":"/api/legacy","mdx":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    section: \"section\",\n    p: \"p\",\n    a: \"a\",\n    h2: \"h2\",\n    h3: \"h3\",\n    blockquote: \"blockquote\",\n    h4: \"h4\",\n    pre: \"pre\",\n    code: \"code\",\n    table: \"table\",\n    thead: \"thead\",\n    tr: \"tr\",\n    th: \"th\",\n    tbody: \"tbody\",\n    td: \"td\",\n    del: \"del\",\n    strong: \"strong\"\n  }, _provideComponents(), props.components), {InlineCode, Infobox, Accordion} = _components;\n  if (!Accordion) _missingMdxReference(\"Accordion\", true);\n  if (!Infobox) _missingMdxReference(\"Infobox\", true);\n  if (!InlineCode) _missingMdxReference(\"InlineCode\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.section, {\n      children: [_jsxs(_components.p, {\n        children: [\"The \", _jsx(_components.a, {\n          href: \"https://github.com/explosion/spacy-legacy\",\n          children: _jsx(InlineCode, {\n            children: \"spacy-legacy\"\n          })\n        }), \" package includes\\noutdated registered functions and architectures. It is installed automatically\\nas a dependency of spaCy, and provides backwards compatibility for archived\\nfunctions that may still be used in projects.\"]\n      }), _jsx(_components.p, {\n        children: \"You can find the detailed documentation of each such legacy function on this\\npage.\"\n      })]\n    }), \"\\n\", _jsxs(_components.section, {\n      id: \"section-architectures\",\n      children: [_jsx(_components.h2, {\n        id: \"architectures\",\n        children: \"Architectures \"\n      }), _jsxs(_components.p, {\n        children: [\"These functions are available from \", _jsx(InlineCode, {\n          children: \"@spacy.registry.architectures\"\n        }), \".\"]\n      }), _jsx(_components.h3, {\n        id: \"Tok2Vec_v1\",\n        children: \"spacy.Tok2Vec.v1 \"\n      }), _jsxs(_components.p, {\n        children: [\"The \", _jsx(InlineCode, {\n          children: \"spacy.Tok2Vec.v1\"\n        }), \" architecture was expecting an \", _jsx(InlineCode, {\n          children: \"encode\"\n        }), \" model of type\\n\", _jsx(InlineCode, {\n          children: \"Model[Floats2D, Floats2D]\"\n        }), \" such as \", _jsx(InlineCode, {\n          children: \"spacy.MaxoutWindowEncoder.v1\"\n        }), \" or\\n\", _jsx(InlineCode, {\n          children: \"spacy.MishWindowEncoder.v1\"\n        }), \".\"]\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example config\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-ini\",\n            lang: \"ini\",\n            children: \"[model]\\n@architectures = \\\"spacy.Tok2Vec.v1\\\"\\n\\n[model.embed]\\n@architectures = \\\"spacy.CharacterEmbed.v1\\\"\\n# ...\\n\\n[model.encode]\\n@architectures = \\\"spacy.MaxoutWindowEncoder.v1\\\"\\n# ...\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsxs(_components.p, {\n        children: [\"Construct a tok2vec model out of two subnetworks: one for embedding and one for\\nencoding. See the\\n\", _jsx(_components.a, {\n          href: \"https://explosion.ai/blog/deep-learning-formula-nlp\",\n          children: \"“Embed, Encode, Attend, Predict”\"\n        }), \"\\nblog post for background.\"]\n      }), _jsxs(_components.table, {\n        children: [_jsx(_components.thead, {\n          children: _jsxs(_components.tr, {\n            children: [_jsx(_components.th, {\n              children: \"Name\"\n            }), _jsx(_components.th, {\n              children: \"Description\"\n            })]\n          })\n        }), _jsxs(_components.tbody, {\n          children: [_jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"embed\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"Embed tokens into context-independent word vector representations. For example, \", _jsx(_components.a, {\n                href: \"/api/architectures#CharacterEmbed\",\n                children: \"CharacterEmbed\"\n              }), \" or \", _jsx(_components.a, {\n                href: \"/api/architectures#MultiHashEmbed\",\n                children: \"MultiHashEmbed\"\n              }), \". \", _jsx(_components.del, {\n                children: \"Model[List[Doc], List[Floats2d]]\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"encode\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"Encode context into the embeddings, using an architecture such as a CNN, BiLSTM or transformer. For example, \", _jsx(_components.a, {\n                href: \"/api/legacy#MaxoutWindowEncoder_v1\",\n                children: \"MaxoutWindowEncoder.v1\"\n              }), \". \", _jsx(_components.del, {\n                children: \"Model[Floats2d, Floats2d]\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(_components.strong, {\n                children: \"CREATES\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The model using the architecture. \", _jsx(_components.del, {\n                children: \"Model[List[Doc], List[Floats2d]]\"\n              })]\n            })]\n          })]\n        })]\n      }), _jsx(_components.h3, {\n        id: \"MaxoutWindowEncoder_v1\",\n        children: \"spacy.MaxoutWindowEncoder.v1 \"\n      }), _jsxs(_components.p, {\n        children: [\"The \", _jsx(InlineCode, {\n          children: \"spacy.MaxoutWindowEncoder.v1\"\n        }), \" architecture was producing a model of type\\n\", _jsx(InlineCode, {\n          children: \"Model[Floats2D, Floats2D]\"\n        }), \". Since \", _jsx(InlineCode, {\n          children: \"spacy.MaxoutWindowEncoder.v2\"\n        }), \", this has been\\nchanged to output type \", _jsx(InlineCode, {\n          children: \"Model[List[Floats2d], List[Floats2d]]\"\n        }), \".\"]\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example config\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-ini\",\n            lang: \"ini\",\n            children: \"[model]\\n@architectures = \\\"spacy.MaxoutWindowEncoder.v1\\\"\\nwidth = 128\\nwindow_size = 1\\nmaxout_pieces = 3\\ndepth = 4\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsx(_components.p, {\n        children: \"Encode context using convolutions with maxout activation, layer normalization\\nand residual connections.\"\n      }), _jsxs(_components.table, {\n        children: [_jsx(_components.thead, {\n          children: _jsxs(_components.tr, {\n            children: [_jsx(_components.th, {\n              children: \"Name\"\n            }), _jsx(_components.th, {\n              children: \"Description\"\n            })]\n          })\n        }), _jsxs(_components.tbody, {\n          children: [_jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"width\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The input and output width. These are required to be the same, to allow residual connections. This value will be determined by the width of the inputs. Recommended values are between \", _jsx(InlineCode, {\n                children: \"64\"\n              }), \" and \", _jsx(InlineCode, {\n                children: \"300\"\n              }), \". \", _jsx(_components.del, {\n                children: \"int\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"window_size\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The number of words to concatenate around each token to construct the convolution. Recommended value is \", _jsx(InlineCode, {\n                children: \"1\"\n              }), \". \", _jsx(_components.del, {\n                children: \"int\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"maxout_pieces\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The number of maxout pieces to use. Recommended values are \", _jsx(InlineCode, {\n                children: \"2\"\n              }), \" or \", _jsx(InlineCode, {\n                children: \"3\"\n              }), \". \", _jsx(_components.del, {\n                children: \"int\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"depth\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The number of convolutional layers. Recommended value is \", _jsx(InlineCode, {\n                children: \"4\"\n              }), \". \", _jsx(_components.del, {\n                children: \"int\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(_components.strong, {\n                children: \"CREATES\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The model using the architecture. \", _jsx(_components.del, {\n                children: \"Model[Floats2d, Floats2d]\"\n              })]\n            })]\n          })]\n        })]\n      }), _jsx(_components.h3, {\n        id: \"MishWindowEncoder_v1\",\n        children: \"spacy.MishWindowEncoder.v1 \"\n      }), _jsxs(_components.p, {\n        children: [\"The \", _jsx(InlineCode, {\n          children: \"spacy.MishWindowEncoder.v1\"\n        }), \" architecture was producing a model of type\\n\", _jsx(InlineCode, {\n          children: \"Model[Floats2D, Floats2D]\"\n        }), \". Since \", _jsx(InlineCode, {\n          children: \"spacy.MishWindowEncoder.v2\"\n        }), \", this has been\\nchanged to output type \", _jsx(InlineCode, {\n          children: \"Model[List[Floats2d], List[Floats2d]]\"\n        }), \".\"]\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example config\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-ini\",\n            lang: \"ini\",\n            children: \"[model]\\n@architectures = \\\"spacy.MishWindowEncoder.v1\\\"\\nwidth = 64\\nwindow_size = 1\\ndepth = 4\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsxs(_components.p, {\n        children: [\"Encode context using convolutions with\\n\", _jsx(_components.a, {\n          href: \"https://thinc.ai/docs/api-layers#mish\",\n          children: _jsx(InlineCode, {\n            children: \"Mish\"\n          })\n        }), \" activation, layer normalization\\nand residual connections.\"]\n      }), _jsxs(_components.table, {\n        children: [_jsx(_components.thead, {\n          children: _jsxs(_components.tr, {\n            children: [_jsx(_components.th, {\n              children: \"Name\"\n            }), _jsx(_components.th, {\n              children: \"Description\"\n            })]\n          })\n        }), _jsxs(_components.tbody, {\n          children: [_jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"width\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The input and output width. These are required to be the same, to allow residual connections. This value will be determined by the width of the inputs. Recommended values are between \", _jsx(InlineCode, {\n                children: \"64\"\n              }), \" and \", _jsx(InlineCode, {\n                children: \"300\"\n              }), \". \", _jsx(_components.del, {\n                children: \"int\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"window_size\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The number of words to concatenate around each token to construct the convolution. Recommended value is \", _jsx(InlineCode, {\n                children: \"1\"\n              }), \". \", _jsx(_components.del, {\n                children: \"int\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"depth\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The number of convolutional layers. Recommended value is \", _jsx(InlineCode, {\n                children: \"4\"\n              }), \". \", _jsx(_components.del, {\n                children: \"int\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(_components.strong, {\n                children: \"CREATES\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The model using the architecture. \", _jsx(_components.del, {\n                children: \"Model[Floats2d, Floats2d]\"\n              })]\n            })]\n          })]\n        })]\n      }), _jsx(_components.h3, {\n        id: \"HashEmbedCNN_v1\",\n        children: \"spacy.HashEmbedCNN.v1 \"\n      }), _jsxs(_components.p, {\n        children: [\"Identical to \", _jsx(_components.a, {\n          href: \"/api/architectures#HashEmbedCNN\",\n          children: _jsx(InlineCode, {\n            children: \"spacy.HashEmbedCNN.v2\"\n          })\n        }), \" except\\nusing \", _jsx(_components.a, {\n          href: \"#StaticVectors_v1\",\n          children: _jsx(InlineCode, {\n            children: \"spacy.StaticVectors.v1\"\n          })\n        }), \" if vectors are included.\"]\n      }), _jsx(_components.h3, {\n        id: \"MultiHashEmbed_v1\",\n        children: \"spacy.MultiHashEmbed.v1 \"\n      }), _jsxs(_components.p, {\n        children: [\"Identical to \", _jsx(_components.a, {\n          href: \"/api/architectures#MultiHashEmbed\",\n          children: _jsx(InlineCode, {\n            children: \"spacy.MultiHashEmbed.v2\"\n          })\n        }), \"\\nexcept with \", _jsx(_components.a, {\n          href: \"#StaticVectors_v1\",\n          children: _jsx(InlineCode, {\n            children: \"spacy.StaticVectors.v1\"\n          })\n        }), \" if vectors are\\nincluded.\"]\n      }), _jsx(_components.h3, {\n        id: \"CharacterEmbed_v1\",\n        children: \"spacy.CharacterEmbed.v1 \"\n      }), _jsxs(_components.p, {\n        children: [\"Identical to \", _jsx(_components.a, {\n          href: \"/api/architectures#CharacterEmbed\",\n          children: _jsx(InlineCode, {\n            children: \"spacy.CharacterEmbed.v2\"\n          })\n        }), \"\\nexcept using \", _jsx(_components.a, {\n          href: \"#StaticVectors_v1\",\n          children: _jsx(InlineCode, {\n            children: \"spacy.StaticVectors.v1\"\n          })\n        }), \" if vectors are\\nincluded.\"]\n      }), _jsx(_components.h3, {\n        id: \"TextCatEnsemble_v1\",\n        children: \"spacy.TextCatEnsemble.v1 \"\n      }), _jsxs(_components.p, {\n        children: [\"The \", _jsx(InlineCode, {\n          children: \"spacy.TextCatEnsemble.v1\"\n        }), \" architecture built an internal \", _jsx(InlineCode, {\n          children: \"tok2vec\"\n        }), \" and\\n\", _jsx(InlineCode, {\n          children: \"linear_model\"\n        }), \". Since \", _jsx(InlineCode, {\n          children: \"spacy.TextCatEnsemble.v2\"\n        }), \", this has been refactored so\\nthat the \", _jsx(InlineCode, {\n          children: \"TextCatEnsemble\"\n        }), \" takes these two sublayers as input.\"]\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example Config\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-ini\",\n            lang: \"ini\",\n            children: \"[model]\\n@architectures = \\\"spacy.TextCatEnsemble.v1\\\"\\nexclusive_classes = false\\npretrained_vectors = null\\nwidth = 64\\nembed_size = 2000\\nconv_depth = 2\\nwindow_size = 1\\nngram_size = 1\\ndropout = null\\nnO = null\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsx(_components.p, {\n        children: \"Stacked ensemble of a bag-of-words model and a neural network model. The neural\\nnetwork has an internal CNN Tok2Vec layer and uses attention.\"\n      }), _jsxs(_components.table, {\n        children: [_jsx(_components.thead, {\n          children: _jsxs(_components.tr, {\n            children: [_jsx(_components.th, {\n              children: \"Name\"\n            }), _jsx(_components.th, {\n              children: \"Description\"\n            })]\n          })\n        }), _jsxs(_components.tbody, {\n          children: [_jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"exclusive_classes\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"Whether or not categories are mutually exclusive. \", _jsx(_components.del, {\n                children: \"bool\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"pretrained_vectors\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"Whether or not pretrained vectors will be used in addition to the feature vectors. \", _jsx(_components.del, {\n                children: \"bool\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"width\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"Output dimension of the feature encoding step. \", _jsx(_components.del, {\n                children: \"int\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"embed_size\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"Input dimension of the feature encoding step. \", _jsx(_components.del, {\n                children: \"int\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"conv_depth\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"Depth of the tok2vec layer. \", _jsx(_components.del, {\n                children: \"int\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"window_size\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The number of contextual vectors to \", _jsx(_components.a, {\n                href: \"https://thinc.ai/docs/api-layers#expand_window\",\n                children: \"concatenate\"\n              }), \" from the left and from the right. \", _jsx(_components.del, {\n                children: \"int\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"ngram_size\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"Determines the maximum length of the n-grams in the BOW model. For instance, \", _jsx(InlineCode, {\n                children: \"ngram_size=3\"\n              }), \"would give unigram, trigram and bigram features. \", _jsx(_components.del, {\n                children: \"int\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"dropout\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The dropout rate. \", _jsx(_components.del, {\n                children: \"float\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"nO\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"Output dimension, determined by the number of different labels. If not set, the \", _jsx(_components.a, {\n                href: \"/api/textcategorizer\",\n                children: _jsx(InlineCode, {\n                  children: \"TextCategorizer\"\n                })\n              }), \" component will set it when \", _jsx(InlineCode, {\n                children: \"initialize\"\n              }), \" is called. \", _jsx(_components.del, {\n                children: \"Optional[int]\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(_components.strong, {\n                children: \"CREATES\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The model using the architecture. \", _jsx(_components.del, {\n                children: \"Model[List[Doc], Floats2d]\"\n              })]\n            })]\n          })]\n        })]\n      }), _jsx(_components.h3, {\n        id: \"TextCatCNN_v1\",\n        children: \"spacy.TextCatCNN.v1 \"\n      }), _jsxs(_components.p, {\n        children: [\"Since \", _jsx(InlineCode, {\n          children: \"spacy.TextCatCNN.v2\"\n        }), \", this architecture has become resizable, which means\\nthat you can add labels to a previously trained textcat. \", _jsx(InlineCode, {\n          children: \"TextCatCNN\"\n        }), \" v1 did not\\nyet support that.\"]\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example Config\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-ini\",\n            lang: \"ini\",\n            children: \"[model]\\n@architectures = \\\"spacy.TextCatCNN.v1\\\"\\nexclusive_classes = false\\nnO = null\\n\\n[model.tok2vec]\\n@architectures = \\\"spacy.HashEmbedCNN.v1\\\"\\npretrained_vectors = null\\nwidth = 96\\ndepth = 4\\nembed_size = 2000\\nwindow_size = 1\\nmaxout_pieces = 3\\nsubword_features = true\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsx(_components.p, {\n        children: \"A neural network model where token vectors are calculated using a CNN. The\\nvectors are mean pooled and used as features in a feed-forward network. This\\narchitecture is usually less accurate than the ensemble, but runs faster.\"\n      }), _jsxs(_components.table, {\n        children: [_jsx(_components.thead, {\n          children: _jsxs(_components.tr, {\n            children: [_jsx(_components.th, {\n              children: \"Name\"\n            }), _jsx(_components.th, {\n              children: \"Description\"\n            })]\n          })\n        }), _jsxs(_components.tbody, {\n          children: [_jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"exclusive_classes\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"Whether or not categories are mutually exclusive. \", _jsx(_components.del, {\n                children: \"bool\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"tok2vec\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The \", _jsx(_components.a, {\n                href: \"#tok2vec\",\n                children: _jsx(InlineCode, {\n                  children: \"tok2vec\"\n                })\n              }), \" layer of the model. \", _jsx(_components.del, {\n                children: \"Model\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"nO\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"Output dimension, determined by the number of different labels. If not set, the \", _jsx(_components.a, {\n                href: \"/api/textcategorizer\",\n                children: _jsx(InlineCode, {\n                  children: \"TextCategorizer\"\n                })\n              }), \" component will set it when \", _jsx(InlineCode, {\n                children: \"initialize\"\n              }), \" is called. \", _jsx(_components.del, {\n                children: \"Optional[int]\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(_components.strong, {\n                children: \"CREATES\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The model using the architecture. \", _jsx(_components.del, {\n                children: \"Model[List[Doc], Floats2d]\"\n              })]\n            })]\n          })]\n        })]\n      }), _jsx(_components.h3, {\n        id: \"TextCatBOW_v1\",\n        children: \"spacy.TextCatBOW.v1 \"\n      }), _jsxs(_components.p, {\n        children: [\"Since \", _jsx(InlineCode, {\n          children: \"spacy.TextCatBOW.v2\"\n        }), \", this architecture has become resizable, which means\\nthat you can add labels to a previously trained textcat. \", _jsx(InlineCode, {\n          children: \"TextCatBOW\"\n        }), \" v1 did not\\nyet support that.\"]\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example Config\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-ini\",\n            lang: \"ini\",\n            children: \"[model]\\n@architectures = \\\"spacy.TextCatBOW.v1\\\"\\nexclusive_classes = false\\nngram_size = 1\\nno_output_layer = false\\nnO = null\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsx(_components.p, {\n        children: \"An n-gram “bag-of-words” model. This architecture should run much faster than\\nthe others, but may not be as accurate, especially if texts are short.\"\n      }), _jsxs(_components.table, {\n        children: [_jsx(_components.thead, {\n          children: _jsxs(_components.tr, {\n            children: [_jsx(_components.th, {\n              children: \"Name\"\n            }), _jsx(_components.th, {\n              children: \"Description\"\n            })]\n          })\n        }), _jsxs(_components.tbody, {\n          children: [_jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"exclusive_classes\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"Whether or not categories are mutually exclusive. \", _jsx(_components.del, {\n                children: \"bool\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"ngram_size\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"Determines the maximum length of the n-grams in the BOW model. For instance, \", _jsx(InlineCode, {\n                children: \"ngram_size=3\"\n              }), \" would give unigram, trigram and bigram features. \", _jsx(_components.del, {\n                children: \"int\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"no_output_layer\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"Whether or not to add an output layer to the model (\", _jsx(InlineCode, {\n                children: \"Softmax\"\n              }), \" activation if \", _jsx(InlineCode, {\n                children: \"exclusive_classes\"\n              }), \" is \", _jsx(InlineCode, {\n                children: \"True\"\n              }), \", else \", _jsx(InlineCode, {\n                children: \"Logistic\"\n              }), \"). \", _jsx(_components.del, {\n                children: \"bool\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"nO\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"Output dimension, determined by the number of different labels. If not set, the \", _jsx(_components.a, {\n                href: \"/api/textcategorizer\",\n                children: _jsx(InlineCode, {\n                  children: \"TextCategorizer\"\n                })\n              }), \" component will set it when \", _jsx(InlineCode, {\n                children: \"initialize\"\n              }), \" is called. \", _jsx(_components.del, {\n                children: \"Optional[int]\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(_components.strong, {\n                children: \"CREATES\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The model using the architecture. \", _jsx(_components.del, {\n                children: \"Model[List[Doc], Floats2d]\"\n              })]\n            })]\n          })]\n        })]\n      }), _jsx(_components.h3, {\n        id: \"TransitionBasedParser_v1\",\n        children: \"spacy.TransitionBasedParser.v1 \"\n      }), _jsxs(_components.p, {\n        children: [\"Identical to\\n\", _jsx(_components.a, {\n          href: \"/api/architectures#TransitionBasedParser\",\n          children: _jsx(InlineCode, {\n            children: \"spacy.TransitionBasedParser.v2\"\n          })\n        }), \"\\nexcept the \", _jsx(InlineCode, {\n          children: \"use_upper\"\n        }), \" was set to \", _jsx(InlineCode, {\n          children: \"True\"\n        }), \" by default.\"]\n      })]\n    }), \"\\n\", _jsxs(_components.section, {\n      id: \"section-layers\",\n      children: [_jsx(_components.h2, {\n        id: \"layers\",\n        children: \"Layers \"\n      }), _jsxs(_components.p, {\n        children: [\"These functions are available from \", _jsx(InlineCode, {\n          children: \"@spacy.registry.layers\"\n        }), \".\"]\n      }), _jsx(_components.h3, {\n        id: \"StaticVectors_v1\",\n        children: \"spacy.StaticVectors.v1 \"\n      }), _jsxs(_components.p, {\n        children: [\"Identical to \", _jsx(_components.a, {\n          href: \"/api/architectures#StaticVectors\",\n          children: _jsx(InlineCode, {\n            children: \"spacy.StaticVectors.v2\"\n          })\n        }), \" except\\nfor the handling of tokens without vectors.\"]\n      }), _jsx(Infobox, {\n        title: \"Bugs for tokens without vectors\",\n        variant: \"warning\",\n        children: _jsxs(_components.p, {\n          children: [_jsx(InlineCode, {\n            children: \"spacy.StaticVectors.v1\"\n          }), \" maps tokens without vectors to the final row in the\\nvectors table, which causes the model predictions to change if new vectors are\\nadded to an existing vectors table. See more details in\\n\", _jsx(_components.a, {\n            href: \"https://github.com/explosion/spaCy/issues/7662#issuecomment-813925655\",\n            children: \"issue #7662\"\n          }), \".\"]\n        })\n      })]\n    }), \"\\n\", _jsxs(_components.section, {\n      id: \"section-loggers\",\n      children: [_jsx(_components.h2, {\n        id: \"loggers\",\n        children: \"Loggers \"\n      }), _jsxs(_components.p, {\n        children: [\"These functions are available from \", _jsx(InlineCode, {\n          children: \"@spacy.registry.loggers\"\n        }), \".\"]\n      }), _jsx(_components.h3, {\n        id: \"ConsoleLogger_v1\",\n        children: \"spacy.ConsoleLogger.v1 \"\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example config\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-ini\",\n            lang: \"ini\",\n            children: \"[training.logger]\\n@loggers = \\\"spacy.ConsoleLogger.v1\\\"\\nprogress_bar = true\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsx(_components.p, {\n        children: \"Writes the results of a training step to the console in a tabular format.\"\n      }), _jsxs(Accordion, {\n        title: \"Example console output\",\n        spaced: true,\n        children: [_jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-bash\",\n            lang: \"bash\",\n            children: \"$ python -m spacy train config.cfg\\n\"\n          })\n        }), _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            lang: \"none\",\n            children: \"ℹ Using CPU\\nℹ Loading config and nlp from: config.cfg\\nℹ Pipeline: ['tok2vec', 'tagger']\\nℹ Start training\\nℹ Training. Initial learn rate: 0.0\\n\\nE     #        LOSS TOK2VEC   LOSS TAGGER   TAG_ACC   SCORE\\n---   ------   ------------   -----------   -------   ------\\n  0        0           0.00         86.20      0.22     0.00\\n  0      200           3.08      18968.78     34.00     0.34\\n  0      400          31.81      22539.06     33.64     0.34\\n  0      600          92.13      22794.91     43.80     0.44\\n  0      800         183.62      21541.39     56.05     0.56\\n  0     1000         352.49      25461.82     65.15     0.65\\n  0     1200         422.87      23708.82     71.84     0.72\\n  0     1400         601.92      24994.79     76.57     0.77\\n  0     1600         662.57      22268.02     80.20     0.80\\n  0     1800        1101.50      28413.77     82.56     0.83\\n  0     2000        1253.43      28736.36     85.00     0.85\\n  0     2200        1411.02      28237.53     87.42     0.87\\n  0     2400        1605.35      28439.95     88.70     0.89\\n\"\n          })\n        }), _jsx(_components.p, {\n          children: \"Note that the cumulative loss keeps increasing within one epoch, but should\\nstart decreasing across epochs.\"\n        })]\n      }), _jsxs(_components.table, {\n        children: [_jsx(_components.thead, {\n          children: _jsxs(_components.tr, {\n            children: [_jsx(_components.th, {\n              children: \"Name\"\n            }), _jsx(_components.th, {\n              children: \"Description\"\n            })]\n          })\n        }), _jsx(_components.tbody, {\n          children: _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"progress_bar\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"Whether the logger should print the progress bar \", _jsx(_components.del, {\n                children: \"bool\"\n              })]\n            })]\n          })\n        })]\n      }), _jsxs(_components.p, {\n        children: [\"Logging utilities for spaCy are implemented in the\\n\", _jsx(_components.a, {\n          href: \"https://github.com/explosion/spacy-loggers\",\n          children: _jsx(InlineCode, {\n            children: \"spacy-loggers\"\n          })\n        }), \" repo, and the\\nfunctions are typically available from \", _jsx(InlineCode, {\n          children: \"@spacy.registry.loggers\"\n        }), \".\"]\n      }), _jsxs(_components.p, {\n        children: [\"More documentation can be found in that repo’s\\n\", _jsx(_components.a, {\n          href: \"https://github.com/explosion/spacy-loggers/blob/main/README.md\",\n          children: \"readme\"\n        }), \" file.\"]\n      })]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{"title":"Legacy functions and architectures","teaser":"Archived implementations available through spacy-legacy","source":"spacy/legacy"},"scope":{}},"sectionTitle":"API Documentation","theme":"green","section":"api","apiDetails":{"stringName":null,"baseClass":null,"trainable":null},"isIndex":false,"next":null},"__N_SSG":true},"page":"/[...listPathPage]","query":{"listPathPage":["api","legacy"]},"buildId":"2lY2cUyEfZosk4VLgkHb2","isFallback":false,"dynamicIds":[728],"gsp":true,"scriptLoader":[]}</script></body></html>