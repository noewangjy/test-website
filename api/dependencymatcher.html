<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="shortcut icon" href="/icons/icon-192x192.png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1, maximum-scale=5.0, shrink-to-fit=no, viewport-fit=cover"/><meta name="theme-color" content="#09a3d5"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png"/><title>DependencyMatcher Â· spaCy API Documentation</title><meta name="description" content="Match subtrees within a dependency parse"/><meta property="og:title" content="DependencyMatcher Â· spaCy API Documentation"/><meta property="og:description" content="Match subtrees within a dependency parse"/><meta property="og:type" content="website"/><meta property="og:site_name" content="DependencyMatcher"/><meta property="og:image" content="[object Object]"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:image" content="[object Object]"/><meta name="twitter:creator" content="@spacy_io"/><meta name="twitter:site" content="@spacy_io"/><meta name="twitter:title" content="DependencyMatcher Â· spaCy API Documentation"/><meta name="twitter:description" content="Match subtrees within a dependency parse"/><meta name="docsearch:language" content="en"/><meta name="next-head-count" content="24"/><link rel="preload" href="/_next/static/css/8f0b94edbc18d62d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8f0b94edbc18d62d.css" data-n-g=""/><link rel="preload" href="/_next/static/css/e6995e0e8addcf99.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e6995e0e8addcf99.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script defer="" src="/_next/static/chunks/262.c647d33d06232ef6.js"></script><script defer="" src="/_next/static/chunks/728.cf6ba0da2700fa1b.js"></script><script src="/_next/static/chunks/webpack-8161fc2bb14cec39.js" defer=""></script><script src="/_next/static/chunks/framework-3b5a00d5d7e8d93b.js" defer=""></script><script src="/_next/static/chunks/main-a0f603ce323043fd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-eb3ea1261af64e73.js" defer=""></script><script src="/_next/static/chunks/94-57434c8b7a6c3878.js" defer=""></script><script src="/_next/static/chunks/128-76b45627a109219b.js" defer=""></script><script src="/_next/static/chunks/pages/%5B...listPathPage%5D-45eea57fe8c2902c.js" defer=""></script><script src="/_next/static/Ugre-usgT1EZhnSeYcBR9/_buildManifest.js" defer=""></script><script src="/_next/static/Ugre-usgT1EZhnSeYcBR9/_ssgManifest.js" defer=""></script></head><body class="theme-blue"><div id="__next"><div class="theme-green"><nav class="navigation_root__yPL8O"><span class="navigation_has-alert__s0Drf"><a class="link_root__1Me7D link_no-link-layout__RPvod" aria-label="spaCy" href="/"><h1 class="navigation_title__pm49s">spaCy</h1></a> <span class="navigation_alert__ZOXon"><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/usage/v3-5"><strong>ðŸ’¥ Out now:</strong> spaCy v3.5</a></span></span><div class="navigation_menu__ZMJxN"><select class="dropdown_root__3uiQq navigation_dropdown__4j4pI"><option value="title" disabled="">Menu</option><option value="/usage">Usage</option><option value="/models">Models</option><option value="/api" selected="">API</option><option value="/universe">Universe</option></select><ul class="navigation_list__DCzqi"><li class="navigation_item__ln1O1"><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/usage">Usage</a></li><li class="navigation_item__ln1O1"><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/models">Models</a></li><li class="navigation_item__ln1O1 navigation_is-active__RjVJG"><a class="link_root__1Me7D link_no-link-layout__RPvod" tabindex="-1" href="/api">API</a></li><li class="navigation_item__ln1O1"><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/universe">Universe</a></li><li class="navigation_item__ln1O1 navigation_github__MpFNv"><span><a href="https://github.com/explosion/spaCy" data-size="large" data-show-count="true" aria-label="Star spaCy on GitHub"></a></span></li></ul><div class="navigation_search__BKZCn"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><progress class="progress_root__9huWN" value="0" max="100"></progress></nav><menu class="sidebar sidebar_root__s2No7"><h1 hidden="" aria-hidden="true" class="h0 sidebar_active-heading___dkf9">Matchers</h1><div class="sidebar_dropdown__vyqjz"><select class="dropdown_root__3uiQq sidebar_dropdown-select__Nwbq9"><option disabled="">Select page...</option><option value="/api">Overview<!-- --> â€º <!-- -->Library Architecture</option><option value="/api/architectures">Overview<!-- --> â€º <!-- -->Model Architectures</option><option value="/api/data-formats">Overview<!-- --> â€º <!-- -->Data Formats</option><option value="/api/cli">Overview<!-- --> â€º <!-- -->Command Line</option><option value="/api/top-level">Overview<!-- --> â€º <!-- -->Functions</option><option value="/api/doc">Containers<!-- --> â€º <!-- -->Doc</option><option value="/api/docbin">Containers<!-- --> â€º <!-- -->DocBin</option><option value="/api/example">Containers<!-- --> â€º <!-- -->Example</option><option value="/api/language">Containers<!-- --> â€º <!-- -->Language</option><option value="/api/lexeme">Containers<!-- --> â€º <!-- -->Lexeme</option><option value="/api/span">Containers<!-- --> â€º <!-- -->Span</option><option value="/api/spangroup">Containers<!-- --> â€º <!-- -->SpanGroup</option><option value="/api/token">Containers<!-- --> â€º <!-- -->Token</option><option value="/api/attributeruler">Pipeline<!-- --> â€º <!-- -->AttributeRuler</option><option value="/api/coref">Pipeline<!-- --> â€º <!-- -->CoreferenceResolver</option><option value="/api/dependencyparser">Pipeline<!-- --> â€º <!-- -->DependencyParser</option><option value="/api/edittreelemmatizer">Pipeline<!-- --> â€º <!-- -->EditTreeLemmatizer</option><option value="/api/entitylinker">Pipeline<!-- --> â€º <!-- -->EntityLinker</option><option value="/api/entityrecognizer">Pipeline<!-- --> â€º <!-- -->EntityRecognizer</option><option value="/api/entityruler">Pipeline<!-- --> â€º <!-- -->EntityRuler</option><option value="/api/lemmatizer">Pipeline<!-- --> â€º <!-- -->Lemmatizer</option><option value="/api/morphologizer">Pipeline<!-- --> â€º <!-- -->Morphologizer</option><option value="/api/sentencerecognizer">Pipeline<!-- --> â€º <!-- -->SentenceRecognizer</option><option value="/api/sentencizer">Pipeline<!-- --> â€º <!-- -->Sentencizer</option><option value="/api/spancategorizer">Pipeline<!-- --> â€º <!-- -->SpanCategorizer</option><option value="/api/span-resolver">Pipeline<!-- --> â€º <!-- -->SpanResolver</option><option value="/api/spanruler">Pipeline<!-- --> â€º <!-- -->SpanRuler</option><option value="/api/tagger">Pipeline<!-- --> â€º <!-- -->Tagger</option><option value="/api/textcategorizer">Pipeline<!-- --> â€º <!-- -->TextCategorizer</option><option value="/api/tok2vec">Pipeline<!-- --> â€º <!-- -->Tok2Vec</option><option value="/api/tokenizer">Pipeline<!-- --> â€º <!-- -->Tokenizer</option><option value="/api/pipe">Pipeline<!-- --> â€º <!-- -->TrainablePipe</option><option value="/api/transformer">Pipeline<!-- --> â€º <!-- -->Transformer</option><option value="/api/pipeline-functions">Pipeline<!-- --> â€º <!-- -->Other Functions</option><option value="/api/dependencymatcher" selected="">Matchers<!-- --> â€º <!-- -->DependencyMatcher</option><option value="/api/matcher">Matchers<!-- --> â€º <!-- -->Matcher</option><option value="/api/phrasematcher">Matchers<!-- --> â€º <!-- -->PhraseMatcher</option><option value="/api/attributes">Other<!-- --> â€º <!-- -->Attributes</option><option value="/api/corpus">Other<!-- --> â€º <!-- -->Corpus</option><option value="/api/inmemorylookupkb">Other<!-- --> â€º <!-- -->InMemoryLookupKB</option><option value="/api/kb">Other<!-- --> â€º <!-- -->KnowledgeBase</option><option value="/api/lookups">Other<!-- --> â€º <!-- -->Lookups</option><option value="/api/morphology#morphanalysis">Other<!-- --> â€º <!-- -->MorphAnalysis</option><option value="/api/morphology">Other<!-- --> â€º <!-- -->Morphology</option><option value="/api/scorer">Other<!-- --> â€º <!-- -->Scorer</option><option value="/api/stringstore">Other<!-- --> â€º <!-- -->StringStore</option><option value="/api/vectors">Other<!-- --> â€º <!-- -->Vectors</option><option value="/api/vocab">Other<!-- --> â€º <!-- -->Vocab</option><option value="/api/cython">Cython<!-- --> â€º <!-- -->Architecture</option><option value="/api/cython-classes">Cython<!-- --> â€º <!-- -->Classes</option><option value="/api/cython-structs">Cython<!-- --> â€º <!-- -->Structs</option><option value="/api/legacy">Legacy<!-- --> â€º <!-- -->Legacy functions</option></select></div><ul class="sidebar_section__DArOO"><li class="sidebar_label__V3K28">Overview</li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api">Library Architecture</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/architectures">Model Architectures</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/data-formats">Data Formats</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/cli">Command Line</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/top-level">Functions</a></li></ul><ul class="sidebar_section__DArOO"><li class="sidebar_label__V3K28">Containers</li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/doc">Doc</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/docbin">DocBin</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/example">Example</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/language">Language</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/lexeme">Lexeme</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/span">Span</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/spangroup">SpanGroup</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/token">Token</a></li></ul><ul class="sidebar_section__DArOO"><li class="sidebar_label__V3K28">Pipeline</li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/attributeruler">AttributeRuler</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/coref">CoreferenceResolver</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/dependencyparser">DependencyParser</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/edittreelemmatizer">EditTreeLemmatizer</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/entitylinker">EntityLinker</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/entityrecognizer">EntityRecognizer</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/entityruler">EntityRuler</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/lemmatizer">Lemmatizer</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/morphologizer">Morphologizer</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/sentencerecognizer">SentenceRecognizer</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/sentencizer">Sentencizer</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/spancategorizer">SpanCategorizer</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/span-resolver">SpanResolver</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/spanruler">SpanRuler</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/tagger">Tagger</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/textcategorizer">TextCategorizer</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/tok2vec">Tok2Vec</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/tokenizer">Tokenizer</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/pipe">TrainablePipe</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/transformer">Transformer</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/pipeline-functions">Other Functions</a></li></ul><ul class="sidebar_section__DArOO"><li class="sidebar_label__V3K28">Matchers</li><li><a class="link_root__1Me7D sidebar_link__sKXFP sidebar_is-active__yVTtL is-active" href="/api/dependencymatcher">DependencyMatcher</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/matcher">Matcher</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/phrasematcher">PhraseMatcher</a></li></ul><ul class="sidebar_section__DArOO"><li class="sidebar_label__V3K28">Other</li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/attributes">Attributes</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/corpus">Corpus</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/inmemorylookupkb">InMemoryLookupKB</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/kb">KnowledgeBase</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/lookups">Lookups</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/morphology#morphanalysis">MorphAnalysis</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/morphology">Morphology</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/scorer">Scorer</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/stringstore">StringStore</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/vectors">Vectors</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/vocab">Vocab</a></li></ul><ul class="sidebar_section__DArOO"><li class="sidebar_label__V3K28">Cython</li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/cython">Architecture</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/cython-classes">Classes</a></li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/cython-structs">Structs</a></li></ul><ul class="sidebar_section__DArOO"><li class="sidebar_label__V3K28">Legacy</li><li><a class="link_root__1Me7D sidebar_link__sKXFP" href="/api/legacy">Legacy functions</a></li></ul></menu><main class="main_root__7f6Tj main_with-sidebar__uH1df main_with-asides__ikQT6"><article class="main_content__8zFCH"><header class="title_root__pS2WQ"><div class="title_corner__S0Hac"><a class="link_root__1Me7D button_root__jwipc button_secondary__ukZAk" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/tree/master/spacy/matcher/dependencymatcher.pyx">Source</a></div><h1 id="_title" class="typography_heading__D82WZ typography_h1__b7dt9 title_h1__l3CW1"><span class="heading-text">DependencyMatcher<!-- --> </span></h1><div class="title_tags__PljaK"><span class="tag_root__NTSnK tag_spaced__Q9amH">class</span><span class="tag_root__NTSnK tag_spaced__Q9amH" data-tooltip="This feature is new and was introduced in spaCy v3">v<!-- -->3</span></div><div class="heading-teaser title_teaser__QhwCH">Match subtrees within a dependency parse</div></header><section class="section_root__k1hUl"><p>The <code class="code_inline-code__Bq7ot">DependencyMatcher</code> follows the same API as the <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/matcher"><code class="code_inline-code__Bq7ot">Matcher</code></a>
and <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/phrasematcher"><code class="code_inline-code__Bq7ot">PhraseMatcher</code></a> and lets you match on dependency trees
using
<a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://nlp.stanford.edu/nlp/javadoc/javanlp/edu/stanford/nlp/semgraph/semgrex/SemgrexPattern.html">Semgrex operators</a>.
It requires a pretrained <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/parser"><code class="code_inline-code__Bq7ot">DependencyParser</code></a> or other component
that sets the <code class="code_inline-code__Bq7ot">Token.dep</code> and <code class="code_inline-code__Bq7ot">Token.head</code> attributes. See the
<a class="link_root__1Me7D" href="/usage/rule-based-matching#dependencymatcher">usage guide</a> for examples.</p></section>
<section id="section-patterns" class="section_root__k1hUl"><h2 id="patterns" class="typography_heading__D82WZ typography_h2__hzV3h"><a href="#patterns" class="heading-text typography_permalink__UiIRy">Pattern format <!-- --> </a></h2><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<pre class="code_pre__kzg60"><h4 class="code_title__Zz9rs">Example</h4><code class="code_code__CILJL language-python language-python"></code></pre>
</div></div></aside><p>A pattern added to the <code class="code_inline-code__Bq7ot">DependencyMatcher</code> consists of a list of dictionaries,
with each dictionary describing a token to match. Except for the first
dictionary, which defines an anchor token using only <code class="code_inline-code__Bq7ot">RIGHT_ID</code> and
<code class="code_inline-code__Bq7ot">RIGHT_ATTRS</code>, each pattern should have the following keys:</p><table class="table_root__ZlA_w"><thead><tr class="table_tr__K_tkF"><th class="table_th__QJ9F8">Name</th><th class="table_th__QJ9F8">Description</th></tr></thead><tbody><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">LEFT_ID</code></td><td class="table_td__rmpJx">The name of the left-hand node in the relation, which has been defined in an earlier node. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">str</span></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">REL_OP</code></td><td class="table_td__rmpJx">An operator that describes how the two nodes are related. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">str</span></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">RIGHT_ID</code></td><td class="table_td__rmpJx">A unique name for the right-hand node in the relation. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">str</span></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">RIGHT_ATTRS</code></td><td class="table_td__rmpJx">The token attributes to match for the right-hand node in the same format as patterns provided to the regular token-based <a class="link_root__1Me7D link_nowrap__H7Oxl link_with-icon__NAVDA" href="/api/matcher"><code class="code_inline-code__Bq7ot">Matcher</code></a>. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">Dict<span class="code_cli-arg-subtle__IgB5m">[</span>str<span class="code_cli-arg-subtle__IgB5m">,</span> Any<span class="code_cli-arg-subtle__IgB5m">]</span></span></td></tr></tbody></table><aside class="infobox_root__yNIMg"><h4 class="infobox_title__uDT7C"><span><span class="infobox_emoji__6_YUY" aria-hidden="true">ðŸ“–</span>Designing dependency matcher patterns</span></h4><p>For examples of how to construct dependency matcher patterns for different types
of relations, see the usage guide on
<a class="link_root__1Me7D" href="/usage/rule-based-matching#dependencymatcher">dependency matching</a>.</p></aside><h3 id="operators" class="typography_heading__D82WZ typography_h3__mPKmB"><a href="#operators" class="heading-text typography_permalink__UiIRy">Operators <!-- --> </a></h3><p>The following operators are supported by the <code class="code_inline-code__Bq7ot">DependencyMatcher</code>, most of which
come directly from
<a class="link_root__1Me7D" rel="noopener nofollow noreferrer" target="_blank" href="https://nlp.stanford.edu/nlp/javadoc/javanlp/edu/stanford/nlp/semgraph/semgrex/SemgrexPattern.html">Semgrex</a>:</p><table class="table_root__ZlA_w"><thead><tr class="table_tr__K_tkF"><th class="table_th__QJ9F8">Symbol</th><th class="table_th__QJ9F8">Description</th></tr></thead><tbody><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">A &lt; B</code></td><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">A</code> is the immediate dependent of <code class="code_inline-code__Bq7ot">B</code>.</td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">A &gt; B</code></td><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">A</code> is the immediate head of <code class="code_inline-code__Bq7ot">B</code>.</td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">A &lt;&lt; B</code></td><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">A</code> is the dependent in a chain to <code class="code_inline-code__Bq7ot">B</code> following dep â†’ head paths.</td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">A &gt;&gt; B</code></td><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">A</code> is the head in a chain to <code class="code_inline-code__Bq7ot">B</code> following head â†’ dep paths.</td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">A . B</code></td><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">A</code> immediately precedes <code class="code_inline-code__Bq7ot">B</code>, i.e. <code class="code_inline-code__Bq7ot">A.i == B.i - 1</code>, and both are within the same dependency tree.</td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">A .* B</code></td><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">A</code> precedes <code class="code_inline-code__Bq7ot">B</code>, i.e. <code class="code_inline-code__Bq7ot">A.i &lt; B.i</code>, and both are within the same dependency tree <em>(not in Semgrex)</em>.</td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">A ; B</code></td><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">A</code> immediately follows <code class="code_inline-code__Bq7ot">B</code>, i.e. <code class="code_inline-code__Bq7ot">A.i == B.i + 1</code>, and both are within the same dependency tree <em>(not in Semgrex)</em>.</td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">A ;* B</code></td><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">A</code> follows <code class="code_inline-code__Bq7ot">B</code>, i.e. <code class="code_inline-code__Bq7ot">A.i &gt; B.i</code>, and both are within the same dependency tree <em>(not in Semgrex)</em>.</td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">A $+ B</code></td><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">B</code> is a right immediate sibling of <code class="code_inline-code__Bq7ot">A</code>, i.e. <code class="code_inline-code__Bq7ot">A</code> and <code class="code_inline-code__Bq7ot">B</code> have the same parent and <code class="code_inline-code__Bq7ot">A.i == B.i - 1</code>.</td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">A $- B</code></td><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">B</code> is a left immediate sibling of <code class="code_inline-code__Bq7ot">A</code>, i.e. <code class="code_inline-code__Bq7ot">A</code> and <code class="code_inline-code__Bq7ot">B</code> have the same parent and <code class="code_inline-code__Bq7ot">A.i == B.i + 1</code>.</td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">A $++ B</code></td><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">B</code> is a right sibling of <code class="code_inline-code__Bq7ot">A</code>, i.e. <code class="code_inline-code__Bq7ot">A</code> and <code class="code_inline-code__Bq7ot">B</code> have the same parent and <code class="code_inline-code__Bq7ot">A.i &lt; B.i</code>.</td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">A $-- B</code></td><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">B</code> is a left sibling of <code class="code_inline-code__Bq7ot">A</code>, i.e. <code class="code_inline-code__Bq7ot">A</code> and <code class="code_inline-code__Bq7ot">B</code> have the same parent and <code class="code_inline-code__Bq7ot">A.i &gt; B.i</code>.</td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">A &gt;++ B</code></td><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">B</code> is a right child of <code class="code_inline-code__Bq7ot">A</code>, i.e. <code class="code_inline-code__Bq7ot">A</code> is a parent of <code class="code_inline-code__Bq7ot">B</code> and <code class="code_inline-code__Bq7ot">A.i &lt; B.i</code> <em>(not in Semgrex)</em>.</td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">A &gt;-- B</code></td><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">B</code> is a left child of <code class="code_inline-code__Bq7ot">A</code>, i.e. <code class="code_inline-code__Bq7ot">A</code> is a parent of <code class="code_inline-code__Bq7ot">B</code> and <code class="code_inline-code__Bq7ot">A.i &gt; B.i</code> <em>(not in Semgrex)</em>.</td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">A &lt;++ B</code></td><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">B</code> is a right parent of <code class="code_inline-code__Bq7ot">A</code>, i.e. <code class="code_inline-code__Bq7ot">A</code> is a child of <code class="code_inline-code__Bq7ot">B</code> and <code class="code_inline-code__Bq7ot">A.i &lt; B.i</code> <em>(not in Semgrex)</em>.</td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">A &lt;-- B</code></td><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">B</code> is a left parent of <code class="code_inline-code__Bq7ot">A</code>, i.e. <code class="code_inline-code__Bq7ot">A</code> is a child of <code class="code_inline-code__Bq7ot">B</code> and <code class="code_inline-code__Bq7ot">A.i &gt; B.i</code> <em>(not in Semgrex)</em>.</td></tr></tbody></table></section>
<section id="section-init" class="section_root__k1hUl"><h2 id="init" class="typography_heading__D82WZ typography_h2__hzV3h"><a href="#init" class="heading-text typography_permalink__UiIRy">DependencyMatcher.__init__ <!-- --> </a><span class="tag_root__NTSnK tag_spaced__Q9amH">method</span></h2><p>Create a <code class="code_inline-code__Bq7ot">DependencyMatcher</code>.</p><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-python language-python"></code></pre>
</div></div></aside><table class="table_root__ZlA_w"><thead><tr class="table_tr__K_tkF"><th class="table_th__QJ9F8">Name</th><th class="table_th__QJ9F8">Description</th></tr></thead><tbody><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">vocab</code></td><td class="table_td__rmpJx">The vocabulary object, which must be shared with the documents the matcher will operate on. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation"><a class="link_root__1Me7D" href="/api/vocab">Vocab</a></span></td></tr><tr class="table_tr__K_tkF table_divider__DRQHe"><td class="table_td__rmpJx"><em>keyword-only</em></td><td class="table_td__rmpJx"></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">validate</code></td><td class="table_td__rmpJx">Validate all patterns added to this matcher. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">bool</span></td></tr></tbody></table></section>
<section id="section-call" class="section_root__k1hUl"><h2 id="call" class="typography_heading__D82WZ typography_h2__hzV3h"><a href="#call" class="heading-text typography_permalink__UiIRy">DependencyMatcher.__call__ <!-- --> </a><span class="tag_root__NTSnK tag_spaced__Q9amH">method</span></h2><p>Find all tokens matching the supplied patterns on the <code class="code_inline-code__Bq7ot">Doc</code> or <code class="code_inline-code__Bq7ot">Span</code>.</p><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-python language-python"></code></pre>
</div></div></aside><table class="table_root__ZlA_w"><thead><tr class="table_tr__K_tkF"><th class="table_th__QJ9F8">Name</th><th class="table_th__QJ9F8">Description</th></tr></thead><tbody><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">doclike</code></td><td class="table_td__rmpJx">The <code class="code_inline-code__Bq7ot">Doc</code> or <code class="code_inline-code__Bq7ot">Span</code> to match over. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">Union<span class="code_cli-arg-subtle__IgB5m">[</span><a class="link_root__1Me7D" href="/api/doc">Doc</a><span class="code_cli-arg-subtle__IgB5m">,</span><a class="link_root__1Me7D" href="/api/span">Span</a><span class="code_cli-arg-subtle__IgB5m">]</span></span></td></tr><tr class="table_tr__K_tkF table_footer__gJRIy table-footer"><td class="table_td__rmpJx"><strong>RETURNS</strong></td><td class="table_td__rmpJx">A list of <code class="code_inline-code__Bq7ot">(match_id, token_ids)</code> tuples, describing the matches. The <code class="code_inline-code__Bq7ot">match_id</code> is the ID of the match pattern and <code class="code_inline-code__Bq7ot">token_ids</code> is a list of token indices matched by the pattern, where the position of each token in the list corresponds to the position of the node specification in the pattern. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">List<span class="code_cli-arg-subtle__IgB5m">[</span>Tuple<span class="code_cli-arg-subtle__IgB5m">[</span>int<span class="code_cli-arg-subtle__IgB5m">,</span> List<span class="code_cli-arg-subtle__IgB5m">[</span>int<span class="code_cli-arg-subtle__IgB5m">]</span><span class="code_cli-arg-subtle__IgB5m">]</span><span class="code_cli-arg-subtle__IgB5m">]</span></span></td></tr></tbody></table></section>
<section id="section-len" class="section_root__k1hUl"><h2 id="len" class="typography_heading__D82WZ typography_h2__hzV3h"><a href="#len" class="heading-text typography_permalink__UiIRy">DependencyMatcher.__len__ <!-- --> </a><span class="tag_root__NTSnK tag_spaced__Q9amH">method</span></h2><p>Get the number of rules added to the dependency matcher. Note that this only
returns the number of rules (identical with the number of IDs), not the number
of individual patterns.</p><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-python language-python"></code></pre>
</div></div></aside><table class="table_root__ZlA_w"><thead><tr class="table_tr__K_tkF"><th class="table_th__QJ9F8">Name</th><th class="table_th__QJ9F8">Description</th></tr></thead><tbody><tr class="table_tr__K_tkF table_footer__gJRIy table-footer"><td class="table_td__rmpJx"><strong>RETURNS</strong></td><td class="table_td__rmpJx">The number of rules. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">int</span></td></tr></tbody></table></section>
<section id="section-contains" class="section_root__k1hUl"><h2 id="contains" class="typography_heading__D82WZ typography_h2__hzV3h"><a href="#contains" class="heading-text typography_permalink__UiIRy">DependencyMatcher.__contains__ <!-- --> </a><span class="tag_root__NTSnK tag_spaced__Q9amH">method</span></h2><p>Check whether the matcher contains rules for a match ID.</p><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-python language-python"></code></pre>
</div></div></aside><table class="table_root__ZlA_w"><thead><tr class="table_tr__K_tkF"><th class="table_th__QJ9F8">Name</th><th class="table_th__QJ9F8">Description</th></tr></thead><tbody><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">key</code></td><td class="table_td__rmpJx">The match ID. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">str</span></td></tr><tr class="table_tr__K_tkF table_footer__gJRIy table-footer"><td class="table_td__rmpJx"><strong>RETURNS</strong></td><td class="table_td__rmpJx">Whether the matcher contains rules for this match ID. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">bool</span></td></tr></tbody></table></section>
<section id="section-add" class="section_root__k1hUl"><h2 id="add" class="typography_heading__D82WZ typography_h2__hzV3h"><a href="#add" class="heading-text typography_permalink__UiIRy">DependencyMatcher.add <!-- --> </a><span class="tag_root__NTSnK tag_spaced__Q9amH">method</span></h2><p>Add a rule to the matcher, consisting of an ID key, one or more patterns, and an
optional callback function to act on the matches. The callback function will
receive the arguments <code class="code_inline-code__Bq7ot">matcher</code>, <code class="code_inline-code__Bq7ot">doc</code>, <code class="code_inline-code__Bq7ot">i</code> and <code class="code_inline-code__Bq7ot">matches</code>. If a pattern already
exists for the given ID, the patterns will be extended. An <code class="code_inline-code__Bq7ot">on_match</code> callback
will be overwritten.</p><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-python language-python"></code></pre>
</div></div></aside><table class="table_root__ZlA_w"><thead><tr class="table_tr__K_tkF"><th class="table_th__QJ9F8">Name</th><th class="table_th__QJ9F8">Description</th></tr></thead><tbody><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">match_id</code></td><td class="table_td__rmpJx">An ID for the patterns. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">str</span></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">patterns</code></td><td class="table_td__rmpJx">A list of match patterns. A pattern consists of a list of dicts, where each dict describes a token in the tree. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM code_wrap__b41os" role="code" aria-label="Type annotation">List<span class="code_cli-arg-subtle__IgB5m">[</span>List<span class="code_cli-arg-subtle__IgB5m">[</span>Dict<span class="code_cli-arg-subtle__IgB5m">[</span>str<span class="code_cli-arg-subtle__IgB5m">,</span> Union<span class="code_cli-arg-subtle__IgB5m">[</span>str<span class="code_cli-arg-subtle__IgB5m">,</span> Dict<span class="code_cli-arg-subtle__IgB5m">]</span><span class="code_cli-arg-subtle__IgB5m">]</span><span class="code_cli-arg-subtle__IgB5m">]</span><span class="code_cli-arg-subtle__IgB5m">]</span></span></td></tr><tr class="table_tr__K_tkF table_divider__DRQHe"><td class="table_td__rmpJx"><em>keyword-only</em></td><td class="table_td__rmpJx"></td></tr><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">on_match</code></td><td class="table_td__rmpJx">Callback function to act on matches. Takes the arguments <code class="code_inline-code__Bq7ot">matcher</code>, <code class="code_inline-code__Bq7ot">doc</code>, <code class="code_inline-code__Bq7ot">i</code> and <code class="code_inline-code__Bq7ot">matches</code>. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM code_wrap__b41os" role="code" aria-label="Type annotation">Optional<span class="code_cli-arg-subtle__IgB5m">[</span>Callable<span class="code_cli-arg-subtle__IgB5m">[</span><span class="code_cli-arg-subtle__IgB5m">[</span>DependencyMatcher<span class="code_cli-arg-subtle__IgB5m">,</span><a class="link_root__1Me7D" href="/api/doc">Doc</a><span class="code_cli-arg-subtle__IgB5m">,</span> int<span class="code_cli-arg-subtle__IgB5m">,</span> List<span class="code_cli-arg-subtle__IgB5m">[</span>Tuple<span class="code_cli-arg-subtle__IgB5m">]</span><span class="code_cli-arg-subtle__IgB5m">,</span> Any<span class="code_cli-arg-subtle__IgB5m">]</span><span class="code_cli-arg-subtle__IgB5m">]</span></span></td></tr></tbody></table></section>
<section id="section-get" class="section_root__k1hUl"><h2 id="get" class="typography_heading__D82WZ typography_h2__hzV3h"><a href="#get" class="heading-text typography_permalink__UiIRy">DependencyMatcher.get <!-- --> </a><span class="tag_root__NTSnK tag_spaced__Q9amH">method</span></h2><p>Retrieve the pattern stored for a key. Returns the rule as an
<code class="code_inline-code__Bq7ot">(on_match, patterns)</code> tuple containing the callback and available patterns.</p><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-python language-python"></code></pre>
</div></div></aside><table class="table_root__ZlA_w"><thead><tr class="table_tr__K_tkF"><th class="table_th__QJ9F8">Name</th><th class="table_th__QJ9F8">Description</th></tr></thead><tbody><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">key</code></td><td class="table_td__rmpJx">The ID of the match rule. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">str</span></td></tr><tr class="table_tr__K_tkF table_footer__gJRIy table-footer"><td class="table_td__rmpJx"><strong>RETURNS</strong></td><td class="table_td__rmpJx">The rule, as an <code class="code_inline-code__Bq7ot">(on_match, patterns)</code> tuple. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM code_wrap__b41os" role="code" aria-label="Type annotation">Tuple<span class="code_cli-arg-subtle__IgB5m">[</span>Optional<span class="code_cli-arg-subtle__IgB5m">[</span>Callable<span class="code_cli-arg-subtle__IgB5m">]</span><span class="code_cli-arg-subtle__IgB5m">,</span> List<span class="code_cli-arg-subtle__IgB5m">[</span>List<span class="code_cli-arg-subtle__IgB5m">[</span>Union<span class="code_cli-arg-subtle__IgB5m">[</span>Dict<span class="code_cli-arg-subtle__IgB5m">,</span> Tuple<span class="code_cli-arg-subtle__IgB5m">]</span><span class="code_cli-arg-subtle__IgB5m">]</span><span class="code_cli-arg-subtle__IgB5m">]</span><span class="code_cli-arg-subtle__IgB5m">]</span></span></td></tr></tbody></table></section>
<section id="section-remove" class="section_root__k1hUl"><h2 id="remove" class="typography_heading__D82WZ typography_h2__hzV3h"><a href="#remove" class="heading-text typography_permalink__UiIRy">DependencyMatcher.remove <!-- --> </a><span class="tag_root__NTSnK tag_spaced__Q9amH">method</span></h2><p>Remove a rule from the dependency matcher. A <code class="code_inline-code__Bq7ot">KeyError</code> is raised if the match
ID does not exist.</p><aside class="aside_root__667WA"><div class="aside_content__ZN6qm" role="complementary"><div class="aside_text__LFH_Q">
<h4 class="typography_heading__D82WZ typography_h4__CDRaM"><span class="heading-text">Example<!-- --> </span></h4>
<pre class="code_pre__kzg60"><code class="code_code__CILJL language-python language-python"></code></pre>
</div></div></aside><table class="table_root__ZlA_w"><thead><tr class="table_tr__K_tkF"><th class="table_th__QJ9F8">Name</th><th class="table_th__QJ9F8">Description</th></tr></thead><tbody><tr class="table_tr__K_tkF"><td class="table_td__rmpJx"><code class="code_inline-code__Bq7ot">key</code></td><td class="table_td__rmpJx">The ID of the match rule. <span class="type-annotation language-python code_inline-code__Bq7ot code_type-annotation__6N9RM" role="code" aria-label="Type annotation">str</span></td></tr></tbody></table></section><div class="grid_root__EfDZl grid_spacing__fhBCv grid_half__xoJZs"><div style="margin-top:var(--spacing-lg)"><a class="link_root__1Me7D button_root__jwipc button_secondary__ukZAk" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/tree/master/website/docs/api/dependencymatcher.mdx">Suggest edits</a></div></div></article><div class="main_asides__RITE5" style="background-image:url(/_next/static/media/pattern_green.92f07e1d.png"></div><footer class="footer_root__zlkjP"><div class="grid_root__EfDZl footer_content__LaE1F grid_narrow__x_6xS grid_spacing__fhBCv grid_third__edHuB"><section><ul class="footer_column__DPe22"><li class="footer_label__xK7_s">spaCy</li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/usage">Usage</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/models">Models</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/api">API Reference</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://course.spacy.io">Online Course</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://explosion.ai/custom-solutions">Custom Solutions</a></li></ul></section><section><ul class="footer_column__DPe22"><li class="footer_label__xK7_s">Community</li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="/universe">Universe</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/discussions">GitHub Discussions</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy/issues">Issue Tracker</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="http://stackoverflow.com/questions/tagged/spacy">Stack Overflow</a></li></ul></section><section><ul class="footer_column__DPe22"><li class="footer_label__xK7_s">Connect</li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://twitter.com/spacy_io">Twitter</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/explosion/spaCy">GitHub</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" rel="noopener nofollow noreferrer" target="_blank" href="https://youtube.com/c/ExplosionAI">YouTube</a></li><li><a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://explosion.ai/blog">Blog</a></li></ul></section><section class="footer_full___icln"><ul class="footer_column__DPe22"><li class="footer_label__xK7_s">Stay in the loop!</li><li>Receive updates about new releases, tutorials and more.</li><li><form id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" action="//spacy.us12.list-manage.com/subscribe/post?u=83b0498b1e7fa3c91ce68c3f1&amp;amp;id=ecc82e0493" method="post" target="_blank" novalidate=""><div style="position:absolute;left:-5000px" aria-hidden="true"><input type="text" name="b_83b0498b1e7fa3c91ce68c3f1_ecc82e0493" tabindex="-1" value=""/></div><div class="newsletter_root__uh6MU"><input class="newsletter_input___SMSB" id="mce-EMAIL" type="email" name="EMAIL" placeholder="Your email" aria-label="Your email"/><button class="newsletter_button__gKW8E" id="mc-embedded-subscribe" type="submit" name="subscribe">Sign up</button></div></form></li></ul></section></div><div class="footer_content__LaE1F footer_copy__rbjvc"><span>Â© 2016-<!-- -->2023<!-- --> <a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://explosion.ai">Explosion</a></span><a class="link_root__1Me7D footer_logo__BthsJ link_no-link-layout__RPvod" aria-label="Explosion" href="https://explosion.ai"></a><a class="link_root__1Me7D link_no-link-layout__RPvod" href="https://explosion.ai/legal">Legal / Imprint</a></div></footer></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"DependencyMatcher","teaser":"Match subtrees within a dependency parse","tag":"class","version":3,"source":"spacy/matcher/dependencymatcher.pyx","slug":"/api/dependencymatcher","mdx":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    section: \"section\",\n    p: \"p\",\n    a: \"a\",\n    h2: \"h2\",\n    blockquote: \"blockquote\",\n    pre: \"pre\",\n    code: \"code\",\n    table: \"table\",\n    thead: \"thead\",\n    tr: \"tr\",\n    th: \"th\",\n    tbody: \"tbody\",\n    td: \"td\",\n    del: \"del\",\n    h3: \"h3\",\n    em: \"em\",\n    h4: \"h4\",\n    strong: \"strong\"\n  }, _provideComponents(), props.components), {InlineCode, Infobox} = _components;\n  if (!Infobox) _missingMdxReference(\"Infobox\", true);\n  if (!InlineCode) _missingMdxReference(\"InlineCode\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.section, {\n      children: _jsxs(_components.p, {\n        children: [\"The \", _jsx(InlineCode, {\n          children: \"DependencyMatcher\"\n        }), \" follows the same API as the \", _jsx(_components.a, {\n          href: \"/api/matcher\",\n          children: _jsx(InlineCode, {\n            children: \"Matcher\"\n          })\n        }), \"\\nand \", _jsx(_components.a, {\n          href: \"/api/phrasematcher\",\n          children: _jsx(InlineCode, {\n            children: \"PhraseMatcher\"\n          })\n        }), \" and lets you match on dependency trees\\nusing\\n\", _jsx(_components.a, {\n          href: \"https://nlp.stanford.edu/nlp/javadoc/javanlp/edu/stanford/nlp/semgraph/semgrex/SemgrexPattern.html\",\n          children: \"Semgrex operators\"\n        }), \".\\nIt requires a pretrained \", _jsx(_components.a, {\n          href: \"/api/parser\",\n          children: _jsx(InlineCode, {\n            children: \"DependencyParser\"\n          })\n        }), \" or other component\\nthat sets the \", _jsx(InlineCode, {\n          children: \"Token.dep\"\n        }), \" and \", _jsx(InlineCode, {\n          children: \"Token.head\"\n        }), \" attributes. See the\\n\", _jsx(_components.a, {\n          href: \"/usage/rule-based-matching#dependencymatcher\",\n          children: \"usage guide\"\n        }), \" for examples.\"]\n      })\n    }), \"\\n\", _jsxs(_components.section, {\n      id: \"section-patterns\",\n      children: [_jsx(_components.h2, {\n        id: \"patterns\",\n        children: \"Pattern format \"\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-python\",\n            lang: \"python\",\n            title: \"Example\",\n            children: \"# pattern: \\\"[subject] ... initially founded\\\"\\n[\\n  # anchor token: founded\\n  {\\n    \\\"RIGHT_ID\\\": \\\"founded\\\",\\n    \\\"RIGHT_ATTRS\\\": {\\\"ORTH\\\": \\\"founded\\\"}\\n  },\\n  # founded -\u003e subject\\n  {\\n    \\\"LEFT_ID\\\": \\\"founded\\\",\\n    \\\"REL_OP\\\": \\\"\u003e\\\",\\n    \\\"RIGHT_ID\\\": \\\"subject\\\",\\n    \\\"RIGHT_ATTRS\\\": {\\\"DEP\\\": \\\"nsubj\\\"}\\n  },\\n  # \\\"founded\\\" follows \\\"initially\\\"\\n  {\\n    \\\"LEFT_ID\\\": \\\"founded\\\",\\n    \\\"REL_OP\\\": \\\";\\\",\\n    \\\"RIGHT_ID\\\": \\\"initially\\\",\\n    \\\"RIGHT_ATTRS\\\": {\\\"ORTH\\\": \\\"initially\\\"}\\n  }\\n]\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsxs(_components.p, {\n        children: [\"A pattern added to the \", _jsx(InlineCode, {\n          children: \"DependencyMatcher\"\n        }), \" consists of a list of dictionaries,\\nwith each dictionary describing a token to match. Except for the first\\ndictionary, which defines an anchor token using only \", _jsx(InlineCode, {\n          children: \"RIGHT_ID\"\n        }), \" and\\n\", _jsx(InlineCode, {\n          children: \"RIGHT_ATTRS\"\n        }), \", each pattern should have the following keys:\"]\n      }), _jsxs(_components.table, {\n        children: [_jsx(_components.thead, {\n          children: _jsxs(_components.tr, {\n            children: [_jsx(_components.th, {\n              children: \"Name\"\n            }), _jsx(_components.th, {\n              children: \"Description\"\n            })]\n          })\n        }), _jsxs(_components.tbody, {\n          children: [_jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"LEFT_ID\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The name of the left-hand node in the relation, which has been defined in an earlier node. \", _jsx(_components.del, {\n                children: \"str\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"REL_OP\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"An operator that describes how the two nodes are related. \", _jsx(_components.del, {\n                children: \"str\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"RIGHT_ID\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"A unique name for the right-hand node in the relation. \", _jsx(_components.del, {\n                children: \"str\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"RIGHT_ATTRS\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The token attributes to match for the right-hand node in the same format as patterns provided to the regular token-based \", _jsx(_components.a, {\n                href: \"/api/matcher\",\n                children: _jsx(InlineCode, {\n                  children: \"Matcher\"\n                })\n              }), \". \", _jsx(_components.del, {\n                children: \"Dict[str, Any]\"\n              })]\n            })]\n          })]\n        })]\n      }), _jsx(Infobox, {\n        title: \"Designing dependency matcher patterns\",\n        emoji: \"ðŸ“–\",\n        children: _jsxs(_components.p, {\n          children: [\"For examples of how to construct dependency matcher patterns for different types\\nof relations, see the usage guide on\\n\", _jsx(_components.a, {\n            href: \"/usage/rule-based-matching#dependencymatcher\",\n            children: \"dependency matching\"\n          }), \".\"]\n        })\n      }), _jsx(_components.h3, {\n        id: \"operators\",\n        children: \"Operators \"\n      }), _jsxs(_components.p, {\n        children: [\"The following operators are supported by the \", _jsx(InlineCode, {\n          children: \"DependencyMatcher\"\n        }), \", most of which\\ncome directly from\\n\", _jsx(_components.a, {\n          href: \"https://nlp.stanford.edu/nlp/javadoc/javanlp/edu/stanford/nlp/semgraph/semgrex/SemgrexPattern.html\",\n          children: \"Semgrex\"\n        }), \":\"]\n      }), _jsxs(_components.table, {\n        children: [_jsx(_components.thead, {\n          children: _jsxs(_components.tr, {\n            children: [_jsx(_components.th, {\n              children: \"Symbol\"\n            }), _jsx(_components.th, {\n              children: \"Description\"\n            })]\n          })\n        }), _jsxs(_components.tbody, {\n          children: [_jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"A \u003c B\"\n              })\n            }), _jsxs(_components.td, {\n              children: [_jsx(InlineCode, {\n                children: \"A\"\n              }), \" is the immediate dependent of \", _jsx(InlineCode, {\n                children: \"B\"\n              }), \".\"]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"A \u003e B\"\n              })\n            }), _jsxs(_components.td, {\n              children: [_jsx(InlineCode, {\n                children: \"A\"\n              }), \" is the immediate head of \", _jsx(InlineCode, {\n                children: \"B\"\n              }), \".\"]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"A \u003c\u003c B\"\n              })\n            }), _jsxs(_components.td, {\n              children: [_jsx(InlineCode, {\n                children: \"A\"\n              }), \" is the dependent in a chain to \", _jsx(InlineCode, {\n                children: \"B\"\n              }), \" following dep â†’ head paths.\"]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"A \u003e\u003e B\"\n              })\n            }), _jsxs(_components.td, {\n              children: [_jsx(InlineCode, {\n                children: \"A\"\n              }), \" is the head in a chain to \", _jsx(InlineCode, {\n                children: \"B\"\n              }), \" following head â†’ dep paths.\"]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"A . B\"\n              })\n            }), _jsxs(_components.td, {\n              children: [_jsx(InlineCode, {\n                children: \"A\"\n              }), \" immediately precedes \", _jsx(InlineCode, {\n                children: \"B\"\n              }), \", i.e. \", _jsx(InlineCode, {\n                children: \"A.i == B.i - 1\"\n              }), \", and both are within the same dependency tree.\"]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"A .* B\"\n              })\n            }), _jsxs(_components.td, {\n              children: [_jsx(InlineCode, {\n                children: \"A\"\n              }), \" precedes \", _jsx(InlineCode, {\n                children: \"B\"\n              }), \", i.e. \", _jsx(InlineCode, {\n                children: \"A.i \u003c B.i\"\n              }), \", and both are within the same dependency tree \", _jsx(_components.em, {\n                children: \"(not in Semgrex)\"\n              }), \".\"]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"A ; B\"\n              })\n            }), _jsxs(_components.td, {\n              children: [_jsx(InlineCode, {\n                children: \"A\"\n              }), \" immediately follows \", _jsx(InlineCode, {\n                children: \"B\"\n              }), \", i.e. \", _jsx(InlineCode, {\n                children: \"A.i == B.i + 1\"\n              }), \", and both are within the same dependency tree \", _jsx(_components.em, {\n                children: \"(not in Semgrex)\"\n              }), \".\"]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"A ;* B\"\n              })\n            }), _jsxs(_components.td, {\n              children: [_jsx(InlineCode, {\n                children: \"A\"\n              }), \" follows \", _jsx(InlineCode, {\n                children: \"B\"\n              }), \", i.e. \", _jsx(InlineCode, {\n                children: \"A.i \u003e B.i\"\n              }), \", and both are within the same dependency tree \", _jsx(_components.em, {\n                children: \"(not in Semgrex)\"\n              }), \".\"]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"A $+ B\"\n              })\n            }), _jsxs(_components.td, {\n              children: [_jsx(InlineCode, {\n                children: \"B\"\n              }), \" is a right immediate sibling of \", _jsx(InlineCode, {\n                children: \"A\"\n              }), \", i.e. \", _jsx(InlineCode, {\n                children: \"A\"\n              }), \" and \", _jsx(InlineCode, {\n                children: \"B\"\n              }), \" have the same parent and \", _jsx(InlineCode, {\n                children: \"A.i == B.i - 1\"\n              }), \".\"]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"A $- B\"\n              })\n            }), _jsxs(_components.td, {\n              children: [_jsx(InlineCode, {\n                children: \"B\"\n              }), \" is a left immediate sibling of \", _jsx(InlineCode, {\n                children: \"A\"\n              }), \", i.e. \", _jsx(InlineCode, {\n                children: \"A\"\n              }), \" and \", _jsx(InlineCode, {\n                children: \"B\"\n              }), \" have the same parent and \", _jsx(InlineCode, {\n                children: \"A.i == B.i + 1\"\n              }), \".\"]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"A $++ B\"\n              })\n            }), _jsxs(_components.td, {\n              children: [_jsx(InlineCode, {\n                children: \"B\"\n              }), \" is a right sibling of \", _jsx(InlineCode, {\n                children: \"A\"\n              }), \", i.e. \", _jsx(InlineCode, {\n                children: \"A\"\n              }), \" and \", _jsx(InlineCode, {\n                children: \"B\"\n              }), \" have the same parent and \", _jsx(InlineCode, {\n                children: \"A.i \u003c B.i\"\n              }), \".\"]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"A $-- B\"\n              })\n            }), _jsxs(_components.td, {\n              children: [_jsx(InlineCode, {\n                children: \"B\"\n              }), \" is a left sibling of \", _jsx(InlineCode, {\n                children: \"A\"\n              }), \", i.e. \", _jsx(InlineCode, {\n                children: \"A\"\n              }), \" and \", _jsx(InlineCode, {\n                children: \"B\"\n              }), \" have the same parent and \", _jsx(InlineCode, {\n                children: \"A.i \u003e B.i\"\n              }), \".\"]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"A \u003e++ B\"\n              })\n            }), _jsxs(_components.td, {\n              children: [_jsx(InlineCode, {\n                children: \"B\"\n              }), \" is a right child of \", _jsx(InlineCode, {\n                children: \"A\"\n              }), \", i.e. \", _jsx(InlineCode, {\n                children: \"A\"\n              }), \" is a parent of \", _jsx(InlineCode, {\n                children: \"B\"\n              }), \" and \", _jsx(InlineCode, {\n                children: \"A.i \u003c B.i\"\n              }), \" \", _jsx(_components.em, {\n                children: \"(not in Semgrex)\"\n              }), \".\"]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"A \u003e-- B\"\n              })\n            }), _jsxs(_components.td, {\n              children: [_jsx(InlineCode, {\n                children: \"B\"\n              }), \" is a left child of \", _jsx(InlineCode, {\n                children: \"A\"\n              }), \", i.e. \", _jsx(InlineCode, {\n                children: \"A\"\n              }), \" is a parent of \", _jsx(InlineCode, {\n                children: \"B\"\n              }), \" and \", _jsx(InlineCode, {\n                children: \"A.i \u003e B.i\"\n              }), \" \", _jsx(_components.em, {\n                children: \"(not in Semgrex)\"\n              }), \".\"]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"A \u003c++ B\"\n              })\n            }), _jsxs(_components.td, {\n              children: [_jsx(InlineCode, {\n                children: \"B\"\n              }), \" is a right parent of \", _jsx(InlineCode, {\n                children: \"A\"\n              }), \", i.e. \", _jsx(InlineCode, {\n                children: \"A\"\n              }), \" is a child of \", _jsx(InlineCode, {\n                children: \"B\"\n              }), \" and \", _jsx(InlineCode, {\n                children: \"A.i \u003c B.i\"\n              }), \" \", _jsx(_components.em, {\n                children: \"(not in Semgrex)\"\n              }), \".\"]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"A \u003c-- B\"\n              })\n            }), _jsxs(_components.td, {\n              children: [_jsx(InlineCode, {\n                children: \"B\"\n              }), \" is a left parent of \", _jsx(InlineCode, {\n                children: \"A\"\n              }), \", i.e. \", _jsx(InlineCode, {\n                children: \"A\"\n              }), \" is a child of \", _jsx(InlineCode, {\n                children: \"B\"\n              }), \" and \", _jsx(InlineCode, {\n                children: \"A.i \u003e B.i\"\n              }), \" \", _jsx(_components.em, {\n                children: \"(not in Semgrex)\"\n              }), \".\"]\n            })]\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsxs(_components.section, {\n      id: \"section-init\",\n      children: [_jsx(_components.h2, {\n        id: \"init\",\n        tag: \"method\",\n        children: \"DependencyMatcher.__init__ \"\n      }), _jsxs(_components.p, {\n        children: [\"Create a \", _jsx(InlineCode, {\n          children: \"DependencyMatcher\"\n        }), \".\"]\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-python\",\n            lang: \"python\",\n            children: \"from spacy.matcher import DependencyMatcher\\nmatcher = DependencyMatcher(nlp.vocab)\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsxs(_components.table, {\n        children: [_jsx(_components.thead, {\n          children: _jsxs(_components.tr, {\n            children: [_jsx(_components.th, {\n              children: \"Name\"\n            }), _jsx(_components.th, {\n              children: \"Description\"\n            })]\n          })\n        }), _jsxs(_components.tbody, {\n          children: [_jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"vocab\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The vocabulary object, which must be shared with the documents the matcher will operate on. \", _jsx(_components.del, {\n                children: \"Vocab\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(_components.em, {\n                children: \"keyword-only\"\n              })\n            }), _jsx(_components.td, {})]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"validate\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"Validate all patterns added to this matcher. \", _jsx(_components.del, {\n                children: \"bool\"\n              })]\n            })]\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsxs(_components.section, {\n      id: \"section-call\",\n      children: [_jsx(_components.h2, {\n        id: \"call\",\n        tag: \"method\",\n        children: \"DependencyMatcher.__call__ \"\n      }), _jsxs(_components.p, {\n        children: [\"Find all tokens matching the supplied patterns on the \", _jsx(InlineCode, {\n          children: \"Doc\"\n        }), \" or \", _jsx(InlineCode, {\n          children: \"Span\"\n        }), \".\"]\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-python\",\n            lang: \"python\",\n            children: \"from spacy.matcher import DependencyMatcher\\n\\nmatcher = DependencyMatcher(nlp.vocab)\\npattern = [{\\\"RIGHT_ID\\\": \\\"founded_id\\\",\\n  \\\"RIGHT_ATTRS\\\": {\\\"ORTH\\\": \\\"founded\\\"}}]\\nmatcher.add(\\\"FOUNDED\\\", [pattern])\\ndoc = nlp(\\\"Bill Gates founded Microsoft.\\\")\\nmatches = matcher(doc)\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsxs(_components.table, {\n        children: [_jsx(_components.thead, {\n          children: _jsxs(_components.tr, {\n            children: [_jsx(_components.th, {\n              children: \"Name\"\n            }), _jsx(_components.th, {\n              children: \"Description\"\n            })]\n          })\n        }), _jsxs(_components.tbody, {\n          children: [_jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"doclike\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The \", _jsx(InlineCode, {\n                children: \"Doc\"\n              }), \" or \", _jsx(InlineCode, {\n                children: \"Span\"\n              }), \" to match over. \", _jsx(_components.del, {\n                children: \"Union[Doc, Span]\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(_components.strong, {\n                children: \"RETURNS\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"A list of \", _jsx(InlineCode, {\n                children: \"(match_id, token_ids)\"\n              }), \" tuples, describing the matches. The \", _jsx(InlineCode, {\n                children: \"match_id\"\n              }), \" is the ID of the match pattern and \", _jsx(InlineCode, {\n                children: \"token_ids\"\n              }), \" is a list of token indices matched by the pattern, where the position of each token in the list corresponds to the position of the node specification in the pattern. \", _jsx(_components.del, {\n                children: \"List[Tuple[int, List[int]]]\"\n              })]\n            })]\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsxs(_components.section, {\n      id: \"section-len\",\n      children: [_jsx(_components.h2, {\n        id: \"len\",\n        tag: \"method\",\n        children: \"DependencyMatcher.__len__ \"\n      }), _jsx(_components.p, {\n        children: \"Get the number of rules added to the dependency matcher. Note that this only\\nreturns the number of rules (identical with the number of IDs), not the number\\nof individual patterns.\"\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-python\",\n            lang: \"python\",\n            children: \"matcher = DependencyMatcher(nlp.vocab)\\nassert len(matcher) == 0\\npattern = [{\\\"RIGHT_ID\\\": \\\"founded_id\\\",\\n  \\\"RIGHT_ATTRS\\\": {\\\"ORTH\\\": \\\"founded\\\"}}]\\nmatcher.add(\\\"FOUNDED\\\", [pattern])\\nassert len(matcher) == 1\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsxs(_components.table, {\n        children: [_jsx(_components.thead, {\n          children: _jsxs(_components.tr, {\n            children: [_jsx(_components.th, {\n              children: \"Name\"\n            }), _jsx(_components.th, {\n              children: \"Description\"\n            })]\n          })\n        }), _jsx(_components.tbody, {\n          children: _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(_components.strong, {\n                children: \"RETURNS\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The number of rules. \", _jsx(_components.del, {\n                children: \"int\"\n              })]\n            })]\n          })\n        })]\n      })]\n    }), \"\\n\", _jsxs(_components.section, {\n      id: \"section-contains\",\n      children: [_jsx(_components.h2, {\n        id: \"contains\",\n        tag: \"method\",\n        children: \"DependencyMatcher.__contains__ \"\n      }), _jsx(_components.p, {\n        children: \"Check whether the matcher contains rules for a match ID.\"\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-python\",\n            lang: \"python\",\n            children: \"matcher = DependencyMatcher(nlp.vocab)\\nassert \\\"FOUNDED\\\" not in matcher\\nmatcher.add(\\\"FOUNDED\\\", [pattern])\\nassert \\\"FOUNDED\\\" in matcher\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsxs(_components.table, {\n        children: [_jsx(_components.thead, {\n          children: _jsxs(_components.tr, {\n            children: [_jsx(_components.th, {\n              children: \"Name\"\n            }), _jsx(_components.th, {\n              children: \"Description\"\n            })]\n          })\n        }), _jsxs(_components.tbody, {\n          children: [_jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"key\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The match ID. \", _jsx(_components.del, {\n                children: \"str\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(_components.strong, {\n                children: \"RETURNS\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"Whether the matcher contains rules for this match ID. \", _jsx(_components.del, {\n                children: \"bool\"\n              })]\n            })]\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsxs(_components.section, {\n      id: \"section-add\",\n      children: [_jsx(_components.h2, {\n        id: \"add\",\n        tag: \"method\",\n        children: \"DependencyMatcher.add \"\n      }), _jsxs(_components.p, {\n        children: [\"Add a rule to the matcher, consisting of an ID key, one or more patterns, and an\\noptional callback function to act on the matches. The callback function will\\nreceive the arguments \", _jsx(InlineCode, {\n          children: \"matcher\"\n        }), \", \", _jsx(InlineCode, {\n          children: \"doc\"\n        }), \", \", _jsx(InlineCode, {\n          children: \"i\"\n        }), \" and \", _jsx(InlineCode, {\n          children: \"matches\"\n        }), \". If a pattern already\\nexists for the given ID, the patterns will be extended. An \", _jsx(InlineCode, {\n          children: \"on_match\"\n        }), \" callback\\nwill be overwritten.\"]\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-python\",\n            lang: \"python\",\n            children: \"def on_match(matcher, doc, id, matches):\\n    print('Matched!', matches)\\n\\nmatcher = DependencyMatcher(nlp.vocab)\\nmatcher.add(\\\"FOUNDED\\\", patterns, on_match=on_match)\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsxs(_components.table, {\n        children: [_jsx(_components.thead, {\n          children: _jsxs(_components.tr, {\n            children: [_jsx(_components.th, {\n              children: \"Name\"\n            }), _jsx(_components.th, {\n              children: \"Description\"\n            })]\n          })\n        }), _jsxs(_components.tbody, {\n          children: [_jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"match_id\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"An ID for the patterns. \", _jsx(_components.del, {\n                children: \"str\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"patterns\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"A list of match patterns. A pattern consists of a list of dicts, where each dict describes a token in the tree. \", _jsx(_components.del, {\n                children: \"List[List[Dict[str, Union[str, Dict]]]]\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(_components.em, {\n                children: \"keyword-only\"\n              })\n            }), _jsx(_components.td, {})]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"on_match\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"Callback function to act on matches. Takes the arguments \", _jsx(InlineCode, {\n                children: \"matcher\"\n              }), \", \", _jsx(InlineCode, {\n                children: \"doc\"\n              }), \", \", _jsx(InlineCode, {\n                children: \"i\"\n              }), \" and \", _jsx(InlineCode, {\n                children: \"matches\"\n              }), \". \", _jsx(_components.del, {\n                children: \"Optional[Callable[[DependencyMatcher, Doc, int, List[Tuple], Any]]\"\n              })]\n            })]\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsxs(_components.section, {\n      id: \"section-get\",\n      children: [_jsx(_components.h2, {\n        id: \"get\",\n        tag: \"method\",\n        children: \"DependencyMatcher.get \"\n      }), _jsxs(_components.p, {\n        children: [\"Retrieve the pattern stored for a key. Returns the rule as an\\n\", _jsx(InlineCode, {\n          children: \"(on_match, patterns)\"\n        }), \" tuple containing the callback and available patterns.\"]\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-python\",\n            lang: \"python\",\n            children: \"matcher.add(\\\"FOUNDED\\\", patterns, on_match=on_match)\\non_match, patterns = matcher.get(\\\"FOUNDED\\\")\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsxs(_components.table, {\n        children: [_jsx(_components.thead, {\n          children: _jsxs(_components.tr, {\n            children: [_jsx(_components.th, {\n              children: \"Name\"\n            }), _jsx(_components.th, {\n              children: \"Description\"\n            })]\n          })\n        }), _jsxs(_components.tbody, {\n          children: [_jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"key\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The ID of the match rule. \", _jsx(_components.del, {\n                children: \"str\"\n              })]\n            })]\n          }), _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(_components.strong, {\n                children: \"RETURNS\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The rule, as an \", _jsx(InlineCode, {\n                children: \"(on_match, patterns)\"\n              }), \" tuple. \", _jsx(_components.del, {\n                children: \"Tuple[Optional[Callable], List[List[Union[Dict, Tuple]]]]\"\n              })]\n            })]\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsxs(_components.section, {\n      id: \"section-remove\",\n      children: [_jsx(_components.h2, {\n        id: \"remove\",\n        tag: \"method\",\n        children: \"DependencyMatcher.remove \"\n      }), _jsxs(_components.p, {\n        children: [\"Remove a rule from the dependency matcher. A \", _jsx(InlineCode, {\n          children: \"KeyError\"\n        }), \" is raised if the match\\nID does not exist.\"]\n      }), _jsxs(_components.blockquote, {\n        children: [\"\\n\", _jsx(_components.h4, {\n          children: \"Example\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-python\",\n            lang: \"python\",\n            children: \"matcher.add(\\\"FOUNDED\\\", patterns)\\nassert \\\"FOUNDED\\\" in matcher\\nmatcher.remove(\\\"FOUNDED\\\")\\nassert \\\"FOUNDED\\\" not in matcher\\n\"\n          })\n        }), \"\\n\"]\n      }), _jsxs(_components.table, {\n        children: [_jsx(_components.thead, {\n          children: _jsxs(_components.tr, {\n            children: [_jsx(_components.th, {\n              children: \"Name\"\n            }), _jsx(_components.th, {\n              children: \"Description\"\n            })]\n          })\n        }), _jsx(_components.tbody, {\n          children: _jsxs(_components.tr, {\n            children: [_jsx(_components.td, {\n              children: _jsx(InlineCode, {\n                children: \"key\"\n              })\n            }), _jsxs(_components.td, {\n              children: [\"The ID of the match rule. \", _jsx(_components.del, {\n                children: \"str\"\n              })]\n            })]\n          })\n        })]\n      })]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{"title":"DependencyMatcher","teaser":"Match subtrees within a dependency parse","tag":"class","version":3,"source":"spacy/matcher/dependencymatcher.pyx"},"scope":{}},"sectionTitle":"API Documentation","theme":"green","section":"api","apiDetails":{"stringName":null,"baseClass":null,"trainable":null},"isIndex":false,"next":null},"__N_SSG":true},"page":"/[...listPathPage]","query":{"listPathPage":["api","dependencymatcher"]},"buildId":"Ugre-usgT1EZhnSeYcBR9","isFallback":false,"dynamicIds":[728],"gsp":true,"scriptLoader":[]}</script></body></html>